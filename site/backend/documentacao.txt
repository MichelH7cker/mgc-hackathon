Visão Geral das Virtual Machines da Magalu Cloud
Este documento fornece uma visão geral abrangente do produto de Virtual Machines oferecido pela Magalu Cloud e como ele funciona. As Virtual Machines (VMs) como o próprio nome diz são máquinas virtuais, ou seja,  ambientes computacionais isolados criados por software de virtualização. Cada VM funciona como um computador completo, com seu próprio sistema operacional, vCPU, memória, armazenamento e outros recursos. As VMs podem ser executadas em um único servidor físico, permitindo que você execute vários sistemas operacionais e aplicativos em um único dispositivo de hardware.
Funcionamento das Virtual Machines​
As Virtual Machines da Magalu Cloud funcionam através de uma infraestrutura de virtualização que permite a execução de múltiplos sistemas operacionais e aplicativos em um único servidor físico. Cada VM é isolada e independente, permitindo que os usuários tenham controle total sobre seu ambiente de computação. As VMs atuam com base em quatro elementos principais, são eles:

Sistemas operacionais

Você pode executar uma ampla variedade de sistemas operacionais em suas VMs, incluindo Distribuições Linux e Windows Server.

Recursos de computação escaláveis

Você pode provisionar suas VMs com a quantidade de vCPUs, memória e armazenamento que demandam as suas aplicações de forma facilitada e intuitiva.

Armazenamento escalável e independente

Você pode armazenar os dados de suas VMs em armazenamento em bloco (Block Storage), permitindo que você desligue ou delete sua máquina sem perder os dados armazenados, e em armazenamento em objetos (Object Storage), o que permite que seus dados fiquem acessíveis de qualquer lugar.

Configurações de Rede

As VMs podem ser conectadas a redes privadas e públicas, permitindo uma integração fácil com outros serviços e sistemas. Você pode definir regras de segurança, configurar IPs, DNS, gateways e gerenciar o tráfego de rede para suas VMs.
Passo a Passo do funcionamento de uma VM​
O funcionamento do serviço de Virtual Machines pode ser resumido da seguinte forma:


Crie sua Instância: Provisione, instale e configure sua VM com sistema operacional e recursos desejados.


Anexe o Volume: Os usuários podem fazer upload de objetos para seus buckets. Os objetos podem ser facilmente adicionados, atualizados ou excluídos conforme necessário.


Configure as Regras de Segurança: Defina tipo de rede, configure IP, DNS, gateway, adicione interfaces e gerencie o tráfego.


Acesse sua Instância: Acesse remotamente sua instância. Conecte-se via SSH para instâncias de Distribuição Linux ou via RDP para VMs com Windows Server.


Gerencie suas Instâncias: Monitore desempenho, aplique atualizações, faça snapshots, backups e escale recursos conforme necessário.



---

Listar imagens disponíveis

🖥️ Console>_ CLI👣 *Inicio > Menu > Virtual Machines
Clique em "Criar instância";
A lista de imagens aparecerá no tópico "Escolha uma imagem"
Para listar as imagens pela CLI use o comando:mgc virtual-machines machine-types list

---

Listar instâcias

Para listar todas as instâncias execute o comando abaixo:
🖥️ ConsoleCLI👣 Início > Menu > Virtual MachinesAo seguir o caminho acima, as VMs criadas em todas as zonas da mesma região serão listadas.mgc virtual-machines instances list

---

Consultar detalhes de uma instância

Para consultar detalhes de uma instância execute o comando abaixo:
🖥️ Console>_ CLI👣Início > Menu > Virtual Machines > Instância > Detalhes da VMNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja visualizar os detalhes


Clique em "Detalhes da VM"

mgc virtual-machines instances get --id="0377d966-4a2d-485f-81b9-37273ba26471"Para ter ainda mais detalhamento, é possível utilizar a flag --expand com um dos valores abaixo
image
machine-type
network
Exemplo:mgc virtual-machines instances get --id="0377d966-4a2d-485f-81b9-37273ba26471" --expand image,machine-type,network

---

Acessar instância Windows
Este documento irá guiá-lo pelas etapas para acessar remotamente uma máquina Windows usando o protocolo RDP e Remmina.
Este tutorial pressupõe que você já tenha uma instância com Windows. Caso não tenha ainda, o processo de criação de uma instância do Windows Server pode ser visto em Criar uma instância Windows.
Para acessar a instância Windows você precisará:


Habilitar porta


Acessar via RDP ou Remmina


Habilitando porta​
Habilitar a porta 3389 é essencial para permitir o acesso remoto à sua instância do Windows Server por meio do Remote Desktop Protocol (RDP).
Sem essa porta habilitada, o Windows Server não escutaria conexões RDP de entrada. Consequentemente, as tentativas de conexão remota ao servidor falhariam, pois não haveria canal designado para comunicação.
Para habilitar a comunicação pela porta 3389 para acesso remoto à sua instância do Windows Server, siga estas etapas:


Acesse sua instância no painel do serviço de nuvem.


Navegue até os  Detalhes da instância.


Na seção de "Rede", localize o "Grupos de Segurança".


Clique em “Adicionar regra” para criar uma nova regra.


Na nova página de configuração de regras:

Clique em “Avançado”.
Selecione “TCP” como protocolo.
Escolha "Ingress" como direção.
Defina a porta para "3389".
Especifique o IP de origem como "0.0.0.0".
Clique em “Adicionar regra” para aplicar a configuração.



Com esta regra em vigor, você poderá acessar sua instância remotamente usando o Remote Desktop Protocol.
Remote Desktop Connection​
Se você usa Windows, é possível estabelecer uma conexão remota com outra máquina Windows usando o programa “Remote Desktop Connection”.


Para abrir o programa, abra o “Menu Iniciar” e digite “Conexão de Área de Trabalho Remota”.


Na janela que se abre, insira o IP da máquina Windows à qual deseja se conectar e clique em “Conectar”.


Outra janela será aberta solicitando que você insira as credenciais:

Em Nome de usuário, coloque Administrador.
Em Senha, coloque W1ndows.



Remmina (Linux)​
Se você usa distribuições Linux, é possível estabelecer uma conexão com uma máquina Windows usando Remmina.
Se você usa Ubuntu, pode instalá-lo via Terminal com o comando:
sudo apt-get install remmina
Se você usa outras distribuições, verifique no repositório da sua distribuição como instalar o remmina.
Configurando Remmina​


Abra o Remmina em sua máquina Linux


Clique em “Conexão” > “Nova conexão”.


Selecione "RDP" como protocolo.


No campo “Servidor”, digite o nome do computador remoto ou seu endereço IP.


No campo Nome de usuário (Username), coloque Administrador.


No campo Senha (Password), coloque W1ndows.


Preencha o nome da sessão, se desejar.


Clique em "Salvar".


Depois disso, sua conexão será salva na tela inicial. Para estabelecer uma conexão com a máquina, basta clicar duas vezes na entrada da tabela.

---

Criar instância

Para criar uma instância execute os comandos abaixo:
🖥️ Console>_ CLI👣Início > Menu > Virtual MachinesNa página de Virtual Machines, clique no botão para "Criar instância".

Escolha a região em que deseja criar sua instância. Recomendamos escolher a região mais próxima aos destinatários da sua aplicação.


Escolha uma imagem, um Sistema Operacional, e a versão da imagem que deseja.


Escolha um tipo instância. Defina a quantidade de vCPUs, de memória RAM em GB e de disco local em GB mais adequada para a aplicação que deseja.


Opcionalmente, escolha se deseja atribuir um IPv4 público para essa instância. Por padrão, o IPv6 público é gerado automaticamente após a criação da instância.

infoAssociar um IPv4 Público à instância serve para exposição de serviços na Internet conforme estiver configurado no Security Group relecionado a ela.
Insira uma chave SSH ou selecione uma chave já utilizada anteriormente.
infoAcesse o documento para saber mais sobre e como Inserir uma Chave SSH.
Por fim, defina o nome da sua instância. Para o nome da instância são permitidas apenas letras minúsculas, hífen, underline e números.
Para criar sua Instância execute o comando abaixo de acordo com suas deinições de inputs.Por Nome​mgc virtual-machines instances create --name="name-instance-2" --machine-type.name="cloud-bs1.xsmall" --image.name="cloud-ubuntu-24.04 LTS" --ssh-key-name="ssh_key_name"Por ID​mgc virtual-machines instances create --name="name-instance-1" --machine-type.id="45d57c50-61d3-46fc-992e-77f5605dd561" --image.id="57b93394-a161-4b32-8262-52a6f4148837" --ssh-key-name="ssh_key_name" Exemplo de Retorno​┌──────────────────────────────────────┐│ ID                                   │├──────────────────────────────────────┤│ 0377d966-4a2d-485f-81b9-37273ba26471 │└──────────────────────────────────────┘Flags​Para criar uma instância você precisará dar como entrada no comando as seguintes flags:NomeTipoDescriçãoObrigatórionamestringNome da InstânciaYesimageobjectNome ou ID da ImagemYesimage.idstringID da ImagemNoimage.namestringNome da ImagemNomachine-typeobjectNome ou ID do Tipo de InstânciaYesmachine-type.idstringID do Tipo de InstânciaNomachine-type.namestringNome do Tipo de InstânciaNonetworkobjectPropriedades de Associação de IP Público eou  VPC (Para mais detalhes acessar documentação de Network)Nonetwork.associate-public-ipbooleanAssociação de IP Público (Default é "true")Nonetwork.vpcobjectNome ou ID da VPCNonetwork.vpc.idstringID da VPCNonetwork.vpc.namestringNome da VPCNossh-key-namestringNome da chave SSHYesDefinições das flags obrigatórias:--name: Defina o nome da instância (entre 1 a 255 caracteres)--machine.type ou --machine.id: Defina o tipo de instâncias disponíveis para isso Liste todos os tipos de Instâncias ou Veja os documento com as Tipos de instâncias disponíveis.--image.type ou --image.id: Defina a imagem, Sistema Operacional, disponíveis para isso Liste todas as Imagens ou Veja os documento com Imagens disponíveis.--ssh-key-name: Defina a chave SSH que deseja utilizar para acessar a Instância. Previamente, acesse como Como inserir uma Chave SSH.infoPara definir as configurações avançadas de redes acesse Como configurar VPC.

---

Criar instância Windows

Para criar uma instância Windows Server 2022 é necessário utilizar a CLI da Magalu Cloud. Em breve iremos disponibilizar essa oferta de sistema operacional no Console.
>_ CLIPré-Requisito​Antes de começar, certifique-se de ter a Chave SSH cadastrada no Console da Magalu Cloud, conforme o documento Inserir e Gerenciar Chaves SSH.A imagem do Windows Server 2022 foi registrada com o nome windows-server-2022 em nossa API. As imagens do Windows requerem pelo menos 2 vCPUs, 4 GB de RAM e um mínimo de 40 GB de disco para funcionar corretamente.Para criar uma instância do Windows Server 2022, usaremos o seguinte comando:mgc virtual-machines instances create \--name="Minha Máquina Windows" \--machine-type.name="<instance_type>" \--image.name "windows-server-2022" \--ssh-key-name="<ssh-key-name>"Após executar o comando, você receberá uma resposta semelhante a esta:┌──────────────────────────────────────┐│ ID                                   │├──────────────────────────────────────┤│ a22b308f-e3fe-4239-af67-902cc0745775 │└──────────────────────────────────────┘Esta resposta indica que a instância foi criada com sucesso e fornece o ID da instância gerada.

---

Gerar Chaves SSH

Chaves SSH consistem em um par de chaves: uma pública e uma privada. A chave pública é carregada para a instância de VM, enquanto a chave privada permanece segura no seu dispositivo local. Juntas, elas permitem a autenticação sem senha ao acessar a VM.
Para gerar o par de chaves SSH siga as instruções abaixo de acordo com o seus sistema operacional
Em Sistemas Linux ou MacOS​


Abra o terminal: A maioria das distribuições Linux já vem com o OpenSSH instalado, então você pode usar o terminal diretamente.


Gerar a chave SSH:



Execute o seguinte comando:

ssh-keygen -t rsa

Você será solicitado a escolher um local para salvar a chave. Pressione Enter para aceitar o local padrão (~/.ssh/id_rsa).
Em seguida, será solicitado a criar uma senha para proteger a chave privada (opcional, mas recomendado).


Verifique a chave SSH: Sua chave pública estará disponível em ~/.ssh/id_rsa.pub. Para visualizar, use:

 cat ~/.ssh/id_rsa.pub

Inserir uma Chave SSH sua chave SSH seguindo as seguintes orientações.

Em Sistemas Windows​


Instalar o OpenSSH (se necessário): No Windows 10 e 11, o OpenSSH geralmente já vem instalado. Caso contrário, você pode instalar através das "Configurações" > "Aplicativos" > "Recursos Opcionais" > "Adicionar recurso" e adicionar "Cliente OpenSSH".


Abra o PowerShell: Use o atalho Win + X e selecione "Windows PowerShell".


Gerar a chave SSH:



Execute o comando:

ssh-keygen -t rsa

Siga os prompts para salvar a chave no local padrão (C:\Users\SeuNomeDeUsuário.ssh\id_rsa) e criar uma senha para a chave.


Verifique a chave SSH: Use o comando abaixo para visualizar a chave pública

Get-Content ~/.ssh/id_rsa.pub

---

Inserir Chaves SSH

Para inserir uma chave SSH em uma instância siga o passo a passo:
🖥️ Console>_ CLI👣Início > Menu > Virtual Machines > Criar InstânciaNo formulário de criação de instância na seção Chave SSH:

Clique "Inserir uma chave própria nova"


Defina o nome da sua Chave SSH Pública que ficará armazenada. Para o nome da chave SSH são permitidas apenas letras minúsculas, hífen, underline e números.


Insira sua chave SSH, copiando e colando ela do seu gerador de chaves.

infoAcesse o documento para saber mais sobre e como Gerar uma Chave SSH..Verique a documentação aqui

---

Deletar instâcia

Para excluir permanentemente uma instância, execute o comando abaixo.
infoOrientamos primeiramente sempre a você desanexar volumes e/ou desassociar IPs vinculados a instância a ser deletada para que não haja acidentes ou inconsistências nos dados dos recursos que escolher manter.
🖥️ Console>_ CLI👣Início > Menu > Virtual MachinesNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja deletar


Clique em "Excluir"


Confirme a operação digitando o nome da instância

infoA deleção das instâncias é irreversível, não podendo ser recuperada depois. Porém esta ação não afeta qualquer imagem gerada da mesma.mgc virtual-machines instances delete --id 66afc2fa-36eb-43b4-9619-35df0e3f9ad7Flags​Tabela com explicação sobre as flags utilizadas no comando:NomeTipoDescriçãoObrigatórioidstringO id da instânciaYesdelete_public_ipbooleanEscolha excluir ip público juntosNoinfoNote que você poderá deletar simultâneamente o Public IP associado a sua instância a ser deletada.

---

Iniciar instância

Para iniciar uma instância de Virtual Machines, siga as instruções:
🖥️ ConsoleCLI👣Início > Menu > Virtual MachinesNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja iniciar


Clique em "Ligar instância"

mgc virtual-machines instances start --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags​Tabela com explicação sobre as flags utilizadas no comando:NomeTipoDescriçãoObrigatórioidstringO ID da instânciaYes

---

Interromper instância

Para interromper uma instância de máquina virtual, execute o comando abaixo.
🖥️ ConsoleCLI👣Início > Menu > Virtual MachinesNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja interromper


Clique em "Desligar instância"

mgc virtual-machines instances stop --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags​Tabela com explicação sobre as flags utilizadas no comando:NomeTipoDescriçãoObrigatórioidstringO ID da instânciaYes

---

Suspender instância

Para suspendar uma instância de Virtual Machines, execute o comando abaixo.
🖥️ Console>_ CLI👣Início > Menu > Virtual MachinesNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja suspender


Clique em "Detalhes da instância"


No canto superior direito, há o status atual da máquina. Selecione "Suspender instância"

mgc virtual-machines instances suspend --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags​Tabela com explicação sobre as flags utilizadas no comando:NomeTipoDescriçãoObrigatórioidstringO ID da instânciaYes

---

Reiniciar instâcia

Para reiniciar uma instância de Virtual Machines, execute o comando abaixo.
🖥️ ConsoleCLI👣Início > Menu > Virtual MachinesNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja reiniciar


Clique em "Detalhes da instância"


No canto superior direito, há o status atual da máquina. Selecione "Reiniciar instância"

mgc virtual-machines instances reboot --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags​Tabela com explicação sobre as flags utilizadas no comando:NomeTipoDescriçãoObrigatórioidstringO ID da instânciaYes

---

Resize de instância
Para alterar o tipo de uma instância, execute o comando abaixo na CLI. Esta mesma ação estará disponível no console em breve.
🖥️ Console>_ CLI👣Início > Menu > Virtual MachinesNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja alterar o tipo de instância


Clique em "Resize da instância"


Escolha o novo tipo de instância que deseja

infoO novo tipo de instância precisa necessariamente ter o disco local com tamanho igual ou maior ao do disco anterior.Neste modelo é utilizado o nome da instância com a flag --machine-type.namemgc virtual-machine instances retype --id="0377d966-4a2d-485f-81b9-37273ba26471" --machine-type.name cloud-gp1.largeNeste modelo é utilizado o id da instância com a flag --machine-type.idmgc virtual-machine instances retype --id="0377d966-4a2d-485f-81b9-37273ba26471" --machine-type.id="0138757f-032c-4699-899c-a268cc477710"Flags​Tabela com explicação sobre as flags utilizadas no comando:NameTypeDescriptionRequiredidstringO id da instânciaYesmachine-type.idstringO ID do tipo de máquinaNomachine-type.namestringO nome do tipo de máquinaNoRegras​
A instância deve estar no estado em execução ou parada.
O novo tipo de máquina deve ser compatível com o tipo de máquina atual.
O novo tipo de máquina deve estar disponível na mesma região que o tipo de máquina atual.
Você deve fornecer o ID do tipo de máquina ou o nome do tipo de máquina; se fornecer ambos, o ID do tipo de máquina será usado.


---

Anexar uma NIC a uma instância
Para anexar uma NIC (Network Interface) a uma instância, execute o comando abaixo na CLI. Esta mesma ação estará disponível no console em breve.
Pré-requisitos​

Ter uma NIC criada em Network

mgc virtual-machines instances network-interface --instance.id="0377d966-4a2d-485f-81b9-37273ba26471" --network.interface.id="0138757f-032c-4699-899c-a268cc477710" 
Flags​
Tabela com explicação sobre as flags utilizadas no comando:
NomeTipoDescriçãoObrigatórioinstance.idstringO id da instânciaYesnetwork.interface.idstringO id do NIC (Network Interface)Yes

---

Renomear instância
Para renomear uma instância, execute o comando abaixo na CLI. Esta mesma ação estará disponível no console em breve.
mgc virtual-machines instances rename --id="0377d966-4a2d-485f-81b9-37273ba26471" --name="nem_name_instance"
Flags​
Tabela com explicação sobre as flags utilizadas no comando:
NomeTipoDescriçãoObrigatórioidstringO id da instânciaYesnamestringO novo nome da instânciaYes

---

Desanexar uma NIC a uma instância
Para desanexar uma NIC (Network Interface) de uma instância, execute o comando abaixo na CLI. Esta mesma ação estará disponível no console em breve.
mgc virtual-machines instances network-interface --instance.id="0377d966-4a2d-485f-81b9-37273ba26471" --network.interface.id="0138757f-032c-4699-899c-a268cc477710" 
Flags​
Tabela com explicação sobre as flags utilizadas no comando:
NomeTipoDescriçãoObrigatórioinstance.idstringO id da instânciaYesnetwork.interface.idstringO id do NIC (Network Interface)Yes

---

Listar tipos de máquinas

Para listar os tipos de instâncias disponíveis, execute o comando abaixo:
🖥️ Console>_ CLI👣 Início > Menu > Virtual Machines
Clique em "Criar instância";
A lista de tipos de instância aparecerá no tópico "Escolha um tipo de instância"
mgc virtual-machines machine-types list

---

Listar as imagens

Para listar as imagens execute o comando abaixo:
🖥️ ConsoleCLI👣 Início > Menu > Virtual Machines > Minhas imagensAo seguir o caminho acima, serão listadas todas as imagens.mgc virtual-machines snapshots list

---

Consultar detalhes de uma imagem

Para consultar detalhes de uma imagem rode o comando abaixo:
🖥️ Console>_ CLI👣 Início > Menu > Virtual Machines > Minhas imagensAo seguir o caminho acima, serão listadas todas as imagens com detalhes.mgc virtual-machines snapshots get --id f91b0872-997f-40b3-87fa-24bbba54658b

---

Criar uma imagem

Para criar uma imagem da sua instância execute o comando abaixo:
infoCaso a sua instância se encontre ligada, recomendamos que antes de criar a imagem você desligue a instância para não gerar inconsistência nos dados da imagem.
🖥️ ConsoleCLI👣Início > Menu > Virtual MachinesNa listagem de instâncias da página de Virtual Machines:

Clique no menu da instância que deseja criar uma imagem


Clique em "Criar imagem"


Uma sugestão de nome é fornecida mas você pode definir o nome da imagem de sua preferência. Para o nome da imagem são permitidas apenas letras minúsculas, hífen, underline e números.


Clique em "Criar imagem"

mgc virtual-machines snapshots create --name my-snapshot  --virtual-machine.id 0e2dc76-1215-47a7-9fc3-a5b45d5dbedc

---

Deletar uma imagem

Para deletar um imagem da sua instância execute o comando abaixo:
🖥️ Console>_ CLI👣Início > Menu > Virtual Machines > Minhas imagensNa página de Virtual Machines na aba de Minhas imagens:

Clique no menu da imagem que deseja deletar


Clique em "Excluir"


Confirme a operação digitando o nome da instância

infoA deleção das imagens é irreversível, não podendo ser recuperada depois. Porém esta ação não afeta qualquer instância da onde essa imagem foi gerada ou instâncias que foram geradas a partir de uma imagem.mgc virtual-machines snapshots delete --id 90e2dc76-1215-47a7-9fc3-a5b45d5dbedc

---

Restaurar uma imagem

Para restaurar uma imagem em uma nova instância execute o comando abaixo:
ConsoleCLI👣Início > Menu > Virtual Machines > Minhas imagensNa página de Virtual Machines na aba de Minhas imagens:
Clique no menu da imagem que deseja restaurar
infoA imagem estará pronta para restauração quando estiver no estado disponível.

Clique em "Restaurar imagem"


Escolha um tipo de instância que possua Disco igual ou maior ao tamanho da imagem


Defina a chave SSH, selecionando uma chave ou inserindo uma nova chave.


Defina um nome da instância com imagem restaurada.

mgc virtual-machines instances restore --id 90e2dc76-1215-47a7-9fc3-a5b45d5dbedc --name="name-instance-2" --machine-type.name="cloud-bs1.xsmall" --ssh-key-name="ssh_key_name"Flags​NomeTipoDescriçãoObrigatórionamestringNome da InstânciaYesimage.idstringID da ImagemYesidstringID da ImagemNomachine-typeobjectNome ou ID do Tipo de InstânciaYesmachine-type.idstringID do Tipo de InstânciaNomachine-type.namestringNome do Tipo de InstânciaNonetworkobjectPropriedades de Associação de IP Público eou  VPC (Para mais detalhes acessar documentação de Network)Nonetwork.associate-public-ipbooleanAssociação de IP Público (Default é "true")Nonetwork.vpcobjectNome ou ID da VPCNonetwork.vpc.idstringID da VPCNonetwork.vpc.namestringNome da VPCNossh-key-namestringNome da chave SSHYesDefinições das flags obrigatórias:
--id: O ID da imagem (snapshot) que deseja restaurar.
--name: Defina o nome da instância (entre 1 a 255 caracteres)
--machine.type ou --machine.id: Defina o tipo de instâncias disponíveis para isso Liste todos os tipos de Instâncias ou Veja os documento com as Tipos de instâncias disponíveis.
--ssh-key-name: Defina a chave SSH que deseja utilizar para acessar a Instância. Previamente, acesse como Como inserir uma Chave SSH.infoPara definir as configurações avançadas de redes acesse Como configurar VPC.

---

Renomear uma imagem
Para renomear uma imagem, execute o comando na CLI. Esta mesma ação estará disponível no console em breve.
mgc virtual-machines snapshots rename \--id 90e2dc76-1215-47a7-9fc3-a5b45d5dbedc \--name renamed-snapshot

---

Status e States de uma instância
Ao gerenciar instâncias do produto de Virtual Machines, você encontrará os termos Status e States. Embora possam parecer semelhantes, esses conceitos têm significados distintos e desempenham papéis diferentes no gerenciamento de instâncias de VMs.
Diferença entre Status e States​
Status de uma instância​
Status refere-se à condição operacional atual da VM, representando a saúde, disponibilidade e outras métricas de desempenho que indicam se a VM está funcionando corretamente ou enfrentando problemas. O Status ajuda a determinar se a VM está pronta para uso, se requer atenção, ou se está passando por manutenção.
States de uma instância​
States, por outro lado, representam o ciclo de vida operacional da VM. Isso indica o estado em que a VM se encontra dentro do seu ciclo de vida, desde a criação até a exclusão. O State reflete as ações que estão sendo executadas na VM, como inicialização, parada, suspensão, reinicialização ou encerramento.
Lista de Status e States disponíveis​
Status​
Os Status das instâncias ofertadas na Magalu Cloud são:


Criando (Provisioning/Creating): A VM está sendo criada e os recursos necessários estão sendo alocados.


Ligando (Starting): A VM está em processo para ligar.


Desligando (Stopping): A VM está em processo de desligamento.


Suspendendo (Supending): O processo de suspensão foi iniciado, onde a VM é colocada em um estado de suspensão, preservando seu estado atual na memória, mas parando a execução.


Rebooting: A VM está sendo reiniciada, o que implica em uma parada temporária e uma nova inicialização.


Redimensionando (Resizing/Retyping): O processo de alteração do tipo de instância que fará com que a instância tenha tamanho diferente está em andamento.


Pendente (Pending): A VM está sendo iniciada ou uma ação está sendo processada.


Excluindo (Deleting): A VM está sendo excluída.


States​
Os States descrevem o ciclo de vida da VM, que inclui:


Ligado (Running): A VM foi provisionada e está ativa, pronta para uso.


Desligado (Stopped): A VM está parada, seja por uma ação do usuário ou devido a um evento do sistema.


Suspended (Suspenso): A VM foi suspensa temporariamente, mantendo seu estado em memória, mas não executando nenhuma operação.


Error (Erro): A VM encontrou um problema e requer intervenção.



---

Dicas de flags no CLI
Limit​
Você pode usar --control.limit  para controlar a quantidade de resultados que serão impressos:
mgc virtual-machines machine-types list --control.limit 10
Offset​
Você pode usar --control.offset  para controlar o offset de resultados que serão impressos:
mgc virtual-machines machine-types list --control.offset 10
Sort​
Você pode usar --control.sort  para controlar a ordenação dos resultados que serão impressos:
mgc virtual-machines machine-types list --control.sort name:asc,end_standard_support_at:desc

---

Preço
A estrutura de preços das Virtual Machines é baseada no modelo de cobrança por uso (pay-as-you-go), garantindo flexibilidade para ajustar seus custos conforme suas necessidades. O preço é calculado com base no tipo da instância escolhida e no tempo de uso.
Instâncias de Virtual Machines:​
O preço das instâncias é determinado pelo tipo de máquina (vCPU, memória RAM, Disco Local (NVMe) e desempenho) e pelo tempo em que a instância existe.
Importante ressaltar que a cobrança é realizada pela alocação da instância, independentemente do status da instância (ligada, desligada ou suspensa). Ou seja, máquinas que não estão ligadas ainda geram custos enquanto não forem excluídas. Atualmente, estamos trabalhando para flexibilizar esse modelo conforme a alteração dos status da instância.
Licenças de Sistemas Operacionais:​
Para sistemas operacionais que exigem licenças pagas, como o Windows, a cobrança é feita separadamente. No caso do Windows, as licenças são cobradas com base no número de pares de vCPUs e pelo período de uso da máquina.
Serviços Adicionais:​
Além das instâncias, outros serviços como volumes de Block Storage, IPs Públicos e Tráfego de Saída (Egress) de Network também são cobrados separadamente. Isso permite que você ajuste a configuração da sua infraestrutura conforme suas necessidades, pagando apenas pelos recursos adicionais que utilizar.
Snapshots:​
Atualmente, não estão sendo cobrados, mas isso pode ser por tempo indeterminado. Qualquer mudança nesta política será comunicada previamente, garantindo transparência e previsibilidade de custos.
Preços​
Os preços para cada tipo de volume podem ser consultados diretamente na página de preços do website da Magalu Cloud, onde os valores são apresentados de forma clara e atualizada.
Exemplo de Cálculo de Custos:​
Caso 1:​
Suponha que você crie uma instância do tipo BV2-4-40 com 2 vCPUs, 4 GB de RAM e 40 GB de disco local (NVMe), utilizando-a por 730 horas (equivalente a um mês), e com sistema operacional Windows.
A cobrança seria:

Instância Windows BV2-4-40: 730 horas x preço do tipo BV2-4-40 com sistema Windows

Caso 2:​
Suponha que você crie uma instância do tipo BV4-8-100 com 4 vCPUs, 8 GB de RAM e 1000 GB de disco local (NVMe), utilizando-a por 730 horas (equivalente a um mês), e com sistema operacional Ubuntu. Além disso, você adicionou um IPv4 e trafegou externamente 200 GiB durante esse mês. Ainda, adicionou um volume de 5.000 IOPS com 100 GiB  A cobrança seria:

Instância Ubuntu BV4-8-100: 730 horas x preço do tipo BV4-8-100
IPv4 Público: 730 horas x preço do IPv4 por hora
Egress de Transferência de Dados: 200 GiB x preço por GiB transferido de saída
Volume de Block Storage: 100 GiB x 730 horas x preço por GB/hora do tipo de volume de 5.000 IOPS

Note que neste exemplo:

A máquina com sistema operacional Ubuntu não gera custos de licença adicional.
O volume de armazenamento, o IP público e a transferência de dados de saída (egress) são cobrados separadamente com base no uso.
A transferência de dados egress inclui o tráfego de saída da sua instância para a internet ou outras redes, e o valor é calculado conforme o volume de dados transferidos.

Esses componentes resultam em custos detalhados, e você pode acompanhar todos os gastos em tempo real na página de Faturamento do Console da Magalu Cloud, que oferece uma visão completa sobre o uso de suas Virtual Machines, volumes de armazenamento, IPs públicos e transferência de dados.

---

Ofertas de imagens disponíveis
As imagens disponíveis para sua instância são as seguintes:
TipoImagemVersões DisponíveisDistro LinuxUbuntu24.04; 22.04; 20.04Distro LinuxDebian12; 11; 10Distro LinuxOracle Linux9.3; 8.9Distro LinuxRocky9; 8Distro LinuxOpensuse15.5Distro LinuxFedora38; 37MicrosoftWindows Server2022
Caso necessite de alguma imagem diferente das disponíveis, por favor, solicite no Suporte.

---

Ofertas de instâncias disponíveis
Os tipos de instâncias disponíveis são:
Tipos de InstânciavCPURAM (GB)Disco Local (GB)i1-c1-r1-d101110i1-c1-r2-d201220i1-c1-r4-d201420i1-c2-r2-d102210i1-c2-r2-d202220i1-c2-r2-d402240i1-c2-r2-d10022100i1-c2-r2-d15022150i1-c2-r4-d102410i1-c2-r4-d202420i1-c2-r4-d402440i1-c2-r4-d10024100i1-c2-r4-d15024150i1-c4-r4-d204420i1-c4-r4-d404440i1-c4-r4-d10044100i1-c4-r4-d15044150i1-c4-r8-d204820i1-c4-r8-d404840i1-c4-r8-d10048100i1-c4-r8-d15048150i1-c8-r8-d408840i1-c8-r8-d10088100i1-c8-r8-d15088150i1-c8-r16-d4081640i1-c8-r16-d100816100i1-c8-r16-d150816150i1-c8-r32-d4083240i1-c8-r32-d100832100i1-c8-r32-d150832150i1-c16-r16-d40161640i1-c16-r16-d1001616100i1-c16-r16-d1501616150i1-c16-r32-d40163240i1-c16-r32-d1001632100i1-c16-r32-d1501632150i1-c32-r64-d40326440i1-c32-r64-d1503264150i1-c4-r8-d404840
Nem todos os tipos de instância estão disponíveis para determinados sistema operacionais:

Windows Server aceita apenas tipos de instâncias com 2 ou mais vCPUs e com disco local maior ou igual a 40GB.
Oracle Linux aceita apenas tipos de instância com disco local maior ou igual a 40GB.


---

Visão Geral
Este documento apresenta uma visão detalhada do serviço de Object Storage fornecido pela
Magalu Cloud. O Object Storage é uma solução de armazenamento de objetos em nuvem,
compatível com a API S3, que se destaca pela sua escalabilidade, segurança e
confiabilidade. Este serviço é ideal para atender às diversas necessidades de
armazenamento de dados de empresas de todos os portes e setores.
Estrutura do Object Storage​
O serviço de Object Storage da Magalu Cloud é estruturado em dois componentes principais:
buckets e objetos.
Buckets​
Buckets são contêineres de armazenamento de alto nível que organizam e agrupam objetos
relacionados. Eles fornecem uma estrutura lógica para o armazenamento, facilitando a
organização e o acesso eficiente aos dados.
Objetos​
Objetos são unidades de dados armazenadas no serviço de Object Storage. Eles podem incluir
arquivos, imagens, vídeos ou documentos, e são identificados por uma chave única dentro de
um bucket. Os objetos podem ter tamanhos variados e são armazenados de maneira durável,
permitindo acesso e manipulação conforme necessário.
Recursos Disponíveis​
O Object Storage da Magalu Cloud é compatível com o protocolo S3 (Simple Storage Service),
oferecendo um conjunto completo de funcionalidades que refletem as capacidades do S3. A
seguir, estão detalhadas as funcionalidades disponíveis em nossas regiões:


Criação e Gerenciamento de Buckets: Permite a criação e gestão de buckets para
organizar e armazenar objetos conforme suas necessidades específicas. Os usuários podem
criar, listar e excluir buckets com facilidade.


Upload e Download de Objetos: Suporte para o upload e download de objetos de
qualquer tamanho para e a partir de seus buckets, garantindo uma transferência eficiente
de dados. Para configuração de permissões de acesso (ACL-Grantee), consulte a documentação
de ACL da AWS CLI.


Gerenciamento de Objetos: Inclui operações para gerenciar objetos, como a cópia
entre buckets e a exclusão de objetos. Os usuários têm controle total sobre os objetos
armazenados.


Versionamento de Objetos: Oferece suporte ao versionamento, permitindo que os
usuários mantenham um histórico de versões anteriores de um objeto. Isso possibilita a
restauração de versões anteriores e o rastreamento das alterações ao longo do tempo.Saiba Mais


Controle de Acesso: Configuração de políticas de controle de acesso (ACL) para
assegurar a segurança e a privacidade dos dados armazenados. As permissões podem ser
ajustadas para atender às necessidades específicas de acesso e controle.Saiba Mais


Criação de URLs Pré-Assinadas: Permite a geração de URLs pré-assinadas para acessar
objetos de forma temporária e segura. Esses URLs possuem uma validade limitada e podem ser
compartilhados com terceiros, facilitando o acesso aos objetos sem a necessidade de
autenticação adicional.


Armazenamento Cold Instant: Por padrão, novos objetos utilizam a classe de
armazenamento "standard", que é adequada para acessos frequentes. No entanto, para muitos
casos, o acesso aos objetos armazenados pode ser raro e o principal objetivo é garantir
que eles sejam mantidos por longos períodos, ainda que disponíveis para acesso rápido
quando necessário.Saiba Mais


Exemplos: backups, logs, registros arquivados para cumprimento de legislações.

Bucket policy: São regras de controle de acesso associadas a um bucket de
armazenamento, que definem quem pode acessar ou gerenciar os objetos armazenados dentro
desse bucket e de que forma. Essas políticas permitem que você controle permissões de
forma detalhada, especificando ações permitidas, condições para acesso e usuários ou
grupos que têm acesso.Saiba Mais

Benefícios​
Alta Escalabilidade: O Object Storage da Magalu Cloud é projetado para escalar conforme as
necessidades dos clientes. Oferece escalabilidade ilimitada, permitindo que empresas de todos os
tamanhos armazenem e gerenciem dados globalmente sem comprometer o desempenho.


Alta Disponibilidade: Com operações de alta disponibilidade em duas regiões brasileiras — Sudeste e
Nordeste — o produto garante que os usuários possam acessar e compartilhar seus dados de forma confiável
em todo o território nacional e globalmente.


Segurança Avançada: A segurança dos dados é uma prioridade para a Magalu Cloud. O Object Storage
oferece criptografia avançada, autenticação por API Key e controles de acesso granulares para proteger os
dados contra ameaças internas e externas.


Conformidade Regulatória Local: O armazenamento de dados no Brasil garante que a Magalu Cloud
esteja em conformidade com as regulamentações nacionais. Isso assegura que dados críticos que precisam
ser armazenados em território brasileiro estejam sempre acessíveis e protegidos conforme as normas locais.


Acessibilidade: A arquitetura flexível e as interfaces intuitivas, tanto via CLI quanto no Console,
proporcionam acesso e recuperação de dados de forma rápida e eficiente, oferecendo uma experiência do
usuário superior.


Alta Confiabilidade: Com uma infraestrutura robusta, suportada por datacenters de tecnologia de
ponta e uma equipe especializada em suporte 24/7, o serviço de Object Storage da Magalu Cloud é uma
solução confiável para o armazenamento de dados críticos. O suporte está disponível em português,
garantindo um atendimento eficiente em todo o país.


Cobrança Transparente: O modelo de cobrança do Object Storage é baseado na metrificação unitária
por GB armazenado e trafegado, com preços competitivos e acessíveis. A cobrança é realizada em reais
(R$), sem impostos adicionais. Além disso, o consumo é detalhado e transparente, permitindo aos clientes
visualizar claramente os serviços utilizados e os valores correspondentes.


O Object Storage da Magalu Cloud oferece uma solução robusta e flexível para o armazenamento de dados, com
recursos avançados que atendem às necessidades das empresas modernas.

---

Pré-requisitos

Configurar uma Ferramenta Compatível com S3 de sua preferência.


---

Criar Bucket

Ao criar um bucket, você poderá armazenar e gerenciar seus objetos de forma eficiente e segura. Os buckets servem
como contêineres que organizam seus dados, permitindo um acesso rápido e estruturado.
🖥️ ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONE👣 Inicio > Menu > Object StorageNa página de Armazenamento de Objetos, clique no botão para Criar bucket.

Escolha a Região: Selecione a região do datacenter mais próxima de sua
aplicação para otimizar o acesso aos dados. Se os dados forem acessados de uma
localização geográfica específica, escolha a região do datacenter
correspondente.


Configuração de Permissão: Por padrão, o bucket é configurado como
Privado. Escolha a opção de permissão desejada:


Privado: Somente usuários que se conectam ao bucket usando API Keys
poderão listar seu conteúdo. Após a criação do bucket, você pode configurar
Listas de Controle de Acesso (ACL) para autorizar usuários específicos a
acessá-lo.


Público: Permite que qualquer pessoa possa listar os objetos
armazenados no bucket. Note que o acesso será somente para leitura dos
dados.



mgc object-storage buckets create NOME_DO_BUCKETaws s3 mb s3://NOME_DO_BUCKETaws s3api create-bucket --bucket NOME_DO_BUCKETrclone mkdir NOME_DO_REMOTO:NOME_DO_BUCKET
infoEscolha um nome único para o seu bucket. Sugerimos um
nome que atenda às regras de nomenclatura dos buckets. O nome do bucket será
validado, e se o nome desejado não estiver disponível, a criação do bucket não
será permitida.

---

Listar Buckets

A listagem exibe informações básicas sobre cada bucket, facilitando o gerenciamento.
🖥️ ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONE👣 Inicio > Menu > Object StorageNa página de Object Storage, você pode visualizar todos os buckets para cada
região. A listagem exibe informações básicas sobre cada bucket, facilitando o
gerenciamento.mgc object-storage buckets listaws s3 lsaws s3api list-bucketsrclone lsd NOME_DO_REMOTO:

---

Alterar Permissão

Alterando as permissões de um bucket no seu sistema de armazenamento. As permissões podem ser configuradas para
tornar o bucket público ou privado, controlando o acesso aos objetos armazenados.
🖥️ Console>_ CLI👣 Inicio > Menu > Object Storage > Menu do Bucket > Tornar Público/Privado
Clique no ícone de menu ao lado do bucket para o qual deseja alterar a
permissão.
Selecione a opção desejada:


Tornar Público: Qualquer pessoa com acesso à URL poderá listar todos
os objetos no bucket.


Tornar Privado: Apenas o proprietário do bucket e usuários
autorizados terão acesso ao conteúdo do bucket.

Para conceder acesso a usuários específicos em um bucket privado, é
necessário configurar permissões via ACL (Access Control List).




infoPara acessar o conteúdo dos objetos em um bucket, é necessário configurar
permissões via ACL para cada objeto individualmente.Para alterar o nível de permissão de um bucket através da CLI, você deve
configurar permissões via ACL

---

Excluir Bucket

Quando você precisa remover um bucket, é importante seguir os passos corretos para garantir que a exclusão ocorra sem problemas.
🖥️ ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONE👣 Inicio > Menu > Object Storage > Menu do Bucket > Excluir Bucket

Na página de Armazenamento de Objetos, você pode visualizar todos os buckets
para cada região. Encontre o bucket desejado e selecione a opção de
gerenciamento, clicando em Excluir Bucket.


Confirme a exclusão reescrevendo o nome do bucket que deseja excluir.

mgc object-storage buckets delete NOME_BUCKETaws s3 rb s3://NOME_BUCKETaws s3api delete-bucket --bucket NOME_BUCKETrclone rmdir NOME_DO_REMOTO:NOME_BUCKET
warningA exclusão do bucket irá remover permanentemente todo o seu conteúdo, incluindo
objetos armazenados. Esta ação é irreversível.

---

Excluir Buckets com Objetos

Quando você precisa remover um bucket que contém objetos, é importante seguir os passos corretos para garantir que a exclusão ocorra sem problemas.
🖥️ ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONE👣 Inicio > Menu > Object Storage > Menu do Bucket > Excluir Bucket

Na página de Armazenamento de Objetos, você pode visualizar todos os buckets
para cada região. Encontre o bucket desejado e selecione a opção de
gerenciamento, clicando em Excluir Bucket.


Confirme a exclusão reescrevendo o nome do bucket que deseja excluir.

mgc object-storage buckets delete --bucket NOME_BUCKET --recursiveaws s3 rb s3://NOME_BUCKET --force
Liste todos os objetos no bucket:
aws s3api list-objects --bucket NOME_BUCKET --query "Contents[].Key"
Delete todos os objetos listados:
aws s3api delete-objects --bucket NOME_BUCKET --delete "Objects=[{Key=OBJECT_KEY}]"
Após deletar todos os objetos, exclua o bucket:
aws s3api delete-bucket --bucket NOME_BUCKETrclone purge NOME_DO_REMOTO:NOME_BUCKETEm caso de bucket com objetos, é necessário utilizar a flag --force para
excluir todos os objetos primeiro e, em seguida, remover o bucket.
warningA exclusão do bucket irá remover permanentemente todo o seu conteúdo, incluindo
objetos armazenados. Esta ação é irreversível.

---

Copiar URL do Bucket
noteAntes você precisará definir uma ACL para o Bucket
🖥️ ConsoleMGC-CLI👣 Inicio > Menu > Object Storage
Clique no ícone de menu ao lado do bucket do qual deseja copiar a URL.
Selecione a opção “Copiar URL”.
mgc object-storage buckets public-url NOME_DO_BUCKET

A URL dos Buckets segue o modelo de Virtual Hosting (vHost), com o
seguinte padrão:
https://mgc-bucket-1.br-ne1.magaluobjects.com
Ou alternativamente:
https://br-ne1.magaluobjects.com/mgc-bucket-1

---

Upload de Objeto
Fazer o upload de um objeto para um bucket de armazenamento é uma tarefa fundamental para gerenciar seus dados.
🖥️ ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEAtualmente, a interface do Console não suporta a funcionalidade de upload de
objetos. Para realizar essa operação, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects upload CAMINHO_DO_OBJETO NOME_DO_BUCKETaws s3 cp CAMINHO_DO_OBJETO s3://NOME_DO_BUCKETaws s3api put-object --bucket NOME_DO_BUCKET --body CAMINHO_DO_OBJETOrclone copy CAMINHO_DO_OBJETO NOME_DO_REMOTO:mgc-bucket-1

---

Upload de um diretório com objetos
Realizar o upload de um diretório é uma maneira eficiente de transferir múltiplos arquivos para um
bucket de armazenamento.
🖥️ ConsoleMGC-CLIAWS-CLIRCLONEAtualmente, a interface do Console não suporta a funcionalidade de upload de
objetos. Para realizar essa operação, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects upload-dir DIRETORIO_LOCAL NOME_DO_BUCKETaws s3 cp DIRETORIO_LOCAL s3://NOME_DO_BUCKETrclone copy DIRETORIO_LOCAL NOME_DO_REMOTO:NOME_DO_BUCKET

---

Listar Objetos
Listar os objetos dentro de um bucket é uma etapa fundamental para gerenciar seus dados.
🖥️ ConsoleMGC-CLIAWS-CLIRCLONEAtualmente, a interface do Console não suporta a funcionalidade de listar
objetos. Para realizar essa operação, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects list NOME_DO_BUCKETaws s3 ls s3://NOME_DO_BUCKET rclone ls NOME_DO_REMOTO:NOME_DO_BUCKET

---

Download de Objeto

Baixar um objeto específico de um bucket pode ser essencial para acessar dados ou realizar backups.
🖥️ ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEAtualmente, a interface do Console não suporta a funcionalidade de download de
objetos. Para realizar essa operação, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects download NOME_DO_BUCKET/CAMINHO_DO_OBJETO /CAMINHO_PARA_SALVAR_O_ARQUIVOaws s3 cp s3://NOME_DO_BUCKET CAMINHO_DO_OBJETO_LOCALaws s3api get-object --bucket NOME_DO_BUCKET --key NOME_DO_OBJETO CAMINHO_DO_OBJETO_LOCALrclone copy NOME_DO_REMOTO:mgc-bucket-1 CAMINHO_DO_OBJETO_LOCAL

---

Download de Todos Objetos
Transferir todos os objetos de um bucket para sua máquina local é uma tarefa comum, especialmente para backup ou
análise.
MGC-CLIAWS-CLIRCLONEmgc object-storage objects download-all NOME_DO_BUCKET CAMINHO_DA_PASTA_LOCALaws s3 sync s3://NOME_DO_BUCKET CAMINHO_DA_PASTA_LOCALrclone sync NOME_DO_REMOTO:mgc-bucket-1 CAMINHO_DA_PASTA_LOCAL

---

Excluir Objeto
Excluir objetos de um bucket pode ser necessário para liberar espaço ou remover dados desatualizados.
🖥️ ConsoleMGC-CLIAWS-CLIAWSS-3APIRCLONEAtualmente, a interface do Console não permite a exclusão de objetos. Para
realizar essa operação, utilize as ferramentas de linha de comando (CLI).mgc object-storage objects delete  NOME_DO_BUCKET/NOME_DO_OBJETO aws s3 rm s3://NOME_DO_BUCKET/NOME_DO_OBJETO --recursiveaws s3api delete-object --bucket NOME_DO_BUCKET --key NOME_DO_OBJETOrclone delete NOME_DO_REMOTO:NOME_DO_BUCKET/NOME_DO_OBJETO
warningEssa ação é irreversível.

---

Excluir Todos os Objetos
Excluir todos os objetos de um bucket pode ser necessário em diversas situações, como a limpeza de dados
antigos ou a reorganização de armazenamento.
🖥️ ConsoleMGC-CLIAWS-CLIRCLONEAtualmente, a interface do Console não permite a exclusão de objetos. Para
realizar essa operação, utilize as ferramentas de linha de comando (CLI).mgc object-storage objects delete-all NOME_DO_BUCKETaws s3 rm s3://NOME_DO_BUCKET --recursiverclone delete "NOME_DO_REMOTO":NOME_DO_BUCKET
warningEssa ação é irreversível.

---

Copiar a URL do Objeto
noteAntes você precisará definir uma ACL para o Objeto
🖥️ ConsoleMGC-CLIAtualmente, a interface do Console não oferece suporte para copiar a URL
pública de um objeto. Para realizar essa operação, utilize as ferramentas de
linha de comando (CLI).mgc object-storage objects public-url [nome-do-bucket]/[nome-do-arquivo]

A URL dos objetos segue o modelo de Virtual Hosting para Buckets (vHost). O
padrão para formar a URL é o seguinte:
https://[regiao].magaluobjects.com/[nome-do-bucket]/[nome-do-arquivo]


[regiao]: Substitua pelo código da região apropriada, como br-ne1. Este
código indica a região do data center onde o bucket está localizado.


[nome-do-bucket]: Substitua pelo identificador único do bucket, como
mgc-bucket-1.


[nome-do-arquivo]: Substitua pelo nome do objeto específico dentro do
bucket, como my-file.



---

Upload de um objeto público
Fazer o upload de um objeto público significa que qualquer pessoa com o link poderá acessar esse arquivo.
🖥️ ConsoleMGC-CLIAWS-CLIAWS-S3APIAtualmente, a interface do Console não suporta a funcionalidade de upload de objetos. Para
realizar essa operação, utilize as ferramentas de linha de comando (CLI).Atualmente, não é possível fazer upload de objeto publico via MGC-CLI.aws s3 cp CAMINHO_DO_OBJETO s3://NOME_DO_BUCKET --acl public-readaws s3api put-object --bucket NOME_DO_BUCKET --body CAMINHO_DO_OBJETO --acl public-read

---

Tornar um objeto público
Tornar um objeto público permite que qualquer pessoa com o link tenha acesso a ele.
🖥️ ConsoleMGC-CLIAWS-S3APIAtualmente, a interface do Console não suporta a funcionalidade de upload de objetos. Para
realizar essa operação, utilize as ferramentas de linha de comando (CLI).mgc object-storage objects acl set NOME_DO_BUCKET/CAMINHO_DO_OBJETO --public-readaws s3api put-object-acl --bucket NOME_DO_BUCKET --key CAMINHO_DO_OBJETO --acl public-read

---

Criar ACL do Bucket

infoPara mais informaç ões sobre ACLs, consulte a documentação de ACL.
🖥️ ConsoleMGC-CLIAWS-CLIRCLONE👣 Inicio > Menu > Object Storage > Menu do Bucket > Criar acesso via ACL
Clique no ícone de menu ao lado do bucket para o qual deseja configurar permissões.
Selecione a opção “Criar Acesso via ACL”.
Insira o e-mail da pessoa a quem deseja conceder acesso e clique em “Adicionar”.
Escolha o nível de acesso desejado para o usuário:

Leitura: O usuário poderá listar e acessar os metadados dos objetos no
bucket.
Leitura e Escrita: Além das permissões de Leitura, o usuário poderá
fazer o upload de objetos no bucket.


Clique em “Criar Acesso”.
mgc object-storage buckets acl set --dst NOME_DO_BUCKET --public-readVocê pode adicionar a flag que melhor atenda às suas necessidades de acesso.
As opções disponíveis são:

--private: O proprietário (Owner) possui FULL_CONTROL. Apenas o proprietário
e os delegados da conta têm direitos de acesso; outros usuários não têm acesso.


--public-read: O proprietário (Owner) possui FULL_CONTROL. Qualquer pessoa
pode ler o bucket.


--grant-write array (object): Permite que os destinatários criem objetos
neste bucket.

aws s3api put-bucket-acl --bucket NOME_DO_BUCKET --acl "ACL-Grantee"Para mais informações sobre as opções de configuração no “ACL-Grantee”,
consulte a documentação de ACL da AWS CLI.O RClone não oferece suporte direto para ACL vinculada ao Bucket. Durante a
configuração, você pode definir ACL ao criar um remote.rclone config
infoAo configurar a ACL do bucket, observe que as regras não são aplicáveis de
forma recursiva, ou seja, não são transmitidas para os objetos contidos no
bucket. Para aplicar regras de acesso aos objetos, utilize a ACL para Objetos.

---

Verificar o Status de Versionamento
Manter o controle sobre o versionamento de objetos em um bucket é essencial para garantir que você possa acessar e
restaurar versões anteriores dos seus dados.
MGC-CLIAWS-S3APImgc object-storage buckets versioning get --bucket NOME_DO_BUCKETaws s3api get-bucket-versioning --bucket NOME_DO_BUCKET

---

Ativar Versionamento de Objetos
O versionamento de objetos é uma funcionalidade importante que permite manter várias versões de um objeto em um
bucket. Isso pode ser útil para recuperação de dados e gerenciamento de alterações.
MGC-CLIAWS-S3APImgc object-storage buckets versioning --bucket NOME_DO_BUCKET Enabledaws s3api put-bucket-versioning --bucket NOME_DO_BUCKET --versioning-configuration Status=Enabled

---

Listar Versões de um Objeto
Quando o versionamento está habilitado em um bucket, você pode acessar diferentes versões de um objeto. Listar
essas versões pode ser útil para gerenciar dados e restaurar informações conforme necessário.
MGC-CLIAWS-S3APImgc object-storage objects versions --dst NOME_DO_BUCKET/NOME_DO_OBJETOaws s3api list-object-versions --bucket NOME_DO_BUCKET --prefix NOME_DO_OBJETO

---

Criar Bucket Policy
infoPara mais informações sobre Bucket Policy, consulte a documentação de Bucket Policy.
Bucket policies são regras de controle de acesso associadas a um bucket de
armazenamento, que definem quem pode acessar ou gerenciar os objetos armazenados dentro
desse bucket e de que forma. Essas políticas permitem que você controle permissões de
forma detalhada, especificando ações permitidas, condições para acesso e usuários ou
grupos que têm acesso.
🖥️ ConsoleMGC-CLIAWS-S3APIVocê pode gerenciar suas Bucket Policies diretamente através do console de gerenciamento disponível em:
https://console.magalu.cloud/.Navegue até "Object Storage"Clique nos três pontos laterais, e terá uma visualização como a mostrada abaixo:

Clique em "Editar Política"Esse painel permite:
Criar novas políticas.
Editar políticas existentes.
Esse recurso proporciona um ambiente centralizado e de fácil uso para garantir que suas políticas estão configuradas de acordo com as melhores práticas de segurança e governança de dados.mgc object-storage buckets policy set --dst NOME_DO_BUCKET --policy POLICYaws s3api put-bucket-policy --bucket NOME_DO_BUCKET --policy file://POLICY-PATH
Bucket Policy Sintaxe
As políticas são definidas utilizando um documento de política com a seguinte
sintaxe:
policy  = {     <version_block?>     <id_block?>     <statement_block>}<version_block> = "Version" : ("2012-10-17")<id_block> = "Id" : <policy_id_string><statement_block> = "Statement" : [ <statement>, <statement>, ... ]<statement> = {    <sid_block?>,    <principal_block?>,    <effect_block>,    <action_block>,    <resource_block>}<sid_block> = "Sid" : <sid_string><effect_block> = "Effect" : ("Allow" | "Deny")<principal_block> = ("Principal") : ("*" | <principal_map>)<principal_map> = { <principal_map_entry>, <principal_map_entry>, ... }<principal_map_entry> = ("MGC") :    [<principal_id_string>, <principal_id_string>, ...]<action_block> = ("Action") :    ("*" | <action_string> | [<action_string>, <action_string>, ...])<resource_block> = ("Resource") :    : ("*" | <resource_string> | [<resource_string>, <resource_string>, ...])

---

OpenTofu
Infraestrutura como Código​
Infraestrutura como Código
(IaC) refere-se à
prática de utilizar arquivos de configuração armazenados em repositórios de código para
descrever e gerenciar a infraestrutura de recursos computacionais,
como servidores, redes, armazenamento, bancos de dados, acessos, e DNS.
Empresas que utilizam serviços de nuvem frequentemente recorrem ao Terraform
para organizar e automatizar a configuração e o provisionamento de sua
infraestrutura.
OpenTofu + S3 + Magalu Cloud​
Este guia descreve como utilizar o OpenTofu, uma
alternativa de código aberto ao Terraform, para criar e gerenciar recursos de
Object Storage na Magalu Cloud.
Pré-requisitos​

Sistema operacional Linux (por exemplo, Ubuntu)
OpenTofu na versão v1.7.1 ou superior

Projeto e Módulo Raíz​
Inicie criando um diretório para o projeto e um módulo de configuração raiz:
mkdir tutorial-tofucd tutorial-tofuecho "terraform {}" > main.tftofu validate
Embora esta configuração raiz seja válida, está vazia. Módulos do Terraform
utilizam plugins chamados Providers,
que são extensões instaláveis para permitir o uso de produtos de diferentes
nuvens.
Neste tutorial, usaremos o provider
hashicorp/aws
(licença MPL v2.0),
que permite a interação com fornecedores de Object Storage compatíveis com o padrão S3. Atualize o arquivo main.tf para o seguinte:
main.tfterraform {  required_providers {    aws = {      source  = "hashicorp/aws"      version = "5.50.0"    }  }}provider "aws" {  # Configuration options}
Instale este plugin com o comando:
tofu init
Retornaremos ao bloco comentado acima após configurarmos um "profile aws" com
credenciais de acesso no próximo passo.
NotaEmbora exista um provider de Terraform oficial da Magalu Cloud,
não o utilizamos neste tutorial para demonstrar a compatibilidade da API com o
padrão S3 e porque, na data de publicação, o provider da Magalu estava na versão
0.18.10,
que suportava apenas buckets e não objetos.
Configuração das credenciais​
Como o Object Storage da Magalu é compatível com S3, ele também utiliza
autenticação via API Key. Você pode criar uma chave de API no console e
Início > Object Storage > API Key,
clicando em "Criar API Key"

A chave gerada possui duas informações essenciais: ID e Secret. No
tutorial, essas variáveis serão configuradas em um arquivo de perfil da AWS,
localizado em ~/.aws/credentials. Crie um perfil chamado tutorial-tofu
substituindo os textos em caixa alta COLE_AQUI_O... com o ID e o SECRET da
chave criada:

mkdir -p ~/.awscat << EOF >> ~/.aws/credentials[tutorial-tofu]aws_access_key_id = COLE_AQUI_O_IDaws_secret_access_key = COLE_AQUI_O_SECRETEOF
Para a Magalu Cloud, ajuste os campos endpoint_url e region. Neste exemplo,
utilizaremos a região "Brasil - Nordeste 1", identificada como br-ne1:
cat << EOF >> ~/.aws/config[profile tutorial-tofu]endpoint_url = https://br-ne1.magaluobjects.com/region = br-ne1EOF
Se configurado corretamente, retorne ao módulo raiz do projeto e inclua o nome
do perfil no campo profile do bloco de configuração do provider aws:
main.tfprovider "aws" {  profile                     = "tutorial-tofu"  skip_region_validation      = true  skip_requesting_account_id  = true  skip_credentials_validation = true}
Os atributos adicionais (skip_region_validation, skip_requesting_account_id,
skip_credentials_validation) são necessários, e detalhes podem ser consultados
na documentação do plugin.
Primeiro Bucket​
Agora, vamos criar o primeiro recurso: um bucket para armazenar objetos. Crie
um novo módulo de configuração com o arquivo resources.tf:
resources.tfresource "aws_s3_bucket" "first_bucket" {  bucket_prefix = "tutorial-bucket"}
NotaUtilizamos o campo bucket_prefix em vez de bucket para nomear o contêiner,
pois, assim como na AWS, os nomes de buckets na Magalu Cloud são globais e
devem ser únicos. Portanto, ao invés de criar um nome único manualmente,
fornecemos apenas um prefixo e deixamos o provider gerar um nome único.
Execute tofu plan para planejar o provisionamento:
tofu plan
Este comando exibirá as mudanças necessárias para alcançar o estado descrito
nas configurações. O plano listará a criação do bucket:
"# aws_s3_bucket.first_bucket will be created"
Aplique o plano com:
tofu apply -compact-warnings
Confirme a aplicação do plano digitando yes quando solicitado. Ao final, a
mensagem deve ser similar a:
Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
Verifique o estado do novo recurso com tofu state list, tofu state show e
tofu show.
Você também pode verificar a criação do bucket através da listagem no console:

Certifique-se de selecionar a região "Brasil - Nordeste 1" se seu console
estiver configurado para outra região:

Mais recursos: objetos​
Agora que temos um bucket aws_s3_bucket criado, podemos adicionar dois
arquivos dentro dele utilizando o recurso aws_s3_object. Atualize o arquivo
resources.tf com::
resources.tfresource "aws_s3_bucket" "first_bucket" {  bucket_prefix = "tutorial-bucket"}resource "aws_s3_object" "first_bucket_objects" {  for_each = tomap({    file1 = "./main.tf"    file2 = "./resources.tf"  })  bucket = aws_s3_bucket.first_bucket.id  key    = each.value  source = each.value}
O comando tofu plan mostrará:
Plan: 2 to add, 0 to change, 0 to destroy.
E o tofu apply:
Apply complete! Resources: 2 added, 0 changed, 0 destroyed.
Os dois arquivos estarão agora na nuvem. O comando tofu state list deve
mostrar 3 recursos:
$ tofu state listaws_s3_bucket.first_bucketaws_s3_object.first_bucket_objects["file1"]aws_s3_object.first_bucket_objects["file2"]
Para ver o estado do segundo objeto, execute:
$ tofu state show 'aws_s3_object.first_bucket_objects["file2"]'# aws_s3_object.first_bucket_objects["file2"]:resource "aws_s3_object" "first_bucket_objects" {    arn                = "arn::s3:::tutorial-bucket20240523203657781600000001/resources.tf"    bucket             = "tutorial-bucket20240523203657781600000001"    bucket_key_enabled = false    content_type       = "application/octet-stream"    etag               = "01d689431df57be26625e8fb41ac04d2"    force_destroy      = false    id                 = "./resources.tf"    key                = "./resources.tf"    source             = "./resources.tf"    storage_class      = "STANDARD"    tags_all           = {}}
Desprovisionando Tudo​
Para evitar surpresas na conta do cartão de crédito, é crucial saber como
limpar todos os recursos criados. Para desprovisionar os recursos, execute:
tofu destroy
Destroy complete! Resources: 3 destroyed.
Configuração e Estado​
O comando tofu state fornece informações sobre o estado atual da
infraestrutura descrita no código. A declaração descreve a infraestrutura
desejada, enquanto o "state" reflete a configuração atual.
Na minha configuração, declarei que a instalação deveria ter um bucket com um
certo prefixo no nome e dois objetos dentro, com o caminho dos arquivos locais
para cada objeto.
O estado vai ter muito mais informação do que isso, como por exemplo: o nome
completo que o bucket recebeu, as etags de cada objeto e vários outros detalhes.
Um ls no diretório do projeto mostrará a existência de dois arquivos gerados
que descrevem o estado atual e o estado anterior da instalação:
terraform.tfstate  terraform.tfstate.backup
Um less no arquivo atual, depois do destroy, mostrará que o estado atual não
possui nenhum recurso, por exemplo:
$ less -F terraform.tfstate{  "version": 4,  "terraform_version": "1.7.1",  "serial": 7,  "lineage": "51390cb1-af8e-d82b-99d6-1bb5da876657",  "outputs": {},  "resources": [],  "check_results": null}
Compartilhando o estado com o time​
Num cenário onde várias pessoas vão trabalhar na mesma infraestrutura, ter as
configs e este estado apenas local na máquina de quem executou o plano por
último não é o ideal. Ao mesmo tempo,
por conter informações sensíveis,
não é recomendado colocar os arquivos tfstate.* num repositório git,
especialmente se este repositório for público.
Uma possível saída para coordenar este trabalho em grupo e compartilhar de
maneira privada o estado da instalação é usar a funcionalidade de
estado remoto,
que suporta várias opções de onde armazenar este estado, implementados por
diferentes backends.
Vamos então finalizar este tutorial com um exemplo de como configurar o
OpenTofu para armazenar o estado remotamente num bucket de S3 da Magalu Cloud,
utilizando o backend "s3".
Primeiro, vamos criar um bucket novo só para isso, num arquivo novo
state-bucket.ft:
state-bucket.tfresource "aws_s3_bucket" "state_bucket" {  bucket_prefix = "tutorial-state-bucket"}
tofu apply
Agora vamos exibir na tela o nome do bucket gerado para copiar e usar na
configuração do backend depois:
tofu state show aws_s3_bucket.state_bucket
Finalmente, de volta no main.tf adicionamos este bloco backend "s3" ao
bloco terraform:
main.tfterraform {  required_providers {    aws = {      source  = "hashicorp/aws"      version = "5.50.0"    }  }  backend "s3" {    bucket                      = "NOME_DO_SEU_BUCKET_DE_STATE_AQUI"    key                         = "the_state"    region                      = "br-ne1"    profile                     = "tutorial-tofu"    skip_region_validation      = true    skip_requesting_account_id  = true    skip_credentials_validation = true    skip_s3_checksum            = true  }}provider "aws" {  profile                     = "tutorial-tofu"  skip_region_validation      = true  skip_requesting_account_id  = true  skip_credentials_validation = true}
Para instalar o backend, execute:
tofu init
NotaNum cenário mais real, o bucket de state talvez não viveria no mesmo projeto,
ou teria alguma prevenção, como lifecycle { prevent_destroy = true  }, ou
seria criado manualmente. Eu criei junto aqui apenas para facilitar o tutorial.
(adaptado do post original em Egoísmo Duplicado)

---

Visão Geral
A Magalu Cloud é uma solução robusta de armazenamento de objetos que segue o protocolo S3, oferecendo uma alternativa confiável e escalável ao AWS S3. A compatibilidade com ferramentas populares do ecossistema S3 torna o Magalu Cloud uma opção atraente para empresas e desenvolvedores que buscam integrar seus fluxos de trabalho existentes a uma plataforma de armazenamento eficiente, de alto desempenho e com suporte local.
Este documento detalha as ferramentas compatíveis com a Magalu Cloud, focando em suas funcionalidades, compatibilidade e instruções de configuração.

Vantagens da Compatibilidade com Magalu Cloud​
A Magalu Cloud oferece inúmeras vantagens em termos de compatibilidade, especialmente para aqueles que já estão familiarizados com o ecossistema S3. Com suporte para ferramentas como AWS CLI e RClone, a transição para a Magalu Cloud é simples e rápida, mantendo a integridade dos fluxos de trabalho estabelecidos.

Fácil Migração: Suporte total a ferramentas que utilizam o protocolo S3, permitindo uma migração sem complicações para a Magalu Cloud.
Escalabilidade e Desempenho: Estrutura projetada para grandes volumes de dados e alta performance.
Suporte Completo a Funcionalidades Críticas: Operações como criação de buckets, gerenciamento de permissões, upload/download de objetos e versionamento são totalmente suportadas.


Funcionalidades Suportadas por Ferramentas​
As três principais ferramentas compatíveis com a Magalu Cloud – MGC CLI, AWS CLI e RClone – oferecem diversas funcionalidades para gerenciar buckets e objetos. Abaixo, uma comparação das principais capacidades e limitações de cada ferramenta.
Buckets​

Criar, Listar, Deletar, Conversão (público/privado), Versionamento:

Suportado em: MGC CLI ✅, AWS CLI ✅, RClone ✅


Permissionamento (ACL/Bucket Policy):

Suportado em: MGC CLI ✅, AWS CLI ✅
Limitado em: RClone ➀


URL Pública:

Suportado em: MGC CLI ✅
Não suportado: AWS CLI ❌, RClone ❌




Objetos​

Upload, Download, Deletar, Conversão (público/privado), Versionamento:

Suportado em: MGC CLI ✅, AWS CLI ✅, RClone ✅


Permissionamento(ACL):

Suportado em: MGC CLI ✅, AWS CLI ✅
Não suportado: RClone ❌


URL Pública:

Suportado em: MGC CLI ✅, AWS CLI ✅
Não suportado: RClone ❌


URL Presigned:

Suportado em: MGC CLI ✅, AWS CLI ✅, RClone ✅




Detalhes e Observações:​
➀ O RClone não suporta download e exclusão de versões de objetos.

Compatibilidade Ampliada com SDKs​
A Magalu Cloud também oferece compatibilidade com SDKs que utilizam o protocolo S3, possibilitando uma integração perfeita com diversas linguagens de programação. Isso permite que desenvolvedores utilizem bibliotecas populares, como o Boto3 para Python, para realizar operações em buckets e objetos hospedados na Magalu Cloud.
Conclusão​
A Magalu Cloud destaca-se pela compatibilidade com ferramentas e protocolos amplamente usados, como AWS CLI e RClone, além de oferecer suporte nativo ao protocolo S3. Essa compatibilidade garante uma migração suave e sem interrupções, permitindo que os usuários continuem utilizando suas ferramentas preferidas em um ambiente de armazenamento seguro e de alto desempenho. Magalu Cloud é a escolha ideal para quem busca escalabilidade, flexibilidade e integração perfeita com o ecossistema S3.

Links Úteis​
Para explorar mais ferramentas compatíveis e guias de configuração, confira os tutoriais abaixo:

MGC CLI
AWS CLI
Boto3
Rclone


---

MGC CLI
Magalu Cloud Command Line Interface​
O MGC CLI (Magalu Cloud Command Line Interface) é uma ferramenta que permite interagir diretamente com os serviços da Magalu Cloud (MGC) por meio da linha de comando. Compatível com macOS, Linux e Windows, a CLI oferece suporte para arquiteturas AMD64 e ARM, proporcionando flexibilidade em diversos ambientes.
Como Configurar a MGC CLI com API Keys​


Instalação: Siga as instruções na documentação oficial da MGC CLI.


Gerar API Keys: Siga as instruções para gerar API Keys.


Configuração da API Key:

Para definir seu par de chaves, edite o arquivo ~/.config/mgc/default/auth.yaml:

access_key_id: <access-key-id>secret_access_key: <secret-access-key>


Alterar Região Padrão:

Para verificar as regiões disponíveis, execute o seguinte comando:

mgc config get-schema region -o jsonpath=$.enum

Para definir a região execute o seguinte comando:

mgc config set --key region --value <region>

Edite o arquivo ~/.config/mgc/default/cli.yaml para definir a sua região:

region: <region>

Para usar uma região diferente da definida nas configurações, use a flag --region como o exemplo abaixo:

mgc object-storage bucket list --region <region>


notePor padrão a MGC-CLI usa a região br-se1

---

Standard

Por padrão, novos objetos são armazenados na classe de armazenamento "standard".
Esta classe é otimizada para acessos frequentes e é a opção padrão e mais
versátil para armazenamento de objetos em sistemas compatíveis com S3. Projetada
para oferecer alta performance e baixa latência, a classe Standard é ideal para
dados que exigem acesso rápido e constante.
Características Principais​

Desempenho Otimizado: Proporciona baixa latência e alto throughput, com tempos de resposta geralmente medidos em milissegundos.
Alta Durabilidade e Disponibilidade: Garante a integridade e a disponibilidade dos dados. Saiba mais
Escalabilidade: Suporta um número praticamente ilimitado de objetos de qualquer tamanho.
Compatibilidade com S3: Totalmente compatível com a API do Amazon S3,
facilitando a integração com aplicações e ferramentas existentes. Saiba mais

Preço​
Para informações sobre preços, consulte nossa página de Preços.
Exemplos de Caso de Uso​

Hospedagem de conteúdo web e aplicações
Distribuição de conteúdo e mídia
Armazenamento de dados para análise de big data
Backups e arquivos de acesso frequente
Armazenamento primário para aplicações nativas em nuvem

Não há taxa mínima de armazenamento nem compromisso de longo prazo, permitindo que
você pague apenas pelo que usar.

---

Cold Instant

Por padrão, novos objetos utilizam a classe de armazenamento "standard", que é
adequada para acessos frequentes. No entanto, para muitos casos, o acesso aos
objetos armazenados pode ser raro e o principal objetivo é garantir que eles
sejam mantidos por longos períodos, ainda que disponíveis para acesso rápido
quando necessário.
Exemplos: backups, logs, registros arquivados para cumprimento de legislações.
Para esses casos, nas regiões suportadas, está disponível a classe de armazenamento fria "cold_instant", que oferece um custo de armazenamento reduzido e um custo
de acesso mais elevado. Consulte a página de Preços
para comparar as diferentes classes de armazenamento.
noteNo momento, a única região que oferece suporte para a classe de armazenamento "cold_instant" é a região Sudeste 1 (br-se1).
Na Magalu Cloud, a classe de armazenamento é definida por objeto, permitindo que um
mesmo bucket contenha objetos de diferentes classes.
Upload de objeto com a classe de armazenamento "cold_instant"​
MGC-CLIAWS-CLIRCLONEPara carregar um novo arquivo com a classe de armazenamento fria, utilize o valor
"cold_instant" no argumento --storage-class:mgc object-storage objects upload ARQUIVO NOME_DO_BUCKET --storage-class=cold_instantNa AWS CLI, o nome da classe de armazenamento deve ser um dos disponíveis na AWS; cold_instant não é suportada. Para contornar essa limitação, use o nome GLACIER_IRaws s3 cp --storage-class=GLACIER_IR ARQUIVO s3://NOME_DO_BUCKETNa ferramenta RClone, o argumento é --s3-storage-class:rclone copyto --s3-storage-class="cold_instant" ARQUIVO NOME_DO_REMOTO:NOME_DO_BUCKET/NOME_DO_OBJETOSubstitua NOME_DO_REMOTO pelo nome do seu remote configurado no RClone,
NOME_DO_BUCKET pelo nome do bucket e NOME_DO_OBJETO pelo nome do arquivo dentro
desse bucket.
Modificar a classe de armazenamento de um objeto de "standard" para "cold_instant"​
MGC-CLIAWS-CLIRCLONEPara alterar a classe de armazenamento de um objeto via CLI, copie o objeto para o mesmo bucket com o parâmetro --storage-class=cold_instant:mgc object-storage objects copy NOME_DO_BUCKET/NOME_DO_OBJETO MESMO_NOME_DO_BUCKET/MESMO_NOME_DO_OBJETO --storage-class=cold_instantEste comando, se usado com um destino diferente da origem, faz uma cópia do objeto
original, que continuará existindo com a classe de armazenamento original.Para alterar a classe de armazenamento de um objeto via CLI, copie o objeto para o
mesmo bucket trocando o parâmetro --storage-class. Na AWS CLI, o nome da classe de
armazenamento deve ser um dos disponíveis na AWS; cold_instant não é suportada.
Utilize o nome GLACIER_IR.aws s3 cp --storage-class GLACIER_IR s3://NOME_DO_BUCKET/NOME_DO_OBJETO s3://MESMO_NOME_DO_BUCKET/MESMO_NOME_DO_OBJETOEste comando, se usado com um destino diferente da origem, faz uma cópia do objeto
original, que continuará existindo com a classe de armazenamento original.rclone settier "cold_instant" "NOME_DO_REMOTO:NOME_DO_BUCKET/NOME_DO_OBJETO"Substitua NOME_DO_REMOTO pelo nome do seu remote configurado no RClone,
NOME_DO_BUCKET pelo nome do bucket e NOME_DO_OBJETO pelo nome do arquivo dentro
desse bucket.

---

Visão Geral
As classes de armazenamento podem ser categorizadas em duas principais categorias: uma voltada para acesso
frequente e baixa latência, ideal para dados que precisam ser acessados regularmente e com rapidez. A
outra é projetada para dados que são acessados raramente, oferecendo custos de armazenamento mais baixos,
mas com maior latência para recuperação. A escolha entre essas classes depende da frequência de acesso e
do custo desejado para o armazenamento a longo prazo.


Standard: Esta classe é voltada para acesso frequente e baixa latência, ideal para dados que
precisam ser acessados regularmente e com rapidez. Saiba Mais


Cold-Storage: Projetada para dados que são acessados raramente, esta classe oferece custos de
armazenamento mais baixos, mas com maior latência para recuperação.Saiba Mais



---

Visão Geral
No gerenciamento de acesso a recursos em sistemas de armazenamento de objetos, existem três principais opções:
Buckets Públicos e Privados, ACL (Access Control List) e Bucket Policy. Cada um desses mecanismos tem
suas características e níveis de controle sobre quem pode acessar ou modificar os dados. A seguir, apresentamos uma
visão geral dessas opções e a ordem de prioridade entre elas.
1. Buckets Públicos e Privados​
A configuração de buckets como públicos ou privados é a forma mais básica de controle de acesso.


Buckets Públicos: Qualquer pessoa com acesso à URL poderá listar todos os objetos no bucket.


Buckets Privados: Apenas o proprietário do bucket e usuários autorizados terão acesso ao conteúdo do bucket.


2. ACL (Access Control List)​
As ACLs oferecem um controle mais granular em comparação com a simples configuração de buckets públicos ou privados. Com as ACLs, é possível definir permissões específicas para diferentes usuários ou grupos em nível de objeto ou bucket.

Vantagens:

Permite controlar quem pode ler, escrever ou excluir dados de maneira específica.
Ideal para cenários em que diferentes usuários precisam de diferentes níveis de acesso.



3. Bucket Policy​
As Bucket Policies fornecem um nível ainda mais abrangente de controle de acesso. Elas permitem definir regras
complexas de permissão que se aplicam a um bucket inteiro.

Vantagens:

Oferece flexibilidade e controle avançado, permitindo a criação de políticas específicas que atendem a
requisitos de segurança complexos.
Ideal para gerenciamento de acesso em larga escala em ambientes organizacionais.



Ordem de Grandeza​
A eficácia e a complexidade dos mecanismos de controle de acesso podem ser entendidas pela seguinte ordem de
grandeza:

Bucket Policy: Fornece o maior nível de controle e flexibilidade.
ACL: Oferece controle granular, mas com limita ções em comparação com as políticas de bucket.
Buckets Públicos e Privados: A abordagem mais simples, adequada para cenários menos complexos.

Considerações​
Ao gerenciar o acesso a dados em sistemas de armazenamento, é crucial entender as diferentes opções disponíveis e
suas implicações. A escolha entre usar buckets públicos/privados, ACLs ou Bucket Policies deve ser baseada nas
necessidades específicas de segurança e acesso da sua organização. A implementação correta desses mecanismos
garantirá a proteção e a integridade dos dados, além de facilitar a conformidade com regulamentações e políticas de
segurança.

---

Armazenamento e Entrega de Conteúdo de Mídia
Empresas de entretenimento, mídia e publicidade estão utilizando o produto de Object
Storage para armazenar e gerenciar grandes volumes de mídia digital, como vídeos, imagens e
arquivos de áudio. Com sua escalabilidade ilimitada e alto desempenho, a solução oferece
uma plataforma robusta para hospedar e distribuir conteúdo digital de maneira eficiente e
econômica.
Passos para Utilização Eficiente:​


Acessar a CLI da Magalu Cloud


Criar um Bucket no Object
Storage da Magalu Cloud


Fazer upload dos arquivos de
mídia ou sincronizar um diretório


Configurar permissão de acesso do bucket
ou definir uma lista de acesso para
usuários específicos


Definir a lista de acessos dos objetos
para que possam ficar visíveis ao público desejado


Copiar a URL dos seus
objetos


Compartilhar e/ou fazer referência aos seus Arquivos de Mídia colando a URL dos seus
objetos



---

Compartilhar Gravações de Tela
Gravar a tela é uma necessidade tão comum que muitos sistemas operacionais incluem
atalhos e ferramentas para isto por padrão. Quando esta necessidade surge, normalmente
não é apenas para guardarmos um registro localmente, mas sim para demonstrar algo para outras pessoas.
Isto leva a um segundo trabalho após terminada a captura: o de fazer o upload para algum
lugar e depois compartilhar o endereço de onde o vídeo foi armazenado.
Este é um tutorial sobre a ferramenta livre e multiplataforma
Clipshare, que junta estas duas
funcionalidades: grava e já sobe para a nuvem.
Download​
O executável do Clipshare pode ser baixado na página de
Releases. Aqui o link para a versão
1.0.0: https://github.com/goshops-com/clipshare/releases/tag/v1.0.0
A seção "Assets" contém os links para as diferentes plataformas (Windows, Mac, Linux).
Configuração inicial​
Esta ferramenta funciona com qualquer provedor de armazenamento em nuvem que ofereça uma
API compatível com S3, o Object Storage da Magalu Cloud é um deles.
Para este exemplo eu antes
criei um "bucket"
de nome fcz-clipshare-demo-2024 na região Nordeste 1 (br-ne1).
Linux/MacWindowsHavendo um bucket para onde as gravações serão guardadas, o próximo passo é criar um
arquivo de texto de nome .env com o seguinte conteúdo:ACCESS_KEY=MINHA_ACCESS_KEY_AQUIACCESS_SECRET=MINHA_ACCESS_SECRET_AQUIENDPOINT=https://br-ne1.magaluobjects.com/REGION=br-ne1BUCKET_NAME=fcz-clipshare-demo-2024ACL=privatePRESIGN_URL=truePRESIGN_URL_EXPIRY=86400ImportanteTroque os valores de ACCESS_KEY, ACCESS_SECRET e BUCKET_NAME para os da sua conta.NotaNeste exemplo de configuração acima, eu escolhi subir os vídeos para um bucket privado
(ACL=private), porém disponibilizando links de acesso temporários (PRESIGN_URL=true)
válidos pelo tempo de 1 dia (PRESIGN_URL_EXPIRY=86400 segundos). Uma descrição mais
detalhada de cada opção pode ser encontrada na
página do projeto.Havendo um bucket para onde as gravações serão guardadas, o próximo passo é criar um
arquivo de texto de nome .env com o seguinte conteúdo:ACCESS_KEY=MINHA_ACCESS_KEY_AQUIACCESS_SECRET=MINHA_ACCESS_SECRET_AQUIENDPOINT=https://br-ne1.magaluobjects.com/REGION=br-ne1BUCKET_NAME=fcz-clipshare-demo-2024ACL=privatePRESIGN_URL=truePRESIGN_URL_EXPIRY=86400ImportanteTroque os valores de ACCESS_KEY, ACCESS_SECRET e BUCKET_NAME para os da sua conta.NotaNeste exemplo de configuração acima, eu escolhi subir os vídeos para um bucket
privado
(ACL=private), porém disponibilizando links de acesso temporários
(PRESIGN_URL=true)
válidos pelo tempo de 1 dia (PRESIGN_URL_EXPIRY=86400 segundos). Uma descrição mais
detalhada de cada opção pode ser encontrada na
página do projeto.Crie um arquivo.bat com o seguinte conteúdo:@echo offsetlocal enabledelayedexpansion:: Muda para o diretório onde o .bat está localizadocd /d %~dp0:: Carrega variáveis do .envfor /f "usebackq tokens=1* delims==" %%a in (".env") do (	    set %%a=%%b):: Executa o clipshare.exe.\clipshare.exeImportanteO arquivo executável, o .env e o .bat necessitam estar na mesma pasta.
Rodando o programa​
Linux/MacWindowsPara lançar o programa, no Linux, utilizando as variáveis de ambiente do arquivo .env
utilize o seguinte comando:env $(cat .env | xargs) ~/Downloads/clipshare-1.0.0.AppImageNotaSubstituindo ~/Downloads/clipshare-1.0.0.AppImage pela localização do seu executável do Clipshare.Execute o arquivo .bat criado na seção anterior.
Se tudo der certo um novo ícone na barra de tarefas do computador vai aparecer,
clicando nele você tem acesso as opções de escolher o microfone e camera caso
precise, e iniciar/parar a gravação.
NotaAtente-se que para o clipshare conseguir utilizar a sua câmera, ela não pode estar
em uso em nenhum outro aplicativo ao mesmo tempo, exemplo: Google Meet // Microsoft
Teams.
Ao fim da gravação, o vídeo será enviado para o bucket e um navegador vai abrir o
endereço temporário do vídeo, dali basta copiar este endereço da barra de
localização e compartilhar.
Depois de compartilhado​
Os vídeos gerados ficam no seu bucket até segunda ordem, mesmo que o link
temporário de acesso tenha expirado. Isto pode ser útil caso você precise fazer o
download de algum deles no futuro, mover para outras hospedagens, ou trocar de
classe de armazenamento para economizar dinheiro. Esta ferramenta simples não cuida
de nenhum processo de limpeza regular, tenha isto em mente.
Caso precise remover um bucket junto com todos os seus objetos, siga
este documento.
Caso prefira só mudar a classe de armazenamento dos videos já compartilhados depois
que foram vistos, siga este outro documento.
(adaptado do post original em Egoísmo Duplicado)

---

Backups e Arquivamento de Dados
Empresas de diferentes setores utilizam Object Storage da Magalu Cloud para
realizar backup de dados de forma segura e confiável. Seja para proteger
informações vitais de negócios ou para garantir conformidade com regulamentações, a
solução oferece uma maneira eficiente de preservar e recuperar dados essenciais em
caso de perda ou corrupção.
Backup Manual​
Siga o passo a passo abaixo para realizar backup dos seus dados. Para auxiliar em
cada etapa, utilize os documentos de apoio linkados para obter instruções
detalhadas sobre como realizar cada ação.

Acessar a CLI da Magalu Cloud
Criar um bucket no
Object Storage da Magalu Cloud
Sincronizar o diretório local
com o bucket do Object Storage

Backup Automatizado​
Para automatizar o processo de backup, siga as etapas abaixo:

Acessar a CLI da Magalu Cloud
Criar um bucket no
Object Storage da Magalu Cloud
Criar um script de backup usando um editor de texto da sua preferência

WindowsLinux ou MacOS
Em um editor de texto, como Nano ou o Vim, escreva o seguinte script:
@echo offrem Configure suas credenciais da AWSaws configurerem Defina o diretório local que deseja fazer backupset LOCAL_DIRECTORY=C:\caminho\para\diretorio\localrem Defina o nome do bucket S3 onde deseja armazenar os backupsset S3_BUCKET_NAME=nome-do-seu-bucket-s3rem Execute o comando de sincronização para fazer o backup dos arquivosmgc object-storage objects sync %LOCAL_DIRECTORY%  %S3_BUCKET_NAME%rem Exiba uma mensagem de conclusãoecho Backup concluído com sucesso!pause

Salve o script em um local seguro.


Clique em “Arquivo“>“Salvar Como“


Atribua um nome descritivo, como por exemplo, “my-backup.bat“


No campo “Salvar como tipo“, escolha “Todos os arquivos (.)“


Clique em Salvar




Execute o script

Após salvar o script, você pode executá-lo clicando duas vezes no arquivo
my-backup.bat. Isso iniciará o processo de backup conforme definido no script.


infoCertifique-se de substituir C:\caminho\para\diretorio\local pelo caminho do
diretório local que você deseja fazer backup e nome-do-seu-bucket-s3 pelo nome
do seu bucket do Object Storage.
Em um editor de texto, como Nano ou o Vim, escreva o seguinte script:
    #!/bin/bash    # Defina o diretório local que deseja fazer backup    LOCAL_DIRECTORY=/caminho/para/diretorio/local    # Defina o nome do bucket S3 onde deseja armazenar os backups    S3_BUCKET_NAME=nome-do-seu-bucket-s3    # Execute o comando de sincronização para fazer o backup dos arquivos    mgc object-storage objects sync $LOCAL_DIRECTORY  $S3_BUCKET_NAME    # Exiba uma mensagem de conclusão    echo "Backup concluído com sucesso!"

Salve o script com um nome descritivo, por exemplo, my-backup.sh


Conceda a permissão de execução usando o comando chmod no terminal:

chmod +x my-backup.sh
Execute o script digitando o seguinte comando no terminal:
./my-backup.shinfoCertifique-se de substituir C:\caminho\para\diretorio\local pelo caminho do diretório local que você deseja fazer backup e nome-do-seu-bucket-s3 pelo nome do seu bucket do Object Storage.


Utilizar ferramentas como agendador de tarefas para que o script seja executado periodicamente, conforme necessário

WindowsLinux ou MacOSPara agendar a execução do script de backup em intervalos regulares no Windows, você pode usar o Agendador de Tarefas.

Abrir o Agendador de Tarefas: Pressione Win + R para abrir a caixa de diálogo Executar, digite taskschd.msc e pressione Enter. Isso abrirá o Agendador de Tarefas do Windows.


Criar uma Nova Tarefa: No painel direito do Agendador de Tarefas, clique em "Criar Tarefa..." para abrir o assistente de criação de tarefas.


Configurar os Detalhes da Tarefa:

Na guia Geral, dê um nome para a tarefa e, opcionalmente, uma descrição.
Na guia Desencadeadores, clique em "Novo..." para criar um novo desencadeador.
Escolha a frequência e os horários nos quais deseja que o backup seja executado.
Na guia Ações, clique em "Novo..." e selecione "Iniciar um programa". Navegue
até o local do seu script de backup e selecione-o.
Na guia Condições e Configurações, configure quaisquer condições adicionais ou
configurações específicas conforme necessário.



Configurar as Opções de Segurança (Opcional):

Se o script de backup exigir privilégios elevados para ser executado, você
pode precisar configurar as opções de segurança na guia Geral. Selecione a opção
"Executar com as permissões mais altas" para garantir que a tarefa seja
executada com privilégios elevados.



Concluir e Salvar: Depois de configurar todos os detalhes da tarefa, clique
em "OK" para salvá-la.

Para agendar a execução do script de backup em intervalos regulares no Linux, você
pode usar o Cron, que é um utilitário de agendamento de tarefas integrado ao
sistema operacional.
Editar o Cron para isso execute o seguinte comando:
crontab -e
Configure o agendamento. Adicione uma nova linha ao arquivo Cron para
especificar o agendamento do seu script de backup. A estrutura da linha é a
seguinte:
* * * * * /caminho/para/seu/script/my-backup.shOs cinco asteriscos representam, na ordem, minutos, horas, dia do mês, mês e dia da semana. Você pode configurar esses valores conforme necessário para atender aos seus requisitos de agendamento. Por exemplo, para agendar o backup diariamente às 3 da manhã, você pode usar:0 3 * * * /caminho/para/seu/script/my-backup.shinfoCertifique-se de substituir /caminho/para/seu/script pelo caminho do script salvo no passo anterior.


Verifique se a execução e agendamento do backup está funcional através da
listagem dos bucketse
objetos direcionados no
script.


---

Estrutura de Preços
A estrutura de preços do Object Storage é baseada no modelo de cobrança por uso
(pay-as-you-go). Este modelo proporciona flexibilidade e transparência, permitindo que
você pague apenas pelo que utilizar, seja em termos de armazenamento de dados ou
transferência de objetos.
Armazenamento de Dados​
O custo do armazenamento de dados é calculado com base na quantidade de dados armazenados
em nossos servidores. A cobrança é feita por gigabyte (GB) de armazenamento por mês.
Transferência de Objetos​

Transferência de Dados Outbound (Saída): Cobramos pela transferência de dados para
fora do nosso serviço de armazenamento, incluindo transferências entre diferentes regiões
e para a internet. A taxa é calculada com base na quantidade de dados transferidos, medida
em gigabytes (GB).
Transferência de Dados Inbound (Entrada): A transferência de dados para dentro do
serviço de armazenamento não é cobrada.

Tabela de Preços​
RegiãoCategoriaPreço PadrãoPreço Armazenamento FrioSudeste 1Armazenamento de DadosR$ 0,10 por GB/mês1R$ 0,06 por GB/mês1Sudeste 1Transferência de Dados Inbound (Entrada)GratuitoR$ 0,01 por GBSudeste 1Transferência de Dados Outbound (Saída)R$ 0,13 por GBR$ 0,22 por GBNordeste 1Armazenamento de DadosR$ 0,10 por GB/mês1Não disponívelNordeste 1Transferência de Dados Inbound (Entrada)GratuitoNão disponívelNordeste 1Transferência de Dados Outbound (Saída)R$ 0,13 por GBNão disponível
1 O armazenamento de dados é cobrado por hora. O preço apresentado é uma
estimativa mensal, calculada com base na média de horas no mês (730 horas).
Os preços mencionados incluem todos os impostos obrigatórios e estão sujeitos a
alterações. Quaisquer ajustes serão comunicados com antecedência.
Exemplo de Cálculo de Custos​
Suponha que você armazene 500 GB de dados no Object Storage por um mês e transfira 100 GB
de dados para fora do serviço de armazenamento. O cálculo do custo seria:

Armazenamento de Dados: R$ 0,10 por GB/mês × 500 GB = R$ 50,00
Transferência de Dados Outbound (Saída): R$ 0,13 por GB × 100 GB = R$ 13,00

Total: R$ 50,00 + R$ 13,00 = R$ 63,00
Para garantir total transparência sobre seus custos e controle sobre seus recursos, você
pode monitorar seus gastos através da página de Faturamento do Console da Magalu Cloud.
Nesta página, você terá acesso detalhado às informações sobre o uso de armazenamento e
transferência do Object Storage.

---

Segurança
A segurança e a criptografia são fundamentais para qualquer solução de armazenamento
digital. No Magalu Object Storage, implementamos várias camadas de proteção para assegurar
que seus dados estejam seguros:
Criptografia em Repouso (At Rest)​
Utilizamos criptografia em repouso para todos os dados armazenados. Isso é realizado
através de discos criptografados utilizando Full Disk Encryption (FDE) com LUKS2.
Esta abordagem garante que seus dados estejam protegidos contra acessos não autorizados,
mesmo que os discos sejam fisicamente comprometidos.
Criptografia em Trânsito​
Para proteger os dados durante a transferência entre componentes do cluster, utilizamos o
protocolo TLS (Transport Layer Security) na versão 1.2 ou superior. Este protocolo
assegura que as comunicações são seguras, protegendo contra interceptações e ataques
man-in-the-middle.
Suporte a Criptografia do Lado do Servidor (SSE)​
Atualmente, o Magalu Object Storage não suporta Server-Side Encryption (SSE) com
certificados sob a custódia do cliente. No entanto, reconhecemos a importância desta
funcionalidade e estamos trabalhando para integrá-la em versões futuras do produto.
Recomendações de Segurança Adicional​
Enquanto o suporte a SSE não está disponível, recomendamos que nossos clientes implementem
criptografia do lado do cliente para garantir uma camada adicional de segurança. Uma
solução eficaz para isso é o uso do Restic, uma ferramenta de backup que facilita a
criptografia dos dados antes do envio para o armazenamento. Detalhes sobre como configurar
e utilizar o Restic podem ser encontrados no tutorial detalhado aqui.
Práticas de Segurança Recomendadas​
Além da criptografia, sugerimos adotar as seguintes práticas de segurança:


Gestão de Acesso: Utilize políticas de controle de acesso, ACL e políticas de bucket
rigorosas para limitar quem pode acessar e gerenciar os dados.


Monitoramento e Auditoria: Implemente soluções de monitoramento para detectar
atividades suspeitas e auditar acessos aos dados.


Backups Automatizados: Automatize backups de dados sensíveis para evitar perda de
dados. O uso de ferramentas compatíveis com S3 pode ajudar a prevenir problemas
relacionados à perda de dados. Recomendamos verificar o tutorial sobre backups.


Estamos comprometidos em fornecer uma solução de armazenamento segura e confiável e
continuamos a aprimorar nossos recursos de segurança para atender às necessidades dos
nossos clientes. Para mais informações e suporte, entre em contato com nossa equipe de
atendimento ao cliente.

---

Limitações do Produto
O Object Storage da Magalu Cloud possui algumas limitações e características importantes
que devem ser consideradas ao utilizar o serviço. A seguir, estão descritas as principais
restrições e detalhes:


Gerenciamento de Objetos: Atualmente, o gerenciamento de objetos é realizado
exclusivamente por meio da linha de comando (CLI) e ferramentas compatíveis com o
protocolo S3, como o RClone GUI. O gerenciamento de objetos não está disponível
diretamente no Console da Magalu Cloud.


Modelo de Multi-Part: Para objetos com tamanho superior a 8 MB, é utilizado
automaticamente o modelo de upload e download em múltiplas partes (multi-part). No
entanto, cada objeto pode ser dividido em no máximo 10.000 partes.


Limite de Buckets por Conta: Cada conta de usuário tem um limite máximo de 100
buckets. Esta restrição é implementada para garantir a organização e a estrutura adequada
dos dados armazenados. Caso seja necessário aumentar este limite, entre em contato com o
suporte da Magalu Cloud.


Tamanho Máximo de Objeto: O tamanho máximo permitido para um único objeto é de 5
terabytes (TB). Objetos que excedam esse tamanho não podem ser armazenados no Object
Storage.


Consistência Eventual: O Object Storage oferece consistência eventual para operações
de leitura. Isso significa que alterações realizadas em um objeto podem levar algum tempo
para se propagar e serem refletidas em todas as operações de leitura.


Consistência em Operações de Gravação: Para novos objetos e operações de gravação, o
Object Storage garante forte consistência em nível de objeto dentro de uma mesma região.
No entanto, a consistência entre regiões diferentes é eventual.


Limites de Taxas de Requisição: Existem limites nas taxas de requisição para
operações como GET, PUT, LIST e DELETE. Esses limites podem variar conforme o tipo de
conta e a região.


Limites Práticos de Buckets: Embora não haja um limite específico para o tamanho
total de um bucket, existem limites práticos impostos pela escalabilidade do serviço.
Buckets com um grande número de objetos ou solicitações simultâneas podem enfrentar
limitações de desempenho.


Compatibilidade com Ferramentas Terceiras: O produto pode não ser compatível com
todas as funcionalidades de ferramentas terceiras que possuem alterações ou
funcionalidades distintas das oferecidas pelo S3. Para garantir uma integração adequada,
consulte a seção Ferramentas Compatíveis,
que lista clientes com compatibilidade validada. Se desejar utilizar uma ferramenta não
listada, entre em contato conosco para análise e testes de compatibilidade adicionais


Estas limitações ajudam a garantir a performance e a integridade do serviço. Para mais
informações ou esclarecimentos, entre em contato com o suporte da Magalu Cloud.

---

Glossário
ACL​
Lista de controle de acesso que permite definir permissões para quem pode acessar um bucket ou objeto. Com ACLs, é possível restringir ou conceder acesso a usuários e serviços conforme necessário.
Bucket​
Contêiner utilizado para armazenar objetos (dados). Ele serve como um repositório que organiza e gerencia arquivos e dados na nuvem.
Client S3​
Client que oferece acesso ao serviço de armazenamento da MagaluCloud. Ele pode ser utilizado através de SDKs disponíveis para diferentes linguagens de programação, incluindo Java, Python e .NET.
Multi-Part Upload / Download​
Técnica que divide um objeto de grande tamanho em várias partes menores para realizar o upload ou download. Isso possibilita o envio ou recebimento paralelo ou sequencial das partes, permitindo maior controle e reduzindo a necessidade de retransmissão completa em caso de falhas. O usuário pode se concentrar em corrigir apenas as partes com inconsistências.
Objeto​
Qualquer arquivo ou diretório armazenado dentro de um bucket. Isso pode incluir imagens, músicas, vídeos, arquivos de texto, entre outros tipos de dados.
Pre-signed URL​
URL temporária que permite o compartilhamento de arquivos armazenados em um bucket por um período determinado. Ela é útil para fornecer acesso temporário a arquivos sem expor diretamente as credenciais.
S3​
Protocolo de comunicação utilizado para interagir com o armazenamento de objetos. Ele permite operações como leitura, escrita, modificação e exclusão de objetos e buckets no armazenamento.

---

Problemas com Upload de ObjetosLentidão em Upload de Muitos Arquivos​

Sintoma

Lentidão em upload de muitos arquivos.

Causa

Cada upload de arquivo envolve uma requisição HTTP separada ao S3. Muitas requisições
pequenas podem aumentar o overhead de rede e latência.

Solução

Recomendamos paralelizar o upload de arquivos para diminuir o tempo de processamento.
MGC-CLIAWS-CLIRCLONEA MGC-CLI Utiliza o parâmetro --workers para definir o número de threads paralelas.mgc object-storage objects sync --local=/local/path --bucket=path --workers 32A AWS-CLI Permite ajustar a configuração max_concurrent_requests no arquivo de
configuração para aumentar o número de requisições simultâneas.Configurando max_concurrent_requests via Arquivo de Configuração
A configuração max_concurrent_requests pode ser definida no arquivo de
configuração do AWS CLI (~/.aws/config). Aqui está como você pode configurá-lo:
Abra ou crie o arquivo de configuração:
nano ~/.aws/config
Adicione ou modifique a configuração:
[profile your-profile]s3 =  max_concurrent_requests = 32
Rode o comando sync:
aws s3 sync /local/path s3://bucket-nameSubstitua your-profile pelo nome do perfil AWS que você está usando. Se você não estiver usando perfis,
pode usar a seção [default].O RCLONE Usa o parâmetro --transfers para controlar o número de transferências simultâneas.rclone copy /local/path remote:path --transfers=32
ImportanteRecomendamos ajustar esses parâmetros de acordo com a capacidade do seu hardware para encontrar o equilíbrio
ideal entre a velocidade de upload e o uso de CPU e RAM. Teste diferentes configurações para otimizar o
desempenho conforme suas necessidades.
Se surgir alguma dúvida ou se precisar de assistência adicional, nossa equipe de suporte está à disposição.
Abra um chamado de suporte para obter ajuda.

---

Problemas com Exclusão de BucketsDeleção de Bucket Demorando Mais que o Esperado​

Sintoma

A exclusão de um bucket com um grande volume de objetos está demorando mais do que o esperado.

Causa

A operação pode estar sendo executada com baixo grau de paralelismo, resultando em um tempo de processamento mais longo.

Solução

Recomenda-se a implementação de um processo de exclusão com maior grau de paralelismo, com o objetivo de otimizar o tempo de processamento.
warningO uso de parâmetros como --workers, max_concurrent-requests e --transfers deve ser feito com
cautela. Valores muito altos podem ocasionar erros ou sobrecarga do sistema. Ajuste esses valores
gradualmente e monitore o desempenho para encontrar a configuração ideal para o seu caso.
MGC-CLIAWS-CLIRCLONEA MGC-CLI utiliza a flag --workers para definir o número de threads paralelas.Por padrão a MGC-CLI utiliza o valor de workers em 4, para aumentar o nivel de paralelismo
considere incrementar conforme o exemplo abaixo:mgc object-storage buckets delete bucket-name --recursive --workers 16noteLembrando que esse comando não deleta as versões do bucket versionado. Para isso, veja
este documento.A AWS-CLI permite ajustar a configuração max_concurrent_requests no arquivo de configuração para aumentar
o número de requisições simultâneas.A configuração max_concurrent_requests pode ser definida no arquivo de configuração do AWS CLI
(~/.aws/config). Aqui está como você pode configurá-lo:
Abra ou crie o arquivo de configuração:
nano ~/.aws/config
Adicione ou modifique a configuração:
[profile your-profile]s3 =  max_concurrent_requests = 16
Rode o comando rb com a flag --force para deletar todos os objetos do bucket:
aws s3 rb s3://bucket-name --forceSubstitua your-profile pelo nome do perfil AWS que você está usando. Se você não estiver usando
perfis, pode usar a seção [default].noteLembrando que esse comando não deleta as versões do bucket versionado. Para isso, veja
este documento.Por padrão a RCLONE utiliza o valor de transfers em 4, para aumentar o nivel de paralelismo
considere incrementar conforme o exemplo abaixo:O RCLONE usa a flag --transfers para controlar o número de transferências simultâneas.rclone purge remote:path --transfers 16noteEste comando deleta todo o bucket e seus objetos, incluindo versões.
ImportanteRecomendamos ajustar esses parâmetros de acordo com a capacidade do seu hardware para encontrar o equilíbrio
ideal entre a velocidade de upload e o uso de CPU e RAM. Teste diferentes configurações para otimizar o
desempenho conforme suas necessidades.
Se ainda tiver alguma dúvida, não deixe de abrir um
chamado de suporte.

Erro de Bucket not empty​

Sintoma

Você pode encontrar o erro The bucket you tried to delete is not empty ou Error: the bucket contains multiple versions of objects.
ao tentar deletar um bucket e seus objetos.

Causa

A operação de exclusão recursiva não remove versões antigas dos objetos, apenas a versão atual.

Solução

Para prosseguir com a exclusão do bucket, será necessário apagar todas as versões antigas dos objetos.
Siga as instruções neste documento para realizar essa tarefa.
Se ainda tiver alguma dúvida, não deixe de abrir um
chamado de suporte.

---

Problemas com PermissionamentoObjetos não Ficaram Públicos​

Sintoma

Mesmo após configurar o bucket como "público" ou como "privado", os objetos não se comportam no mesmo estado que o bucket.


Causa

A configuração a respeito de "público" ou "privado" diz respeito ao bucket, mas as regras não são aplicáveis de forma recursiva, ou seja, não são transmitidas para os objetos contidos no bucket.

Solução

Para aplicar regras de acesso aos objetos, utilize a ACL para Objetos.
Que está referenciada no how-to: Configuração da Lista de Controle de Acesso (ACL) de um Objeto.
Alterar a Permissão de um Bucket não Funciona​

Sintoma

Alterar a permissão de um bucket de privado para público ou vice-versa não funciona.
Falha com um erro de acesso negado, ou diz que mudou porém o bucket continua aparecendo como
privado no console.

item do menu

exemplo de erro no console

exemplo de sucesso falso

bucket ainda privado
NotaNa listagem do console, um bucket com qualquer política continuará sendo listado como "privado"

Causa

O bucket em questão pode ter uma política (bucket policy) a ele associada. E regras da política
possuem maior precedência do que as de ACL. Bucket policy permite a construção de regras de acesso
mais específicas que um simples status de "público" ou "privado" e estas regras mais específicas
sempre sobrescrevem este status simples.

Solução

Existem duas soluções possíveis: remover a política do bucket ou incluir uma regra
na política que permita a leitura dos objects por qualquer usuário (Principal).

Remover a política do bucket

AWS-CLIÉ possível deletar uma política de bucket via terminal utilizando a ferramenta
aws-cli da Amazon:aws --profile "SEU_PROFILE" s3api delete-bucket-policy --bucket "NOME_DO_BUCKET"NotaSubstitua SEU_PROFILE e NOME_DO_BUCKET pelo nome do seu perfil e o nome do seu bucket.


Incluir acesso de leitura a todos nas políticas do bucket
Abaixo um exemplo de "Statement" a ser adicionado a uma política existente para tornar todos os
objetos de um bucket publicamente acessíveis:


    "Statement": [        {            "Effect": "Allow",            "Principal": "*",            "Action": [                "s3:ListBucket",                "s3:GetObject"            ],            "Resource": [                "nome-do-bucket",                "nome-do-bucket/*"            ]        },        {          ...        }    ]
NotaSubstitua nome-do-bucket pelo nome do bucket.

---

Problemas com Nomenclaturas de BucketsErro de Nomenclatura na Criação de Bucket​

Sintoma

Ao criar um bucket, é necessário definir a sua nomenclatura. Esse processo tem regras que precisam ser seguidas, e, caso descumpridas, retornará algum dos erros listados abaixo:

Causa


Nome do bucket muito curto:


O nome do bucket deve ter entre 3 e 63 caracteres.

Nome do bucket contém hífen no início ou no final:



O hífen pode ser utilizado na nomenclatura do seu bucket, mas não é permitido utilizá-lo no início ou no final do nome.

Nome do bucket já está em uso:


O nome do bucket deve ser único. Não é permitido criar dois buckets com o mesmo nome.

Exemplo de Nomenclatura Correta

Segue abaixo um exemplo de nomenclatura que atende a todas as regras necessárias para a criação do bucket:


Solução

Para um melhor entendimento sobre a nomenclatura de buckets e boas práticas, consulte a nossa documentação sobre Regras de Nomes de Buckets. Ela está referenciada em: Regras de Nomes de Buckets.

---

Problemas com a ferramenta VeleroPlugin velero-plugin-for-aws não consegue fazer o backup​

Sintoma

Após configurar o Velero para utilizar os endpoints de Object Storage da
Magalu Cloud com o plugin velero-plugin-for-aws
o backup falha com um status code 501 e uma mensagem de operation error S3: PutObject, https response error StatusCode: 501
... api error NotImplemented: Transfering payloads in multiple chunks using aws-chunked is not supported.

Causa

A API S3 do Object Storage da Magalu Cloud não suporta a funcionalidade de transferencias "aws-chunked".

Solução

Incluir na configuração do plugin, na parte de Backup Storage Location, o atributo checksumAlgorithm: ""
Uma string vazia neste atributo indica que nenhum valor de checksum será calculado e enviado nos headers
das requisições, o que contorna a limitação mencionada acima.
noteOutro atributo importante para a compatibilidade com MagaluCloud é utilizar s3ForcePathStyle: true
Abaixo um exemplo de configuração utilizando este atributo e um bucket da região Sudeste 1 (br-se):
configuration:  restoreOnlyMode: false  backupStorageLocation:  - name: backup-cluster-meu-cluster    provider: aws    bucket: backup-cluster-meu-bucket-123456789    default: true    accessMode: ReadWrite    credential:      name: velero-bucket      key: mgc    config:      s3ForcePathStyle: true      s3Url: https://br-se1.magaluobjects.com      checksumAlgorithm: ""

---

Visão Geral do Block Storage da Magalu Cloud
Este documento oferece uma visão geral abrangente do produto de Block Storage oferecido pela Magalu Cloud. O Block Storage é um serviço de armazenamento em nuvem altamente perfomático, flexível e escalável, projetado para atender às diversas necessidades de armazenamento de empresas de todos os tamanhos e setores.
Funcionamento​
O Block Storage da Magalu Cloud funciona através de uma infraestrutura avançada de armazenamento NVMe (Non-Volatile Memory Express), que proporciona alta performance e baixa latência. Cada volume de armazenamento é projetado para oferecer desempenho consistente, suportando cargas de trabalho intensivas e garantindo que suas aplicações funcionem de maneira eficiente. Os volumes de armazenamento podem ser ajustados para diferentes níveis de IOPS (Input/Output Operations Per Second), permitindo que você escolha a performance que melhor se adequa às suas necessidades específicas.
Alta Performance com NVMe​
Todos os volumes de Block Storage são baseados em NVMe, garantindo alta velocidade de leitura e escrita, essencial para aplicações que demandam rápida resposta e processamento intensivo de dados.
Diversas Ofertas de IOPS​
Você pode escolher entre diferentes tipos de IOPS para seus volumes de armazenamento, garantindo que cada aplicação tenha o nível de performance adequado às suas necessidades, desde aplicações básicas até aquelas que exigem alto desempenho.
Redimensionamento Flexível​
Nosso Block Storage permite o redimensionamento dos volumes de armazenamento conforme necessário, oferecendo flexibilidade para aumentar ou diminuir a capacidade e também alterar o tipo de volume variando a quantidade de IOPS de acordo com o crescimento e as demandas das suas aplicações.
O serviço de Block Storage pode ser resumido nas seguintes etapas:


Crie seu Volume: Provisione e configure seu volume de armazenamento conforme suas necessidades de capacidade e performance.


Anexe à sua VM: Conecte o volume de armazenamento à sua máquina virtual (VM) para começar a utilizá-lo.


Gerencie seu Volume: Utilize o Console e a CLI para redimensionar volumes, alterar tipo de volumes, criar snapshots e configurar backups. A gestão simplificada permite que você mantenha o controle total sobre seus recursos de armazenamento.



---

Listar volumes

Para listar todos os volumes execute o comando abaixo:
🖥️ Console>_ CLIPor Block Storage​👣 Inicio > Menu > Block StorageAo seguir o caminho acima, serão listadas todos os volumes criados.Por Virtual Machines​Também é possível listar todos os volumes anexados a uma determinada instância. Para isso acesse o Detalhes de Instância através do produto de Virtual Machines.👣 Inicio > Menu > Virtual Machines > Detalhes de Instância > Volumesmgc block-storage volumes list

---

Listar tipos de volumes

Atualmente oferecemos 5 tipos de volumes, são eles:

NVMe com 1.000 IOPS (cloud_nvme)
NVMe com 5.000 IOPS (cloud_nvme5k)
NVMe com 10.000 IOPS (cloud_nvme10k)
NVMe com 15.000 IOPS (cloud_nvme_15k)
NVMe com 20.000 IOPS (cloud_nvme20k)

Para listar os tipos de volumes disponíveis, execute o comando abaixo:
🖥️ Console>_ CLI👣 *Inicio > Menu > Block Storage
Clique em "Criar volumes";
A lista de tipos de volumes  aparecerá no tópico "Escolha um tipo de volume"
mgc block-storage volume-types list

---

Listar os snapshots de volumes

Para listar as imagens execute o comando abaixo:
🖥️ Console>_ CLI👣*Inicio > Menu > Block Storage > Meus snapshots *Ao seguir o caminho acima, serão listados todos os snapshots disponíveis.MGC-CLI​mgc block-storage snapshots list

---

Criar um snapshot de volume

Para criar um snapshot do volume execute o comando abaixo:
🖥️ Console>_ CLI
Ao final do grid de listagem de Volumes clicar no ícone 
No menu, clicar em Criar snapshot
Escolha um nome para o snapshot e clique em criar snapshot
MGC-CLI​mgc block-storage snapshots create --name "block-snapshot"  --volume.id "0e2dc76-1215-47a7-9fc3-a5b45d5dbedc"

---

Dicas de flags no CLI
Limit​
É possível o uso de  --control.limit  para controlar a quantidade de resultados que serão impressos:
mgc virtual-machine machine-types list --control.limit 10
Offset​
É possível o uso de  --control.offset  para controlar o offset de resultados que serão impressos:
mgc virtual-machine machine-types list --control.offset 10
Sort​
É possível o uso de  --control.sort  para controlar a ordenação dos resultados que serão impressos:
mgc virtual-machine machine-types list --control.sort name:asc,end_standard_support_at:desc

---

Regras de nomeação de volumes
Este documento define as diretrizes para nomeação de volumes para o produto de block storage na Magalu Cloud. Essas regras visam garantir consistência, organização e segurança em nossos serviços.
Regras de nomeação​

O nome do volume deve ser único na mesma região
O nome do volume deve conter entre 3 e 50 caracteres.
Os nome do volume deve ser compostos apenas por letras minúsculas, números, hífens (-) e sublinhados (_).
O nome do volume não pode conter pontos (.) e/ou qualquer caracter especial como caracteres válidos.
O nome do volume não pode conter palavras ilegais, pejorativas ou agressivas.

Boas Práticas​

Escolha nomes de volumes que sejam descritivos e identifiquem claramente o conte údo ou o propósito do armazenamento.
Evite incluir informações confidenciais ou sensíveis nos nomes de volumes.
Considere utilizar padrões de nomenclatura consistentes para facilitar a organização e a manutenção dos volumes ao longo do tempo.
Revise periodicamente os nomes de volumes existentes para garantir que ainda estejam alinhados com as políticas e práticas recomendadas.


---

Preço
A estrutura de preços do Block Storage é baseada no modelo de cobrança por uso (pay-as-you-go), proporcionando flexibilidade e controle sobre os custos. O preço é calculado com base no tamanho do volume alocado pelo usuário e pelo tempo de uso desse volume.
Armazenamento de Volumes:​
O preço do armazenamento de volumes é determinado multiplicando o tamanho do volume, em gigabytes (GiB), pelo número de horas de existência do volume. Existem diferentes tipos de volumes disponíveis, cada um com um preço, oferecendo opções para atender a diferentes necessidades de desempenho e custo.
Preços​
Os preços para cada tipo de volume podem ser consultados diretamente na página de preços do website da Magalu Cloud, onde os valores são apresentados de forma clara e atualizada.
Exemplo de Cálculo de Custos:​
Suponha que você solicite um volume de 100 GB do Tipo 1.000 IOPS e o utilize por 730 horas (equivalente a um mês). A cobrança seria:

Custo do Armazenamento (em Reais) = 100 GiB x 730 horas x preço por GB/hora do tipo de volume de 1.000 IOPS

Dessa forma, você tem controle total sobre seus custos, ajustando o tamanho e o tempo de uso dos volumes conforme a necessidade.
Para acompanhar seus gastos e o uso de volumes, acesse a página de Faturamento do Console da Magalu Cloud, onde todas as informações sobre o uso do Block Storage estarão detalhadas.

---

Visão Geral
O Serviço de Banco de Dados Gerenciado (DBaaS) é uma solução eficiente em nuvem que permite aos usuários criar, operar e dimensionar bancos de dados de maneira ágil e simples. Com essa solução, os usuários não precisam se preocupar com a complexidade do gerenciamento da infraestrutura do banco de dados, o que lhes permite concentrar-se em seus aplicativos e serviços principais.
O DBaaS oferece flexibilidade para dimensionar a capacidade do banco de dados conforme necessário, garantindo que a infraestrutura esteja sempre pronta para atender às demandas do negócio, independentemente do tamanho ou da complexidade. Além disso, essa solução oferece recursos integrados de backup, segurança e recuperação de desastres, tornando-se uma opção segura e confiável para hospedar e gerenciar dados críticos na Magalu Cloud.
O serviço de Database gerenciado oferece uma solução econômica e eficiente para hospedar e gerenciar bancos de dados na nuvem, com uma estrutura de preços transparente e flexível e uma ampla gama de serviços adicionais. Se você tiver alguma dúvida ou precisar de ajuda, entre em contato com nossa equipe de suporte técnico.

---

Criar Instância de banco de dados MySQL

🖥️ Console>_ CLI👣 Inicio > Menu > DBaaS
Abra o portal Magalu Cloud em https://console.magalu.cloud;
No painel inicial, escolha a opção Database;
Selecione a opção Criar Banco de dados;
Escolha a região do datacenter onde o database será criado;
Escolha o sistema de gerenciamento do banco de dados;
Selecione a versão desejada;
Escolha um tipo de instância para o banco de dados.
Selecione um valor de armazenamento sugerido ou personalize conforme a sua necessidade.
Em Nome da Instância, informe um identificador único para sua instância de banco de dados.
Em ID de Login para acesso, informe um nome para seu usuário administrativo do banco de dados.
No campo Senha de acesso, informe uma senha segura para seu usuário administrativo
Em Backup automático, informe o horário de realização do backup diário e o tempo de retenção.
Clique em Criar banco de dados.
Pode levar alguns minutos até que o banco de dados esteja criado. Aguarde até que o status seja "Ligado".
Para criar um nova instância de banco de dados você pode rodar o comando abaixoMGC-CLI​mgc dbaas instances create --flavor-id="8bbe8e01-40c8-4d2b-80e8-189debc44b1c" --name="dbaas-name" --password="dbaas-password" --user="dbaas-user" --volume.size=10 --volume.type="CLOUD_NVME_15K" --engine-id="063f3994-b6c2-4c37-96c9-bab8d82d36f7"

---

Como conectar ao DBaaS utilizando uma Máquina Virtual

🖥️ Console👣 Inicio > Menu > DBaaSPara conectar-se ao banco de dados MySQL, é necessário uma Virtual Machine (máquina virtual) provisionada na mesma região do banco de dados a que deseja-se conectar. Para ilustrar, utilizaremos o exemplo de um banco de dados MySQL e uma VM, como jumphost, utilizando imagem Ubuntu 22.04 LTS.

Abra o portal Magalu Cloud em https://console.magalu.cloud/;


No painel inicial, escolha a opção Virtual machines;


Selecione a opção Criar Instância;


Em Nome da Instância, informe um identificador único para sua instância;


Escolha a mesma região de datacenter selecionada para o database;
a. Ao criar a VM (jumphost), garanta que ela esteja na mesma região/zona em que você criou o banco de dados MySQL.


Em Escolha uma Imagem, utilizaremos a imagem Ubuntu 22.04 LTS, a título de exemplo;


Em Escolha um tipo de máquina virtual, escolha o perfil de uso para a instância do banco de dados;


Em Chave SSH, gere uma chave pública SSH para provar sua identidade ao conectar-se a uma instância da Magalu Cloud;


Clique em Criar Instância;


Uma vez que a VM mostrar o status , utilize a chave pública SSH para se conectar à VM Ubuntu usando seu IP público;
a. No terminal, execute o comando:
ssh usuário@IP_público
i. Substitua “usuário" pelo seu nome de usuário na VM, que no nosso exemplo será “ubuntu”, e “IP público" pelo IP público da VM.


Uma vez dentro do jumphost (VM Ubuntu), use o cliente de banco de dados MySQL e o IP privado atribuído ao banco de dados na mesma região da VM jumphost para realizar a conexão;
a. No terminal, execute o comando:
sudo apt updatesudo apt install mysql-client
mysql -h ip_privado_do_banco -u usuario -p senha
i. Substitua “ip_privado_do_banco” pelo IP privado do banco na mesma região da VM, e ‘usuário’ e ‘senha’ pelos dados de login do usuário administrativo do banco de dados MySQL.


Após a execução do comando, você terá acesso ao banco de dados MySQL a partir da Virtual Machine jumphost.



---

Alterar configurações dos parâmetros do MySQL
Uma vez conectado ao banco de dados MySQL usando suas credenciais, o MySQL permite configurar uma ampla variedade de parâmetros que podem ser definidos e persistidos através dos comandos SET, SET PERSIST, e SET PERSIST_ONLY. Esses comandos permitem ajustar o comportamento do banco de dados MySQL tanto para a sessão atual quanto de forma permanente, garantindo que as alterações persistam através de reinicializações do banco de dados.
É importante ressaltar que, embora muitas variáveis possam ser alteradas dinamicamente utilizando os comandos acima, algumas variáveis requerem que o serviço MySQL seja reiniciado para que as alterações entrem em efeito. Portanto, ao ajustar essas variáveis, será necessário desligar e ligar a instância do MySQL para que as novas configurações sejam aplicadas.
A lista completa de variáveis de sistema é extensa, mas aqui estão algumas das mais comuns e úteis:
Lista de Parâmetros Comuns​
1. Conexões e Rede​

max_connections: Define o número máximo de conexões simultâneas.
connect_timeout: Tempo máximo de espera para uma conexão ser estabelecida.
wait_timeout: Tempo de espera para conexões inativas antes de serem fechadas.
interactive_timeout: Tempo de espera para conexões interativas inativas.
max_allowed_packet: Tamanho máximo de um pacote de comunicação.
net_buffer_length: Tamanho inicial do buffer de rede.

2. Configurações de Memória e Cache​

query_cache_size: Tamanho da cache de consultas.
query_cache_type: Tipo de cache de consultas.
innodb_buffer_pool_size: Tamanho do pool de buffers do InnoDB.
innodb_log_buffer_size: Tamanho do buffer de log do InnoDB.
key_buffer_size: Tamanho do buffer de índice.
sort_buffer_size: Tamanho do buffer de ordenação.
join_buffer_size: Tamanho do buffer de junção.
read_buffer_size: Tamanho do buffer de leitura.
read_rnd_buffer_size: Tamanho do buffer de leitura aleatória.
tmp_table_size: Tamanho máximo das tabelas temporárias.
max_heap_table_size: Tamanho máximo das tabelas HEAP.

3. Log e Replicação​

log_queries_not_using_indexes: Loga consultas que não usam índices.
log_slave_updates: Ativa logs de atualizações em slaves.
sync_binlog: Sincroniza o log binário.
relay_log_info_repository: Define o repositório de informações do relay log.
binlog_cache_size: Tamanho da cache do log binário.
binlog_checksum: Ativa checksums no log binário.

4. InnoDB​

innodb_file_per_table: Cria arquivos individuais por tabela.
innodb_flush_log_at_trx_commit: Define a política de flush do log do InnoDB.
innodb_log_file_size: Tamanho dos arquivos de log do InnoDB.
innodb_log_files_in_group: Número de arquivos de log no grupo do InnoDB.
innodb_flush_method: Método de flush do InnoDB.
innodb_thread_concurrency: Número máximo de threads concorrentes no InnoDB.
innodb_lock_wait_timeout: Tempo de espera para lock no InnoDB.

5. Segurança​

sql_mode: Define o modo SQL.
secure_file_priv: Restringe operações de arquivos.
skip_name_resolve: Desativa a resolução de nomes de host.
require_secure_transport: Exige transporte seguro para conexões.

6. Desempenho​

table_open_cache: Tamanho da cache de tabelas abertas.
thread_cache_size: Tamanho da cache de threads.
query_cache_limit: Limite de tamanho para a cache de consultas.
innodb_autoinc_lock_mode: Modo de lock para auto incremento no InnoDB.

7. Outros​

event_scheduler: Ativa o agendador de eventos.
autocommit: Define o comportamento de autocommit.
default_storage_engine: Define o engine de armazenamento padrão.
character_set_server: Define o conjunto de caracteres do servidor.
collation_server: Define a collation do servidor.
time_zone: Define o fuso horário do servidor.
tmpdir: Diretório para tabelas temporárias.

Exemplos de Comandos​
Aqui estão alguns exemplos de como esses parâmetros podem ser definidos:
-- Definir o número máximo de conexõesSET PERSIST max_connections = 500;-- Ajustar o tamanho do pool de buffers do InnoDBSET PERSIST innodb_buffer_pool_size = 1073741824;  -- 1 GB-- Ativar log binárioSET PERSIST log_bin = 'ON';-- Definir o modo SQLSET PERSIST sql_mode = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION';-- Definir o tempo de espera para conexões inativasSET PERSIST wait_timeout = 300;
Verificação de Variáveis​
Você pode verificar os valores atuais das variáveis com o comando SHOW VARIABLES:
SHOW VARIABLES LIKE 'max_connections';SHOW VARIABLES LIKE 'innodb_buffer_pool_size';
Documentação Completa​
Para uma lista completa e atualizada de todas as variáveis de sistema que podem ser configuradas no MySQL, consulte a documentação oficial do MySQL: MySQL 8.0 Reference Manual - System Variables.
Esta lista cobre apenas uma seleção das variáveis de sistema mais comumente ajustadas. A documentação oficial oferece uma visão abrangente de todas as variáveis configuráveis, incluindo descrições detalhadas e valores possíveis. Verifique sempre a documentação para entender completamente o impacto e os requisitos de cada alteração de configuração.

---

Gerenciar usuários e permissões
Antes de começar a gerenciar usuários e permissões no MySQL, é importante garantir que você tenha acesso a um banco de dados MySQL e a uma Virtual Machine (VM), ambos provisionados na mesma região das disponíveis na Magalu Cloud. Devido ao fato de o banco de dados MySQL na Magalu Cloud possuir um endereço IPv4 privado, é necessário utilizar uma VM como um "jump host" para acessar o banco de dados. Utilizar a mesma região para o banco de dados e a VM minimiza a latência e maximiza a eficiência da comunicação entre os dois. Além disso, assegurar que ambos estão na mesma região ajuda a evitar custos adicionais de tráfego de rede entre regiões diferentes e melhora a performance geral do sistema.
1. Criar um novo usuário​
Para criar um novo usuário no MySQL:


A partir de uma Virtual Machine (VM) criada na Magalu Cloud, conecte-se ao MySQL:
sql
mysql -h ip_privado_do_banco -u usuário -p senha

Substitua ip_privado_do_banco pelo IP privado do banco na mesma região da VM;
Substitua usuário e senha pelos dados de login do usuário administrativo do banco de dados MySQL.



Crie um novo usuário:
sql
CREATE USER 'newuser'@'host' IDENTIFIED BY 'password';

newuser: o nome de usuário do novo usuário.
host: o host a partir do qual o usuário pode se conectar (por exemplo, localhost ou % para qualquer host).
password: a senha do novo usuário.



Conceder permissões:
sql
GRANT ALL PRIVILEGES ON database_name.* TO 'newuser'@'host';FLUSH PRIVILEGES;

database_name: o banco de dados ao qual o usuário deve ter acesso.



2. Modificar permissões de usuário​
Para modificar as permissões do usuário:


Conceda privilégios adicionais:
sql
GRANT SELECT, INSERT, UPDATE ON database_name.* TO 'username'@'host';FLUSH PRIVILEGES;


Revogar privilégios:
sql
REVOKE DELETE ON database_name.* FROM 'username'@'host';FLUSH PRIVILEGES;


3. Excluir um usuário​
Para excluir um usuário:
sql
DROP USER 'username'@'host';

---

Fazer backup e restaurar banco de dados
Como criar um backup manual​


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue até sua instância: no painel principal, escolha a opção database;


Acesse a seção Backup: clique no nome da instância na lista de instâncias. Na guia superior, selecione "Backup";


Crie um backup manual: clique em "Criar backup manual";
noteEsta ação pode aumentar o custo mensal aproximado do banco de dados. Revise a documentação de preços de backup e clique em "Criar".


Aguarde a conclusão: pode levar alguns minutos para que o backup seja criado. Aguarde até que o status indique "Criado".


Via CLI​
Para criar um backup manual, você pode utilizar o comando abaixo:
mgc dbaas instances backups create [instance-id] [flags]
Como excluir um backup manual​


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue até sua instância: no painel principal, escolha a opção database;


Acesse a seção Backup: clique no nome da instância na lista de instâncias. Na guia superior, selecione "Backup";


Excluir um backup manual: na lista de backups, selecione o backup manual que deseja excluir. Clique em "Excluir";


Confirmar exclusão: para confirmar, digite o nome exato do backup manual na janela de confirmação e clique em “Excluir”;


Aguarde a conclusão: pode levar alguns minutos para que o backup seja excluído.


Via CLI​
Para excluir um backup manual, você pode utilizar o comando abaixo:
mgc dbaas backups delete [backup-id] [flags]
Como editar a frequência e retenção automática de backup​


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue até sua instância: No painel principal, escolha a opção database;


Acesse a seção Backup: clique no nome da instância na lista de instâncias. Na guia superior, selecione "Backup";


Editar configurações de backup: clique em "Frequência" ou "Período de retenção";


Definir nova frequência e retenção: escolha a nova frequência e/ou ajuste o período de retenção. Clique em "Salvar".


Como restaurar um backup​
O Restore de backups atualmente pode ser realizado via CLI e, em breve, também estará disponível no console.
Via CLI
 mgc dbaas instances restores [instance-id] [backup-id]

---

Solucionar problemas comuns
1. Problemas comuns e soluções sugeridas:​
ProblemaSituaçãoPossível SoluçãoNão consigo criar/excluir uma instância DBaaSInstância em status de “Erro”Abrir um TicketMinha instância DBaaS está demorando muito tempo para criarA instância em status “Criando” por mais de 15 minutosA criação de uma instância DBaaS pode levar entre 10 e 15 minutos. Se estiver demorando mais, abra um TicketNão consigo conectar à minha instância DBaaS MySQLVia mysql-client ou outro clienteCertifique-se de que: - A instância de DBaaS está no status “Ativa”;  - Está tentando o acesso a partir de uma VM na Magalu Cloud na mesma conta e região do banco de dados;  - Está executando o comando de conexão corretamente (Tutorial de conexão);  - Está informando o IP privado da instância corretamente;  - Está informando usuário e senha corretamente;  - Se esqueceu o usuário/senha, clique aqui para abrir um Ticket;  - Se ainda não conseguir conexão, abra um Ticket para auxílio.Consigo conectar ao MySQL, mas minha aplicação não consegueVia mysql-clientCertifique-se de que a configuração de rede e firewall da aplicação esteja correta e permita conexões ao banco de dadosMeu banco de dados está lento/com performance degradadaConsultas lentasVeja a seção sobre Problemas de desempenho
2. Problemas de desempenho​
Verifique consultas em execução:
sql
SHOW PROCESSLIST;
Analisar consultas lentas:
sql
SHOW VARIABLES LIKE 'slow_query_log';

Certifique-se de que slow_query_log esteja ativado e verifique slow_query_log_file.


---

Identificar problemas e Melhorar a Performance no MySQL
Caso o seu ambiente apresente algum tipo de lentidão ou travamento, é interessante verificar se existe algum bloqueio no banco de dados com longa duração. Uma forma de você tentar verificar isso seria executando o comando abaixo:
sql
SELECT    waiting_pid, -- id da query bloqueada    waiting_query, -- comando da query bloqueada    blocking_pid, -- id da query bloqueadora    blocking_query -- comando da query bloqueadoraFROM sys.innodb_lock_waits;
Caso ainda não traga as informações desejadas, você pode consultar os processos em execução com mais detalhes através da consulta abaixo:
sql
SHOW PROCESSLIST;
Ou:
sql
SELECT    pl.id,    pl.user,    pl.host,    pl.db,    pl.command,    pl.time,    pl.state,    SUBSTRING(pl.info, 1, 60) AS info,    it.trx_rows_modifiedFROM information_schema.processlist plLEFT JOIN information_schema.innodb_trx itON pl.id = it.trx_mysql_thread_id;

pl.id: ID da sessão.
pl.user: usuário que iniciou a conexão.
pl.host: host a partir do qual a execução está ocorrendo.
pl.db: nome do banco de dados em uso pela conexão.
pl.command: tipo de comando sendo executado (e.g., Query, Sleep).
pl.time: tempo de execução do comando atual, em segundos.
pl.state: estado atual da conexão.
SUBSTRING(pl.info, 1, 60) AS info: primeiros 60 caracteres da coluna info, que contém a informação sobre o comando em execução.
it.trx_rows_modified: número de linhas modificadas ou inseridas pela transação.

Uma vez identificada uma sessão mais demorada e com impacto nas demais sessões, é possível checar se o plano de execução está adequado. Nesse retorno, é possível verificar se a consulta está fazendo uso de índice e se esse filtro apresenta boa cobertura.
sql
EXPLAIN SELECT * FROM table_name WHERE column_name = 'value';
É importante sempre considerar a criação de índices e referenciá-los na consulta para uma melhor execução. Mais informações podem ser encontradas na documentação oficial do MySQL sobre otimização de índices.
1. Indexação​
Criar índices:
sql
CREATE INDEX index_name ON table_name(column_name);
Verifique o uso do índice:
sql
EXPLAIN SELECT * FROM table_name WHERE column_name = 'value';
2. Otimização de consulta​
Evite SELECT:
sql
SELECT column1, column2 FROM table_name;

Use JOINs com eficiência: certifique-se de que os índices adequados estejam em vigor para as colunas usadas em JOINs.

Limitar resultados:
sql
SELECT column1 FROM table_name LIMIT 100;
3. Análise e perfil​
Use o comando EXPLAIN:
sql
EXPLAIN SELECT column1 FROM table_name WHERE column2 = 'value';
Use o comando ANALYZE:
sql
ANALYZE TABLE table_name;

---

Migrar um banco de dados para a nuvem
Preparando-se para a migração​


Faça backup do banco de dados no servidor de nuvem: realize o backup do seu banco de dados usando arquivos dump SQL;


Verifique a compatibilidade: certifique-se de que a versão alvo do MySQL na MGC seja compatível com sua versão atual.


Processo de migração​
Crie um novo banco de dados na MGC: conecte-se à sua instância MySQL e crie um novo banco de dados:
sql
CREATE DATABASE new_database_name;

Transferir o arquivo de backup: use ferramentas como scp para transferir o arquivo de backup para a MGC.

Restaure o banco de dados:
sql
mysql -u username -p new_database_name < backup_file.sql
Etapas pós-migração​


Verifique a integridade dos dados: verifique se todos os dados foram migrados corretamente;


Atualizar cadeias de conexão: certifique-se de que seus aplicativos estejam usando as novas cadeias de conexão do banco de dados em nuvem;


Monitore o desempenho: fique de olho no desempenho e faça as otimizações necessárias.



---

Redimensionar volume e tipo de máquina
Como redimensionar um volume e alterar tipo de máquina​


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue até sua instância: no painel principal, escolha a opção database;


Acesse as Opções da Instância: na lista, selecione o menu de opções da instância que deseja redimensionar. Clique em "Configurar banco de dados";


Escolha Nova Configuração: selecione o novo tipo de máquina e/ou ajuste o tamanho do armazenamento;
noteEsta ação pode aumentar o custo mensal aproximado do banco de dados.


Salvar alterações: clique em "Salvar alterações" para confirmar;


Aguarde a conclusão: pode levar alguns minutos para que a operação de redimensionamento seja concluída. O banco de dados estará indisponível durante esse período. Aguarde até que o status indique "Online".



---

Criar e gerenciar banco de dados e réplicas
Como criar uma réplica de banco de dados​


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue até sua instância: no painel principal, escolha a opção database;


Acesse os Detalhes do banco de dados: na lista, selecione o menu de opções da instância que deseja replicar. Clique em "Detalhes do banco de dados";


Crie uma réplica: navegue até a aba “Replicação” e clique em "Criar réplica";


Escolha Configuração da réplica: selecione o tipo de máquina e nome da réplica;
noteEsta ação pode aumentar o custo mensal aproximado do banco de dados. Recomenda-se utilizar uma máquina com configuração igual ou superior à instância principal para evitar baixo desempenho.


Confirmar e criar: clique em "Criar réplica" para confirmar;


Aguarde a conclusão: pode levar alguns minutos para que a replicação seja concluída. Aguarde até que o status indique "Ligado".


Como excluir uma réplica de banco de dados​


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue até sua instância: no painel principal, escolha a opção database;


Acesse a seção Replicação: clique no nome da instância na lista de instâncias. Na guia superior, selecione "Replicação";


Excluir uma réplica: na lista de réplicas, selecione o menu de opções da réplica que deseja excluir. Clique em "Excluir";


Confirmar exclusão: para confirmar, digite o nome exato da réplica na janela de confirmação e clique em “Excluir”.


Como excluir uma instância de banco de dados​


Abra o Portal Magalu Cloud: Console Magalu Cloud;


Navegue até sua instância: no painel principal, escolha a opção database;


Selecione a instância a ser excluída: na lista de instâncias, encontre a instância do banco de dados que deseja excluir. Clique no menu de opções dessa instância;


Iniciar exclusão: clique em "Excluir";


Confirmar exclusão: para confirmar, digite o nome exato da instância do banco de dados na janela de confirmação;


Finalizar exclusão: clique em "Excluir" na janela de confirmação.


noteO processo de exclusão pode levar alguns minutos. Aguarde até que o status indique que a instância foi excluída com êxito.

---

Monitoramento do Banco de Dados MySQL via Prometheus e Grafana
Este documento tem como objetivo guiar o usuário no processo de acesso e coleta de métricas de um banco de dados MySQL, utilizando Prometheus e Grafana, instalados em máquina virtual da Magalu Cloud. Certifique-se de seguir cada passo com atenção para garantir uma configuração adequada e eficiente.
Para exemplificar, utilizaremos o sistema operacional Ubuntu 22.04, a fim de ilustrar cada um dos passos a seguir.
Requisitos:​

Acesso a um banco de dados MySQL criado na Magalu Cloud.
Acesso a Virtual Machine (VM), criada na mesma região do banco de dados.
Prometheus instalado e configurado.
Grafana instalado e configurado.

Passo 1: Configuração do Banco de Dados MySQL​

Abra o portal Magalu Cloud em https://portal.magalu.cloud;
No painel inicial, escolha a opção database;
Verifique se o banco de dados MySQL está acessível e em funcionamento;
Copie o IP privado do banco de dados.

Passo 2: Configuração da Virtual Machine (VM)​

Certifique-se de que a VM que será utilizada para acessar o banco de dados está na mesma região que o servidor do banco de dados;
Verifique se a VM tem permissão para se comunicar com o banco de dados MySQL através de seu IP privado;
Libere as portas TCP/9090 e TCP/3000, na direção Ingress, nas regras dos teus grupos de segurança da VM.

Passo 3: Instalação do Prometheus​

Adicionar o repositório do Prometheus

sudo apt updatesudo apt install -y prometheus

Iniciar Prometheus
Para iniciar o serviço Prometheus, utilize o seguinte comando:

sudo systemctl start prometheus
Este comando inicializa o Prometheus, mas a inicialização não será persistente após reinicializações do sistema.
Para configurar o Prometheus para iniciar automaticamente toda vez que o sistema for reiniciado, utilize o comando:
sudo systemctl enable prometheus
O comando enable cria os links simbólicos necessários para que o serviço Prometheus seja automaticamente iniciado durante o processo de boot do sistema.
Em resumo:
sudo systemctl start prometheus: Inicia o serviço Prometheus imediatamente.
sudo systemctl enable prometheus: Configura o sistema para iniciar o serviço Prometheus automaticamente em cada boot.
Passo 4: Configuração do Prometheus​

Verifique se o Prometheus está instalado e em execução na mesma rede que a VM.
Edite o arquivo de configuração do Prometheus (prometheus.yml) para incluir o banco de dados MySQL como um alvo de scraping. O arquivo de configuração principal do Prometheus é prometheus.yml, localizado geralmente em /etc/prometheus/prometheus.yml.

Você precisará editá-lo para definir suas configurações específicas.
sudo vi /etc/prometheus/prometheus.yml
Adicione as seguintes linhas:
scrape_configs:  - job_name: 'mysql'    static_configs:        - targets: ['IP_privado_do_banco_de_dados:8080/mysql', 'IP_privado_do_banco_de_dados:8080/node']

Substitua IP_privado_do_banco_de_dados pelo endereço IP privado do servidor do banco de dados.

Passo 5: Instalação do Grafana​

Adicionar o repositório do Grafana

sudo apt-get install -y apt-transport-https software-properties-common wgetwget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"sudo apt-get updatesudo apt-get install grafana

Iniciar o Grafana

sudo systemctl enable grafana-serversudo systemctl start grafana-server

Acessar o Grafana: Após a instalação, você pode acessar o Grafana através de um navegador da web digitando o endereço IP da sua VM seguido da porta padrão do Grafana, que é 3000 (por exemplo, http://seu_endereco_ip:3000). O nome de usuário e senha padrão são ambos "admin".

Passo 6: Configuração do Grafana​

Certifique-se de que o Grafana está instalado e em execução.
Acesse o painel de administração do Grafana via navegador.
Adicione Prometheus como um data source:


Vá para "Configuration" > "Data Sources".
Clique em "Add data source".
Selecione Prometheus.
Configure o endereço do servidor Prometheus (http://IP_publico_VM:9090).
Clique em "Save & Test" para verificar a conexão.


Substitua "IP_publico_VM" pelo endereço IPV4 público da sua VM.

Passo 7: Criação de Dashboards no Grafana​

Crie um novo dashboard no Grafana.
Adicione um novo painel.
Selecione Prometheus como a fonte de dados.
Escreva Queries PromQL para recuperar as métricas desejadas do banco de dados MySQL.
Personalize o painel conforme necessário, adicionando gráficos, tabelas ou outros elementos visuais.
Salve o dashboard para acessá-lo posteriormente.

Passo 8: Importação de Dashboard no Grafana​

Acesse o Grafana e faça login no painel de administração.
No menu lateral esquerdo, clique em "Dashboard" para criar um novo dashboard.
No canto superior direito, clique em "New" e selecione "Import".
Será solicitado que você insira o ID do dashboard que deseja importar. Para o Node Exporter Full, o ID sugerido do dashboard é 1860. Para o MySQL Exporter o ID sugerido do dashboard é 14057 ou 20016.
Digite o ID do dashboard no campo correspondente e clique em "Load".
O Grafana irá carregar o modelo do dashboard e exibirá uma prévia do mesmo. Revise as configurações e clique em "Import".
Após a importação ser concluída com sucesso, você será redirecionado para o dashboard recém-importado. Aqui, você poderá visualizar as métricas do Node Exporter,por exemplo, de forma detalhada.
Personalize o dashboard conforme necessário, ajustando os intervalos de tempo, adicionando novos painéis ou fazendo outras modificações de acordo com suas preferências.
Salve o dashboard para acessá-lo posteriormente e utilizar as métricas de maneira conveniente.

Com este passo adicional, você poderá importar o dashboard do Node Exporter Full no Grafana e monitorar as métricas do seu sistema de maneira eficiente e visualmente atraente.
Conclusão​
Após seguir esses passos, você deverá ser capaz de criar painéis e dashboards para visualizar, através do Grafana, os dados coletados pelo Prometheus no seu banco de dados MySQL. Certifique-se de manter a configuração atualizada e ajustada conforme necessário para garantir um monitoramento eficaz e contínuo do desempenho do seu banco de dados.

---

Regras de nomenclatura de instâncias de Databases
Este documento define as diretrizes para nomeação de Databases. Essas regras visam garantir consistência, organização e segurança.
Regras de nomeação​

Os nomes de databases devem ser únicos em todo o nosso ambiente de nuvem.
Os nomes de databases devem conter entre 3 e 63 caracteres.
Os nomes de databases devem ser compostos apenas por letras minúsculas, números, hífens (-) e não podem começar ou terminar com um hífen.
Os nomes de databases não podem conter pontos (.), sublinhados (_) e/ou qualquer caracter especial como caracteres válidos.
Os nomes dos databases não podem conter palavras ilegais, pejorativas ou agressivas.

Boas Práticas​

Escolha nomes de databases que sejam descritivos e identifiquem claramente o conteúdo ou o propósito do armazenamento.
Evite incluir informações confidenciais ou sensíveis nos nomes de databases.
Considere utilizar padrões de nomenclatura consistentes para facilitar a organização e a manutenção dos databases ao longo do tempo.
Revise periodicamente os nomes de databases existentes para garantir que ainda estejam alinhados com as políticas e práticas recomendadas.


---

Visão geral
Kubernetes é um plataforma de código aberto, portável e extensiva para o gerenciamento de cargas de trabalho e serviços distribuídos em contêineres, que facilita tanto a configuração declarativa quanto a automação.
Magalu Kubernetes Engine é o Produto da Magalu Cloud de  orquestração de contêineres de forma autônoma, incluindo todo o seu ciclo de vida e possibilitando dividir a carga de trabalho automaticamente e de forma balanceada entre várias réplicas de um mesmo ambiente dentro da Magalu Cloud.

---

Pré-requisitos

Ter uma conta criada no Console Magalu Cloud.

Opcional​

Realizar o download e a configuração do CLI da Magalu.
Utilizar o kubectl.


---

Criar um Cluster

🖥️ Console>_ CLI👣 Inicio > Menu > KubernetesNa página de Kubernetes, clique no botão para Criar Cluster.

Escolha um nome único para o seu Cluster. O nome do Cluster digitado será validado e caso o nome desejado não esteja mais disponível, não será permitido criar o Cluster.


Escolha a versão de Kubernetes deseja:

É recomendado a escolha da versão da mais recente;
Todas as versões suportadas serão exibidas abaixo.



É necessário escolher a região do datacenter convenientemente.


Escolha um nome único para o primeiro node pool do Cluster. O nome do node pool digitado será validado e caso o nome desejado não esteja mais disponível, não será permitido criar o Cluster.

Para criar um novo Cluster você pode rodar o comando abaixo especificando um nome único de sua preferência (sem espaços), seguindo as regras de nomeação dos buckets.MGC-CLI​mgc kubernetes cluster create --description="This is an example cluster." --name="cluster-example" --node-pools='[{"flavor":"cloud-k8s.gp1.small","name":"nodepool-example","replicas":1}]' --param.version="v1.28.5"

---

Utilizar o recurso de Autoscaling

Atualmente o recurso de Autoscaling está disponível apenas via CLI da Magalu Cloud
Criando cluster com AutoscalingAlterando Node PoolPara criar um cluster com o recurso de autoscaling, utilize o seguinte comando na CLI da Magalu Cloud:mgc kubernetes cluster create --description="This is an example cluster." --name="cluster-example" --node-pools='[{"auto_scale":{"min_replicas":1,"max_replicas":3},"flavor":"cloud-k8s.gp1.small","name":"nodepool-example","replicas":1}]' --param.version="v1.28.5"Parâmetros​--description
Descrição: Descrição do cluster.
Uso: --description="This is an example cluster."
Tipo: String
--name
Descrição: Nome do cluster.
Uso: --name="cluster-example"
Tipo: String
--node-pools
Descrição: Configuração dos pools de nós do cluster. Deve ser fornecido no formato JSON.
Uso: --node-pools='[{"auto_scale":{"min_replicas":1,"max_replicas":3},"flavor":"cloud-k8s.gp1.small","name":"nodepool-example","replicas":1}]'
Tipo: String (JSON) -auto_scale: Configurações de autoescala para o pool de nós.

min_replicas: Número mínimo de réplicas.
max_replicas: Número máximo de réplicas.
flavor: Tipo de máquina usada no pool de nós.
name: Nome do pool de nós.
replicas: Número inicial de réplicas no pool de nós.


--param.version
Descrição: Versão do Kubernetes a ser usada no cluster.
Uso: --param.version="v1.28.5"
Tipo: String
Você pode alterar um nodePool habilitando o recurso de autoscaling a um cluster existente da seguinte maneira:
Liste os clusters já criados com seguinte comando na CLI da Magalu Cloud:
mgc kubernetes cluster list
Liste os nodePools de um cluster através do seguinte comando:
mgc kubernetes nodepool list --cluster-id="<Digite aqui o 'id' do cluster obtido no passo anterior>"
Execute o seginte comando de exemplo para habilitar o autoscale em um _nodePool:
mgc kubernetes nodepool update \  --auto-scale.min-replicas=int \  --auto-scale.max-replicas=int \  --node-pool-id="<Digite aqui o 'id' do nodepool obtido no passo anterior>" \  --cluster-id="<Digite aqui o 'id' do cluster obtido no passo nº 1>"Parâmetros​--auto-scale.min-replicas
Descrição: Define o número mínimo de réplicas para o autoescalador do pool de nós.
Uso: --auto-scale.min-replicas=(int)
Tipo: Inteiro
--auto-scale.max-replicas
Descrição: Define o número máximo de réplicas para o autoescalador do pool de nós.
Uso: --auto-scale.max-replicas=(int)
Tipo: Inteiro
--node-pool-id
Descrição: Identificador único do pool de nós a ser atualizado.
Uso: --node-pool-id="<UUID nodePool>"
Tipo: String (UUID)
--cluster-id
Descrição: Identificador único do cluster ao qual o pool de nós pertence.
Uso: --cluster-id="<UUID cluster>"
Tipo: String (UUID)


---

Criar volumes persistentes
1. Criando o StorageClass​
Um StorageClass define as propriedades dos volumes de armazenamento dinâmico provisionados. Aqui está um exemplo de como criar um StorageClass do Cinder:
  apiVersion: storage.k8s.io/v1  kind: StorageClass  metadata:    name: cinder-storageclass-5k  parameters:    availability: nova    type: cloud_nvme5k  provisioner: cinder.csi.openstack.org  reclaimPolicy: Delete  volumeBindingMode: Immediate

name: O nome do StorageClass, neste exemplo, é cinder-storageclass-5k.
parameters: Define os parâmetros específicos do Cinder, como availability e type.
provisioner: Especifica o provisionador que deve ser usado para provisionar volumes de armazenamento dinâmico.

warningA anotation storageclass.kubernetes.io/is-default-class: "true" NÃO deve ser utilizada em mais de uma StorageClass para evitar que o Admission Controller se confunda hora de provisionar o volume. Caso seja usada, é necessário especificar o storageClassName no PVC
1.1 Listando os Diferentes Tipos de Volumes
Para listar os diferentes tipos de StorageClass disponíveis no ambiente, você pode usar o seguinte comando na CLI MGC
  mgc block-storage volume-types list
Este comando exibirá os tipos de volume suportados pelo seu provedor de armazenamento.
O resultado mostrará uma lista dos tipos de volume disponíveis, que você pode usar para configurar o seu  StorageClass. O nome do volume type deve ser o valor a ser preenchido na propriedade parameters.type do StorageClass.
infoCada volume-type possui diferentes precificações, que podem ser consultadas em Tipos de volumes

2. Criando o Persistent Volume Claim (PVC) utilizando o StorageClass​
Agora que o StorageClass foi criado, podemos usar esse StorageClass para provisionar um PV e um PVC. Exemplo de Persistent Volume Claim (PVC):
apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: my-pvcspec:  accessModes:    - ReadWriteOnce  storageClassName: cinder-storageclass-5k  resources:    requests:      storage: 1Gi

accessModes: Define os modos de acesso ao volume. Neste exemplo, é definido como ReadWriteOnce.
storageClassName: Especifica o nome do StorageClass a ser usado para provisionar o volume.
resources.requests.storage: Define o tamanho do volume a ser provisionado.

dangerSempre exclua os volumes persistentes antes de excluir um cluster. Siga os procedimentos descritos em Excluindo volumes persistentes

3. Criando o POD​
  apiVersion: v1  kind: Pod  metadata:    name: my-pod  spec:    containers:    - name: my-container      image: nginx      volumeMounts:      - mountPath: "/data"        name: my-volume    volumes:    - name: my-volume      persistentVolumeClaim:        claimName: my-pvc


metadata.name: Especifica o nome do Pod.


spec.containers: Define os containers no Pod.


spec.containers.volumeMounts: Define o ponto de montagem do volume no container.


spec.volumes: Define os volumes a serem montados no Pod.


spec.volumes.persistentVolumeClaim.claimName: Especifica o nome do PVC a ser montado no volume.
noteEste YAML cria um Pod chamado my-pod que usa o PVC my-pvc criado anteriormente. Certifique-se de ajustar o nome do Pod e outros detalhes conforme necessário para o seu caso de uso específico.



---

Como implantar, dimensionar e expor um aplicativo simples no Magalu Cloud Kubernetes

Crie um novo deployment - No Kubernetes, um Deployment é um objeto que pode definir um estado desejado para o seu aplicativo, incluindo o número de réplicas (contêineres) que você deseja que estejam em execução

kubectl create deployment nginx --image=nginx

Verifique o status do deployment

kubectl get deployments

Também é possível verificar no formato yaml. Este formato pode ser pode ser utilizado para criar novamente este deployment.

kubectl get deployment nginx -o yaml

Execute novamente o comando e redirecione a saída para um arquivo. Em seguida, edite o arquivo “first.yaml”.

kubectl get deployment nginx -o yaml > first.yamlvim first.yaml {sugestão de editor de texto vim}


Remova do arquivo “first.yaml”, as linhas creationTimestamp, resourceVersion e uid. Remova também todas as linhas incluindo e após status, que devem estar por volta da linha 120, se as outras já tiverem sido removidas.


Delete o deployment existente.


kubectl delete deployment nginx

Edite novamente o arquivo first.yaml e adicione as três linhas seguintes após a linha name: nginx dentro do objeto Spec:

ports:containerPort: 80protocol: TCP

Crie novamente o deployment utilizando o seguinte comando:

kubectl create -f first.yaml

Verifique o Pod e o Deployment

kubectl get deploy.pod

Delete o serviço criado anteriormente

kubectl delete svc nginx

Crie novamente o  serviço e passe agora o tipo LoadBalancer

kubectl expose deployment nginx --type=LoadBalance

Verifique o status e observe as portas externas mencionadas. A saída mostrará o External-IP como pendente. A menos que um provedor responda com um load balancer, continuará a exibir como pendente. O provisionamento do IP externo pode levar alguns minutos.

kubectl get svc

Depois de criar o Deployment, use o seguinte comando para verificar se ele está funcionando corretamente.

kubectl get deployments

Escale seu deployment para duas réplicas

kubectl scale deployment nginx --replicas=2

Verifique a criação das réplicas

kubectl get pods

Utilize novamente o comando

kubectl get pods
Copie e cole o IP externo no seu navegador. Se todas as etapas anteriores foram seguidas corretamente, você deverá ser capaz de visualizar a página “Welcome to nginx!”

Após o teste, se desejar excluir o deployment para recuperar recursos do sistema, execute os seguintes comandos:

kubectl delete deployments nginxkubectl delete ep nginxkubectl delete svc nginx
Note que a exclusão de um deployment não exclui os endpoints ou serviços.

---

Como restringir acesso a um LoadBalancer de serviço pelo IP de origem
Para restringir o acesso a aplicações expostas por Load Balancers de serviço em um cluster Kubernetes de workload, com base no IP de origem da requisição, foram realizados testes utilizando um echoserver (disponível no DockerHub da Cilium), um Service do tipo LoadBalancer configurado para testes, e uma especificação do OpenStack Cloud Controller Manager para a implementação da restrição.
A funcionalidade loadBalancerSourceRanges permite especificar uma lista de CIDRs autorizados, limitando quais IPs podem acessar o Service do tipo Load Balancer.
Com essa funcionalidade conseguimos definir quais os CIDRs (ranges de IPs) que poderão enviar requisições para o IP deste Load Balancer. Se um IP, que não se encaixa em nenhum CIDR da lista, tentar enviar uma requisição ao IP do LoadBalancer, receberá timeout, pois seu acesso a esse recurso não está permitido.
Recursos necessários​

Namespace e Deployment:

  apiVersion: v1  kind: Namespace  metadata:    name: echoserver  ---  apiVersion: apps/v1  kind: Deployment  metadata:    name: echoserver    namespace: echoserver    labels:      app: echoserver  spec:    replicas: 1    selector:      matchLabels:        app: echoserver    template:      metadata:        labels:          app: echoserver      spec:        containers:        - name: echoserver          image: cilium/echoserver          ports:          - containerPort: 80

Service - Tipo LoadBalancer:

  apiVersion: v1  kind: Service  metadata:    labels:      app: echoserver    name: echoserver    namespace: echoserver  spec:    ports:    - port: 80      protocol: TCP      targetPort: 80    selector:      app: echoserver    type: LoadBalancer    loadBalancerSourceRanges:      - IP
Passo a passo:​


Crie um cluster pelo portal da Magalu Cloud ou CLI


Faça download do kubeconfig do cluster e se conecte via kubectl


Faça deploy do Namespace e do Deployment


Identifique seu IP público através do seguinte comando (Windows ou Linux):
curl ip.me


Na declaração do Service do tipo LoadBalancer, em spec → loadBalancerSourceRanges é onde são definidos os CIDRs (ranges de IPs) que serão permitidos a acessar. Para cada range deve colocar o caracter “-” antes, para definir como mais um item de uma lista segundo a declaração do Yaml. A especificação “loadBalancerSourceRanges“ é uma funcionalidade nativa da api do Kubernetes, ou seja, está inclusa por padrão na ferramenta, porém é opcional do Cloud Provider se fará uso dela ou não. No caso o OpenStack Cloud Controler Manager, que é o Cloud Provider, faz uso. Nesse exemplo usaremos o IP que obtemos com o passo acima (passo 4).
Exemplo de como ficaria:
 apiVersion: v1 kind: Service metadata:   labels:     app: echoserver   name: echoserver   namespace: echoserver spec:   ports:   - port: 80     protocol: TCP     targetPort: 80   selector:     app: echoserver   type: LoadBalancer   loadBalancerSourceRanges:     - 163.116.224.120/32


Fazer deploy do Service do tipo LoadBalancer


Obter o IP externo do LoadBalancer, através do comando kubectl get service echoserver -n echoserver onde o Ip externo será exibido no campo EXTERNAL-IP


Acessar o IP externo gerado pelo LoadBalancer por um IP que está incluso em um CIDR permitido na lista, através do comando curl <enderecoIpExterno>
O retorno do comando será semelhante a este:


  Hostname: echoserver-54f69dcbb4-9v455  Pod Information:      -no pod information available-  Server values:      server_version-nginx: 1.13.3 - lua: 10008  Request Information:      client_address=::ffff:192.168.1.127      method=GET      real path=/      query=      request_version=1.1      request_scheme=http      request_uri=http://213.163.247.41:80/  Request Headers:      accept=*/*      host=213.163.247.41      user-agent-curl/7.81.0      x-forwarded-for-177.130.233.12        Request Body:      -no body in request-
Conclusão​
Fazendo uso da funcionalidade nativa do Kubernetes chamada “loadBalancerSourceRanges”, é possível restringir o acesso ao LoadBalancer de serviço se baseando no IP de origem da requisição.

Referências

Documentação do OpenStack Cloud Controller Manager sobre a opção loadBalancerSourceRanges: https://github.com/kubernetes/cloud-provider-openstack/blob/master/docs/openstack-cloud-controller-manager/expose-applications-using-loadbalancer-type-service.md

---

Regras de nomenclatura de clusters
Este documento define as diretrizes para nomeação de clusters e nodepools para o produto de Kubernetes na Magalu Cloud. Essas regras visam garantir consistência, organização e segurança.
Regras de nomeação​

Os nomes de clusters e nodepools devem ser únicos em cada região de nosso ambiente de nuvem.
Os nomes de clusters e nodepools devem conter entre 3 e 63 caracteres.
Os nomes de clusters e nodepools devem ser compostos apenas por letras minúsculas, números, hífens (-) e não podem começar ou terminar com um hífen.
Os nomes de clusters e nodepools não podem conter pontos (.), sublinhados (_) e/ou qualquer caracter especial como caracteres válidos.
Os nomes dos clusters e nodepools não podem conter palavras ilegais, pejorativas ou agressivas.

Boas Práticas​

Escolha nomes de clusters e nodepools que sejam descritivos e identifiquem claramente o conteúdo ou o propósito do armazenamento.
Evite incluir informações confidenciais ou sensíveis nos nomes de clusters e nodepools.
Considere utilizar padrões de nomenclatura consistentes para facilitar a organização e a manutenção dos clusters e nodepools ao longo do tempo.
Revise periodicamente os nomes de cluclusters e nodepoolssters existentes para garantir que ainda estejam alinhados com as políticas e práticas recomendadas.


---

Visão geral
Um CLI (Command Line Interface) é uma interface de linha de comando que permite aos usuários interagirem com um sistema ou software por meio de comandos digitados em um prompt de comando. Em vez de utilizar uma interface gráfica, os usuários interagem com o sistema ou software inserindo comandos de texto.
O MGC CLI (Command Line Interface) é uma ferramenta que permite aos usuários interagirem com os serviços da Magalu Cloud (MGC) por meio de linha de comando.

---

Pré-requisitos
Para utilizar a CLI você precisa já ter criado uma conta na Magalu Cloud através do Console Magalu Cloud.
Uma vez tendo criado a sua conta, basta seguir o procedimento de download e instalação.

---

Download e instalação

macOSLinuxWindowsMacOS​Para instalar a CLI no seu sistema macOS, você pode escolher entre a instalação via Homebrew ou baixar o arquivo tar.gz. Recomendamos a instalação através da ferramenta Homebrew, pois ela facilita a atualização da CLI e garante que todas as dependências necessárias estejam instaladas e será mais fácil manter a CLI atualizada.Homebrew​Para instalar a CLI utilizar a ferramenta brew, você precisa ter certeza de que ela está corretamente instalada no seu sistema. Visite o site oficial: HomebrewDepois abra um terminal e execute o comando de instalação:brew install magalucloud/mgc/mgccliArquivo tar.gz​A CLI possui arquivos de instalação separados para cada arquitetura. Baixe o arquivo correspondente a sua arquitetura no repositório oficial.https://github.com/MagaluCloud/mgccli/releases/Tenha certeza de que seu usuário possui permissão sudo.Abra um terminal e execute o seguinte comando para criar um diretório dedicado a CLI na sua home de usuário.mkdir ~/mgc_cliExecute o comando abaixo no mesmo diretório onde está o arquivo .tar.gz. Atualize o nome do arquivo de acordo com aquele que você baixou.tar -xvf mgc_0.18.3_linux_amd64.tar.gz -C ~/mgc_cli Para melhor experiência com a CLI, recomendamos que o diretório de instalação seja adicionado na variável PATH. Rode o comando abaixo e depois adicione essa linha ao arquivo ~/.bashrc ou ~/.zshrc dependendo do seu shell.export PATH=$HOME/mgc_cli:$PATHATENÇÃO: Será necessário dar permissão de execução ao binário. Na primeira vez que você executá-lo no terminal, o macOS
exibirá um alerta. Ignore o alerta e vá até "Configurações do Sistema", na aba "Privacidade e Segurança". Lá você deverá confirmar que aceita a execução do binário "mgc".Linux​Disponibilizamos pacotes .deb e .rpm para instalação em sistemas baseados em Debian e Red Hat, além do arquivo tar.gz para instalação manual.Debian / Ubuntu​Para instalar a CLI apartir do pacote deb, basta executar o comando abaixo em um terminal dentro do diretório onde está o pacote. Atualize o nome do arquivo .deb de acordo com aquele que você baixou.sudo dpkg -i mgc_x.xx.x_linux_amd64.debFedora / CentOS​Para instalar a CLI apartir do pacote rpm, basta executar o comando abaixo no mesmo diretório onde está o pacote. Atualize o nome do arquivo .rpm de acordo com aquele que você baixou.sudo rpm -i mgc_x.xx.x_linux_amd64.rpmArquivo tar.gz​A CLI possui arquivos de instalação separados para cada arquitetura. Baixe o arquivo correspondente a sua arquitetura no repositório oficial.https://github.com/MagaluCloud/mgccli/releases/Tenha certeza de que seu usuário possui permissão sudo.Abra um terminal e execute o seguinte comando para criar um diretório dedicado a CLI na sua home de usuário.mkdir ~/mgc_cliExecute o comando abaixo no mesmo diretório onde está o arquivo .tar.gz. Atualize o nome do arquivo de acordo com aquele que você baixou.tar -xvf mgc_0.18.3_linux_amd64.tar.gz -C ~/mgc_cli Para melhor experiência com a CLI, recomendamos que o diretório de instalação seja adicionado na variável PATH. Rode o comando abaixo e depois adicione essa linha ao arquivo ~/.bashrc ou ~/.zshrc dependendo do seu shell.export PATH=$HOME/mgc_cli:$PATHWindows​A CLI possui arquivos de instalação separados para cada arquitetura. Baixe o arquivo correspondente a sua arquitetura (amd64 / arm) no repositório oficial.https://github.com/MagaluCloud/mgccli/releases/Para instalar a CLI no seu sistema Windows 10/11 siga os passos abaixo.
Extraia o conteúdo do arquivo ZIP para uma pasta de sua preferência.
Abra um Prompt de Comando ou terminal Powershell na pasta onde você extraiu os arquivos.
Rode o comando abaixo para confirmar a instalação:
mgc --version
Adicione a CLI na variável de ambiente PATH para melhor experiência. Atualize o caminho para o diretório onde você extraiu a CLI e execute o comando abaixo.
$env:Path += ";C:\Users\your-user\mgc-cli"

---

Autenticação
Autenticação Padrão​
Para fazer a autenticação na CLI e ter sua credencial armazenada no arquivo de configuração, utilize o seguinte comando:
mgc auth login
Este comando abrirá uma janela do seu navegador padrão diretamente no site do ID Magalu, onde você deverá fazer seu login. Ao
terminar o procedimento e fechar o navegador, a CLI exibirá a confirmação e seu token de acesso será salvo no arquivo $HOME/.config/mgc/<PERFIL>/auth.yaml
Onde PERFIL é o nome do perfil que você deseja configurar.
Caso precise do token de acesso para usar com a API da Magalu Cloud, digite o comando abaixo:
mgc auth access-token
Autenticação com API Key​
infoA autenticação com API Key é indicada para criação de automações ou scripts.
Para utilizar a API Key, o primeiro passo é criar uma.
Nós oferecemos duas formas de utilização:
1. API Key como variável de ambiente​
Para utilizar a API Key como variável de ambiente, basta configurar as variáveis
Desta forma, ao utilizar a CLI, automaticamente já usará a API Key como forma de autenticação.
warningCaso não queira mais utilizar a API Key como forma de autentação, é necessário remover a variável de ambiente.
2. API Key diretamente no comando​
Para utilizar a API Key na execução dos comandos, é necessário adicionar a flag --api-key="api-key-value"
mgc vm instances list --api-key="api-key-value"
Autenticação Headless​
A autenticação Headless poderá ser útil caso esteja realizando o processo em uma máquina virtual onde não possui um browser.
Siga o passo a passo:

Na máquina virtual, com a CLI já instalada execute o comando no terminal

mgc auth login --headless


Copie a URL gerada para uma máquina com browser.


Realize o Login no ID Magalu.


Você será redirecionado para uma URL localhost, copie essa URL inteira.


Cole esta URL no terminal da máquina virtual.



---

Administrar Workspaces
A CLI possui uma ferramenta muito útil para agrupar configurações semelhantes e permitir que você alterne entre elas quando necessário: os workspaces.
Com os workspaces você pode, por exemplo, ter uma configuração diferente para cada região ou para cada tenant que deseja usar. Dessa forma, você não precisa alterar todas as configurações sempre que alternar entre regiões ou tenants, basta trocar o workspace.
mgc workspace
Os comandos disponíveis para gestão de workspaces são: create, delete, current, list, set-current e select-current.
Para criar um workspace novo, basta rodar o comando abaixo, fornecendo o nome do novo workspace.
mgc workspace create "meu-workspace"
Você pode agora listar todos os workspaces disponíveis na sua configuração local com o comando abaixo.
mgc workspace list
E para definir o novo workspace como ativo, você pode usar os comandos set-current ou select-current, como mostrado nos exemplos abaixo.
mgc workspace set-current "meu-workspace"
O comando select permite a seleção interativa, facilitada.
mgc workspace select-current
Se desejar apagar um workspace existente, basta executar o comando delete.
mgc workspace delete "meu-workspace"
IMPORTANTE: os workspaces são armazenados localmente nos arquivos de configuração da CLI. Se você instalar a CLI em outro sistema, os workspaces não serão automaticamente disponibilizados na nova instalação.

---

Administrar Tenants
A CLI permite selecionar sobre qual tenant os comandos serão executados. Para isso há uma area de gestão de tenants na opção auth tenant.
mgc auth tenant
Aqui você pode listar os tenant disponíveis com o comando abaixo.
mgc auth tenant list
Verificar qual o tenant ativo no momento (current):
mgc auth tenant current
E alterar o tenant ativo, dentre os disponíveis. Para isso existem duas formas.
Usando o comando set e informando qual o tenant desejado explicitamente apontando para seu UUID.
mgc auth tenant set ad468668-4cd4-4336-905e-90a390502e97
Ou então usando o comando select, que torna esse processo muito mais fácil, porque exibirá na tela a lista de tenants disponíveis em modo de seleção interativo.
mgc auth tenant select

---

Configurando a CLI
É possível definir configurações padrão a serem utilizadas em todos os comandos, entregando uma experiênciua mais fluida no uso da CLI. Vamos ver algumas das opções.
Definir padrão de formato de saída​
O comando abaixo executa a alteração permanente do tipo de saída da CLI para JSON, ou seja, todos os comandos executados após este terão suas saídas nesse formato se não houver um outro formato especificado na linha do comando.
mgc config set --key defaultOutput --value json
Outros valores possíveis para essa configuração seriam: jsonpath-file, table, table-file, template, template-file, yaml, json, jsonpath.
Para mais detalhes de como utilizar cada um dos formatos, execute o comando de ajuda abaixo.
mgc --cli.output help
Neste guia vamos utilizar como padrão a saída do tipo json.
Se você desejar alterar o formato de saída para um comando específico, basta adicionar a flag -o seguida do formato desejado. Abaixo segue um exemplo:
mgc virtual-machines instances list -o table
Definir região​
Ao definir uma região padrão para a CLI todos os comandos executados farão referência a ela,
salvo se outra região for informada na linha de comando. Para definir a região padrão como
sendo br-ne1 execute o comando abaixo.
mgc config set --key region --value br-ne1
Há outros valores possíveis para essa variável de configuração, como por exemplo br-se1 .
Consulte a lista de regiões disponíveis rodando o comando abaixo.
mgc config get-schema region -o jsonpath=$.enum
Remover highlights para scripts​
Caso esteja utilizando a CLI em scripts, é comum querer remover os highlights (cores, loading...) das operações, para isso, baste utilizar a flag --raw ao final dos comandos, exemplo:
mgc vm instances list --raw
Outras configurações​
Existem outras opções de configuração disponíveis:

Chunk Size: tamanho do chunk em requisições multipart de Object Storage.
Workers: número de processos paralelos em operações do Object Storage.

Você pode listar todas as configurações disponíveis com o comando abaixo.
mgc config list
E se desejar alterar qualquer uma delas, basta executar o comando config set com o nome da configuração (key) e do valor (value) a ser aplicado.
mgc config set --key nome_da_config --value valor_a_aplicar
Arquivo local de configurações​
As configurações alteradas pela CLI serão armazenadas em um arquivo local dentro da sua pasta de usuário: $HOME/.config/mgc/<PERFIL>/cli.yaml
No Windows essa pasta se localiza em: $env:APPDATA\mgc\<PERFIL>\
Onde <PERFIL> é o nome do perfil que você deseja configurar.

---

Commands-reference
This CLI is a dynamic processor of OpenAPI files that
can generate a command line on-demand for Rest manipulation
Usage:​
Usage:  ./mgc [flags]  ./mgc [command]
Product catalog:​

Product catalog:
auth               Actions with ID Magalu to log in, refresh tokens, change tenants and others
block-storage      Block Storage API Product Documentation
config             Manage Configuration values
container-registry Magalu Container Registry product API.
dbaas              DBaaS API Product.
kubernetes         APIs related to the Kubernetes product.
network            APIs referentes ao produto de VPC
object-storage     Operations for Object Storage API
profile            Profile related commands
virtual-machine    Virtual Machine Api Product

Other commands:​

Other commands:
completion         Generate the autocompletion script for the specified shell
dump-tree          Print command tree
help               Help about any command

Flags:​
Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text  -h, --help                   help for ./mgc  -v, --version                version for ./mgc

---

Auth
The authentication credentials set here will be used as a basis for a variety
of HTTP requests using the MgcSDK. Authentication is done via Magalu Cloud account
(Object Storage requires special keys, refer to it for more info)
Usage:​
Usage:  ./mgc auth [flags]  ./mgc auth [command]
Product catalog:​

Commands:
access-token Retrieve the access token used in the APIs
clients      Manage Clients (Oauth Applications) to use ID Magalu
login        Authenticate with Magalu Cloud
tenant       Manage Tenants

Other commands:​

Flags:
-h, --help   help for auth

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Login
Log in to your Magalu Cloud account. When you login with this command,
the current Tenant will always be set to the default one. To see more details
about a successful login, use the '--show' flag when logging in
Usage:​
Usage:  ./mgc auth login [flags]
Product catalog:​

Flags:
--headless               Generate URL for the login at local environment
-h, --help                   help for login
--qrcode                 Generate a qrcode for the login URL
--scopes array(string)   All desired scopes for the resulting access token
--show                   Show the access token after the login completes

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Access_token
Retrieve the access token used in the APIs
Usage:​
Usage:  ./mgc auth access-token [flags]
Product catalog:​

Aliases:
access-token, access_token

Other commands:​

Flags:
-h, --help       help for access-token
--validate   Validate the token, refreshing if needed

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Clients
Manage Clients (Oauth Applications) to use ID Magalu
Usage:​
Usage:  ./mgc auth clients [flags]  ./mgc auth clients [command]
Product catalog:​

Commands:
create      Create new client (Oauth Application)
list        List user clients
update      Update a client (Oauth Application)

Other commands:​

Flags:
-h, --help   help for clients

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List user clients
Usage:​
Usage:  ./mgc auth clients list [flags]
Product catalog:​

Flags:
-h, --help   help for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Create
Create new client (Oauth Application)
Usage:​
Usage:  ./mgc auth clients create [name] [description] [redirect-uris] [icon] [access-token-expiration] [always-require-login] [client-privacy-term-url] [terms-of-use] [audiences] [backchannel-logout-session-enabled] [backchannel-logout-uri] [oidc-audiences] [refresh-token-custom-expires-enabled] [refresh-token-expiration] [reason] [flags]
Product catalog:​

Examples:

./mgc auth clients create --access-token-expiration=7200 --audiences="public" --description="Client description" --name="Client Name" --refresh-token-expiration=15778476
Other commands:​

Flags:
--access-token-expiration integer        Access token expiration (in seconds)
--always-require-login                   Must ignore active Magalu ID session and always require login
--audiences string                       Client audiences (separated by space)
--backchannel-logout-session-enabled     Client requires backchannel logout session
--backchannel-logout-uri string          Backchannel logout URI
--client-privacy-term-url string         URL to privacy term (required)
--description string                     Description of new client (required)
-h, --help                                   help for create
--icon string                            URL for client icon
--name string                            Name of new client (required)
--oidc-audiences string                  Audiences for ID token
--reason string                          Note to inform the reason for creating the client. Will help with the application approval process (required)
--redirect-uris string                   Redirect URIs (separated by space) (required)
--refresh-token-custom-expires-enabled   Use custom value for refresh token expiration
--refresh-token-expiration integer       Custom refresh token expiration value (in seconds)
--terms-of-use string                    URL to terms of use (required)

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Update
Update a client (Oauth Application)
Usage:​
Usage:  ./mgc auth clients update [id] [name] [description] [redirect-uris] [icon] [access-token-expiration] [always-require-login] [client-privacy-term-url] [terms-of-use] [audiences] [backchannel-logout-session-enabled] [backchannel-logout-uri] [oidc-audiences] [refresh-token-custom-expires-enabled] [refresh-token-expiration] [reason] [flags]
Product catalog:​

Examples:

./mgc auth clients update --access-token-expiration=7200 --audiences="public" --description="Client description" --name="Client Name" --refresh-token-expiration=15778476
Other commands:​

Flags:
--access-token-expiration integer        Access token expiration (in seconds)
--always-require-login                   Must ignore active Magalu ID session and always require login
--audiences string                       Client audiences (separated by space)
--backchannel-logout-session-enabled     Client requires backchannel logout session
--backchannel-logout-uri string          Backchannel logout URI
--client-privacy-term-url string         URL to privacy term
--description string                     Description of new client
-h, --help                                   help for update
--icon string                            URL for client icon
--id string                              UUID of client (required)
--name string                            Name of new client
--oidc-audiences string                  Audiences for ID token
--reason string                          Note to inform the reason for creating the client. Will help with the application approval process
--redirect-uris string                   Redirect URIs (separated by space)
--refresh-token-custom-expires-enabled   Use custom value for refresh token expiration
--refresh-token-expiration integer       Custom refresh token expiration value (in seconds)
--terms-of-use string                    URL to terms of use

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Tenant
Tenants work like sub-accounts. You may have more than one Tenant under your
Magalu Cloud account and they each store their data separately, but are billed
under the same account
Usage:​
Usage:  ./mgc auth tenant [flags]  ./mgc auth tenant [command]
Product catalog:​

Commands:
current     Get the currently active Tenant
list        List all available tenants for current login
set         Set the active Tenant to be used for all subsequent requests

Other commands:​

Additional Commands:
select      call "list", prompt selection and then "set"

Flags:​
Flags:  -h, --help   help for tenant

---

List
List all available tenants for current login
Usage:​
Usage:  ./mgc auth tenant list [flags]
Product catalog:​

Flags:
-h, --help   help for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Current
The current Tenant is used for all Magalu HTTP requests
Usage:​
Usage:  ./mgc auth tenant current [flags]
Product catalog:​

Flags:
-h, --help   help for current

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Set
Set the active Tenant to be used for all subsequent requests
Usage:​
Usage:  ./mgc auth tenant set [uuid] [flags]
Product catalog:​

Flags:
-h, --help          help for set
--uuid string   The UUID of the desired Tenant. To list all possible IDs, run auth tenant list (required)

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​
** If you have an API Key set, changing the tenant will unset it.

---

Block-storage
Block Storage API Product Documentation
Usage:​
Usage:  ./mgc block-storage [flags]  ./mgc block-storage [command]
Product catalog:​

Aliases:
block-storage, bs, blocks, blst

Other commands:​

Commands:
snapshots    Operations with snapshots for volumes.
volume-types Operations with volume types for volumes.
volumes      Operations with volumes, including create, delete, extend, retype, list and other actions.

Flags:​
Flags:  -h, --help      help for block-storage  -v, --version   version for block-storage

---

Snapshots
Operations with snapshots for volumes.
Usage:​
Usage:  ./mgc block-storage snapshots [flags]  ./mgc block-storage snapshots [command]
Product catalog:​

Commands:
create      Create a snapshot
delete      Delete a snapshot
get         Retrieve the details of a snapshot
list        List snapshots in the current tenant
rename      Rename a snapshot
restore     Restore a snapshot to a new volume

Other commands:​

Flags:
-h, --help      help for snapshots
-v, --version   version for snapshots

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Retrieve a list of Snapshots for the currently authenticated tenant.
Usage:​
#### Notes- Use the expand argument to obtain additional details about the Volume used to create each Snapshot.
Product catalog:​

Usage:

./mgc block-storage snapshots list [flags]
Other commands:​

Flags:
--control.limit integer     Limit (default 50)
--control.offset integer    Offset
--control.sort string       Sort (pattern: ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "created_at:asc")
--expand array(enum)       Expand (default [])
-h, --help                     help for list
-v, --version                  version for list

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Create
Create a Snapshot for the currently authenticated tenant.
Usage:​
The Snapshot can be used when it reaches the "available" state and the "completed" status.
Product catalog:​


Rules​



The Snapshot name must be unique; otherwise, the creation will be disallowed.




Creating Snapshots from restored Volumes may lead to future conflicts as


you can't delete a Volume with an Snapshot and can't delete a Snapshot with a
restored Volume, so we recommend avoiding it.

Other commands:​


Notes​



Use the block-storage volume list command to retrieve a list of all


Volumes and obtain the ID of the Volume that will be used to create the
Snapshot.

Flags:​
Usage:  ./mgc block-storage snapshots create [flags]

---

Delete
Delete a Snapshot for the currently authenticated tenant.
Usage:​
#### Rules- The Snapshot's status must be "completed".- The Snapshot's state must be "available".- Deleting a Snapshot that has been restored is not possible. If necessary, delete the restored Volume first and then proceed to delete the Snapshot.
Product catalog:​


Notes​



Utilize the block-storage snapshots list command to retrieve a list of


all Snapshots and obtain the ID of the Snapshot you wish to delete.


If needed, you can use the block-storage volume list command to retrieve


a list of all Volumes and obtain the ID of the restored Volume.

Other commands:​

Usage:

./mgc block-storage snapshots delete [id] [flags]
Flags:​
Flags:  -h, --help      help for delete      --id uuid   Id (required)  -v, --version   version for delete

---

Get
Retrieve details of a Snapshot for the currently authenticated tenant.
Usage:​
#### Notes- Use the **expand** argument to obtain additional details about the Volume used to create the Snapshot.- Utilize the **block-storage snapshots list** command to retrieve a list of all Snapshots and obtain the ID of the Snapshot for which you want to retrieve details.
Product catalog:​

Usage:

./mgc block-storage snapshots get [id] [flags]
Other commands:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--expand array(enum)            Expand (default [])
-h, --help                          help for get
--id uuid                       Id (required)
-v, --version                       version for get

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Rename
Rename a Snapshot for the currently authenticated tenant.
Usage:​
#### Rules- The Snapshot name must be unique; otherwise, renaming will not be allowed.
Product catalog:​


Notes​



Utilize the block-storage snapshots list command to retrieve a list of


all Snapshots and obtain the ID of the Snapshot you wish to rename.

Other commands:​

Usage:

./mgc block-storage snapshots rename [id] [flags]
Flags:​
Flags:      --cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")      --cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'  -h, --help                          help for rename      --id uuid                       Id (required)      --name string                   Name (between 1 and 255 characters) (required)  -v, --version                       version for rename

---

Restore
Restore a Snapshot on a new Volume to the currently
authenticated tenant.
Usage:​
The restored Volume can be used when it reaches the "available" state and the "completed" status.
Product catalog:​


Notes​



To obtain the ID of the Snapshot you wish to restore, you can use the


block-storage snapshots list command to list all Snapshots.


Check the state and status of your Volume using the


block-storage volume get --id [uuid] command.

Other commands:​

Usage:

./mgc block-storage snapshots restore [snapshot-id] [flags]
Flags:​
Flags:      --cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")      --cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'  -h, --help                          help for restore      --name string                   Name (min character count: 1) (required)      --snapshot-id uuid              Snapshot Id (required)  -v, --version                       version for restore

---

Volume-attachment
Block Storage Volume Attachment
Usage:​
Usage:  ./mgc block-storage volume-attachment [flags]  ./mgc block-storage volume-attachment [command]
Product catalog:​

Commands:
create      Attach a volume to a virtual machine instance
delete      Detach a volume from a virtual machine instance
get         Check if a volume is attached to a virtual machine instance

Other commands:​

Flags:
-h, --help   help for volume-attachment

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Attach a volume to a virtual machine instance
Usage:​
Usage:  ./mgc block-storage volume-attachment create [flags]
Product catalog:​

Flags:
--block-storage-id uuid         Id
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'
-h, --help                          help for create
--virtual-machine-id uuid       Virtual Machine Id

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Delete
Detach a volume from a virtual machine instance
Usage:​
Usage:  ./mgc block-storage volume-attachment delete [flags]
Product catalog:​

Flags:
--block-storage-id uuid     Id
-h, --help                      help for delete
--virtual-machine-id uuid   Virtual Machine Id

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Get
Check if a volume is attached to a virtual machine instance
Usage:​
Usage:  ./mgc block-storage volume-attachment get [flags]
Product catalog:​

Flags:
--block-storage-id uuid     Id
-h, --help                      help for get
--virtual-machine-id uuid   Virtual Machine Id

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Volume-types
Operations with volume types for volumes.
Usage:​
Usage:  ./mgc block-storage volume-types [flags]  ./mgc block-storage volume-types [command]
Product catalog:​

Commands:
list        List volume types

Other commands:​

Flags:
-h, --help      help for volume-types
-v, --version   version for volume-types

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List Volume Types allowed in the current region.
Usage:​
#### Notes
Product catalog:​



Volume types are managed internally. If you wish to use a Volume Type that


is not yet available, please contact our support team for assistance.

Other commands:​

Usage:

./mgc block-storage volume-types list [flags]
Flags:​
Flags:  -h, --help      help for list  -v, --version   version for list

---

Volumes
Operations with volumes, including create, delete, extend, retype, list and other actions.
Usage:​
Usage:  ./mgc block-storage volumes [flags]  ./mgc block-storage volumes [command]
Product catalog:​

Commands:
attach      Attach a Volume
create      Create a new Volume
delete      Delete a Volume
detach      Detach a Volume
extend      Extend a Volume
get         Retrieve the details of a volume
list        List all Volumes
rename      Rename a volume
retype      Retype a Volume

Other commands:​

Flags:
-h, --help      help for volumes
-v, --version   version for volumes

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Config
Configuration values are available to be set so that they persist between
different executions of the MgcSDK. They reside in a YAML file when set.
Config values may also be loaded via Environment Variables. Any Config available
(see 'list') may be exported as an env variable in uppercase with the 'MGC_' prefix
Usage:​
Usage:  ./mgc config [flags]  ./mgc config [command]
Product catalog:​

Aliases:
config, conf

Other commands:​

Commands:
delete      Delete/unset a Config value that had been previously set
get         Get a specific Config value that has been previously set
get-schema  Get the JSON Schema for the specified Config
list        List all available Configs
set         Set a specific Config value in the configuration file

Flags:​
Flags:  -h, --help   help for config

---

List
List all available Configs
Usage:​
Usage:  ./mgc config list [flags]
Product catalog:​

Flags:
-h, --help   help for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Delete
Delete/unset a Config value that had been previously set. This does not
affect the environment variables
Usage:​
Usage:  ./mgc config delete [key] [flags]
Product catalog:​

Flags:
-h, --help         help for delete
--key string   Name of the config to be deleted (required)

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Get-schema
Get the JSON Schema for the specified Config. The Schema has
information about the accepted values for the Config, constraints, type, description, etc.
Usage:​
Usage:  ./mgc config get-schema [key] [flags]
Product catalog:​

Flags:
-h, --help         help for get-schema
--key string    (required)

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Get
Get a specific Config value that has been previously set. If there's an env variable
matching the key (in uppercase and with the 'MGC_' prefix), it'll be retreived.
Otherwise, the value will be searched for in the YAML file
Usage:​
Usage:  ./mgc config get [key] [flags]
Product catalog:​

Flags:
-h, --help         help for get
--key string   Name of the desired config (required)

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Set
Set a specific Config value in the configuration file
Usage:​
Usage:  ./mgc config set [key] [value] [flags]
Product catalog:​

Flags:
-h, --help             help for set
--key string       Name of the desired config (required)
--value anyValue   New flag value
Use --value=help for more details (required)

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:​


---

Container-registry
Magalu Container Registry product API.
Usage:​
Usage:  ./mgc container-registry [flags]  ./mgc container-registry [command]
Product catalog:​

Commands:
credentials  Routes related to credentials to login to Docker.
images       Routes related to listing and deletion of images.
registries   Routes related to creation, listing and deletion of registries.
repositories Routes related to listing and deletion of repositories.

Other commands:​

Flags:
-h, --help      help for container-registry
-v, --version   version for container-registry

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Credentials
Routes related to credentials to login to Docker.
Usage:​
Usage:  ./mgc container-registry credentials [flags]  ./mgc container-registry credentials [command]
Product catalog:​

Commands:
list        Get credentials for container registry

Other commands:​

Flags:
-h, --help      help for credentials
-v, --version   version for credentials

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Return container registry user's authentication credentials.
Usage: ​
Usage:  ./mgc container-registry credentials list [flags]
Product catalog:​

Flags:
-h, --help      help for list
-v, --version   version for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Images
Routes related to listing and deletion of images.
Usage:​
Usage:  ./mgc container-registry images [flags]  ./mgc container-registry images [command]
Product catalog:​

Commands:
delete      Delete image by digest or tag
get         Get image details
list        List images in container registry repository

Other commands:​

Flags:
-h, --help      help for images
-v, --version   version for images

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List all images in container registry repository
Usage:​
Usage:  ./mgc container-registry images list [registry-id] [repository-name] [flags]
Product catalog:​

Flags:
--control.limit integer    Limit (min: 1)
--control.offset integer   Offset (min: 0)
--control.sort string      Fields to use as reference to sort. (pattern: (^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "pushed_at:desc")
--expand array(string)     You can get more detailed info about: ['tags_details', 'extra_attr', 'manifest_media_type', 'media_type']
-h, --help                     help for list
--registry-id uuid         Container Registry's UUID. (required)
--repository-name string   Repository's name. (required)
-v, --version                  version for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Delete
Delete repository image by digest or tag
Usage:​
Usage:  ./mgc container-registry images delete [registry-id] [repository-name] [digest-or-tag] [flags]
Product catalog:​

Flags:
--digest-or-tag string     Digest or tag of an image (required)
-h, --help                     help for delete
--registry-id uuid         Container Registry's UUID. (required)
--repository-name string   Repository's name. (required)
-v, --version                  version for delete

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Get
Show detailed information about the image.
Usage:​
Usage:  ./mgc container-registry images get [registry-id] [repository-name] [digest-or-tag] [flags]
Product catalog:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--digest-or-tag string          Digest or tag of an image. (required)
-h, --help                          help for get
--registry-id uuid              Container Registry's UUID. (required)
--repository-name string        Repository's name. (required)
-v, --version                       version for get

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Registries
Routes related to creation, listing and deletion of registries.
Usage:​
Usage:  ./mgc container-registry registries [flags]  ./mgc container-registry registries [command]
Product catalog:​

Commands:
create      Create a container registry
delete      Delete a container registry by registry_id
get         Get registry information
list        List all container registries

Other commands:​

Flags:
-h, --help      help for registries
-v, --version   version for registries

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List user's container registries.
Usage:​
Usage:  ./mgc container-registry registries list [flags]
Product catalog:​

Flags:
--control.limit integer    Limit (min: 1)
--control.offset integer   Offset (min: 0)
--control.sort string      Fields to use as reference to sort. (pattern: (^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "created_at:asc")
-h, --help                     help for list
-v, --version                  version for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Create
Creates a container registry in Magalu Cloud.
Usage:​
Usage:  ./mgc container-registry registries create [flags]
Product catalog:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'
-h, --help                          help for create
--name string                   A unique, global name for the container registry. It must be written in lowercase letters and consists only of numbers and letters, up to a limit of 63 characters. (required)
-v, --version                       version for create

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Delete
Delete a container registry by uuid.
Usage:​
Usage:  ./mgc container-registry registries delete [registry-id] [flags]
Product catalog:​

Flags:
-h, --help               help for delete
--registry-id uuid   Container Registry's UUID. (required)
-v, --version            version for delete

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Get
Show detailed information about the user's container registry.
Usage:​
Usage:  ./mgc container-registry registries get [registry-id] [flags]
Product catalog:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
-h, --help                          help for get
--registry-id uuid              Container Registry's UUID. (required)
-v, --version                       version for get

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Repositories
Routes related to listing and deletion of repositories.
Usage:​
Usage:  ./mgc container-registry repositories [flags]  ./mgc container-registry repositories [command]
Product catalog:​

Commands:
delete      Delete a container registry repository by repository_name.
get         Get a container registry repository by repository_name
list        List all container registry repositories

Other commands:​

Flags:
-h, --help      help for repositories
-v, --version   version for repositories

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List all user's repositories in the container registry.
Usage:​
Usage:  ./mgc container-registry repositories list [registry-id] [flags]
Product catalog:​

Flags:
--control.limit integer    Limit (min: 1)
--control.offset integer   Offset (min: 0)
--control.sort string      Fields to use as reference to sort. (pattern: (^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "created_at:desc")
-h, --help                     help for list
--registry-id uuid         Container Registry's UUID. (required)
-v, --version                  version for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Delete
Delete a repository by name.
Usage:​
Usage:  ./mgc container-registry repositories delete [registry-id] [repository-name] [flags]
Product catalog:​

Flags:
-h, --help                     help for delete
--registry-id uuid         Container Registry's UUID. (required)
--repository-name string   Repository's name. (required)
-v, --version                  version for delete

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Get
Return detailed repository's information filtered by name.
Usage:​
Usage:  ./mgc container-registry repositories get [registry-id] [repository-name] [flags]
Product catalog:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
-h, --help                          help for get
--registry-id uuid              Container Registry's UUID. (required)
--repository-name string        Repository's name. (required)
-v, --version                       version for get

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Dbaas
DBaaS API Product.
Usage:​
Usage:  ./mgc dbaas [flags]  ./mgc dbaas [command]
Product catalog:​

Aliases:
dbaas, database, db

Other commands:​

Commands:
backups     Database backups management.
datastores  Datastores available for database instances.
engines     Engines available for database instances.
flavors     Flavors available for database instances.
instances   Database instances management.
replicas    Database replicas management.

Flags:​
Flags:  -h, --help      help for dbaas  -v, --version   version for dbaas

---

Backups
Database backups management.
Usage:​
Usage:  ./mgc dbaas backups [flags]  ./mgc dbaas backups [command]
Product catalog:​

Commands:
delete      Delete Backup.
get         Backup Detail.
list        Backups List.

Other commands:​

Flags:
-h, --help      help for backups
-v, --version   version for backups

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Datastores
Datastores available for database instances.
Usage:​
Usage:  ./mgc dbaas datastores [flags]  ./mgc dbaas datastores [command]
Product catalog:​

Commands:
get         Datastore detail (Deprecated).
list        List available datastores (Deprecated).

Other commands:​

Flags:
-h, --help      help for datastores
-v, --version   version for datastores

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Deprecated: This endpoint is being phased out. Please use the /v1/engines endpoint to retrieve the list of available engines instead.
Usage:​
Returns a list of available datastores. It is recommended to update your integration to use the newer `/v1/engines` endpoint for improved functionality and future compatibility.
Product catalog:​

Usage:

./mgc dbaas datastores list [flags]
Other commands:​

Flags:
--control.limit integer    The maximum number of items per page. (range: 1 - 50) (default 10)
--control.offset integer   The number of items to skip before starting to collect the result set. (min: 0)
-h, --help                     help for list
--status enum              Value referring to engine status. (one of "ACTIVE" or "DEPRECATED")
-v, --version                  version for list

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Engines
Engines available for database instances.
Usage:​
Usage:  ./mgc dbaas engines [flags]  ./mgc dbaas engines [command]
Product catalog:​

Commands:
get         Engine detail.
list        List available engines.

Other commands:​

Flags:
-h, --help      help for engines
-v, --version   version for engines

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Get
Returns a engine detail.
Usage:​
Usage:  ./mgc dbaas engines get [engine-id] [flags]
Product catalog:​

Flags:
--engine-id uuid   Datastore Id (Deprecated): Value referring to datastore Id. (required)
-h, --help             help for get
-v, --version          version for get

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Flavors
Flavors available for database instances.
Usage:​
Usage:  ./mgc dbaas flavors [flags]  ./mgc dbaas flavors [command]
Product catalog:​

Commands:
get         Flavor detail.
list        List available flavors.

Other commands:​

Flags:
-h, --help      help for flavors
-v, --version   version for flavors

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Instances
Database instances management.
Usage:​
Usage:  ./mgc dbaas instances [flags]  ./mgc dbaas instances [command]
Product catalog:​

Commands:
backups     backups
create      Creates a new database instance.
delete      Deletes a database instance.
get         Database instance details.
list        List all database instances.
resize      Resizes a database instance.
restores    Backup restore.
start       Starts a database instance.
stop        Stops a database instance.
update      Database instance update.

Other commands:​

Flags:
-h, --help      help for instances
-v, --version   version for instances

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Creates a new database instance asynchronously for a tenant.
Usage:​
Usage:  ./mgc dbaas instances create [flags]
Product catalog:​

Examples:

./mgc dbaas instances create --volume.size=30
Other commands:​

Flags:
--backup-retention-days integer   Backup Retention Days: The number of days that a particular backup is kept until its deletion. (default 7)
--backup-start-at time            Backup Start At: Start time (UTC timezone) which is allowed to start the automated backup process. (default "04:00:00")
--cli.list-links enum[=table]     List all available links for this command (one of "json", "table" or "yaml")
--datastore-id uuid               Datastore Id (Deprecated): Deprecated: This property is being deprecated in favor of 'engine_id'. Please update your requests to use 'engine_id' for improved functionality and future compatibility.

--engine-id uuid                  Engine Id
--flavor-id uuid                  Flavor Id (required)
-h, --help                            help for create
--name string                     Name (max character count: 100) (required)
--parameters array(object)        Use --parameters=help for more details (default [])
--password string                 Password (max character count: 50) (required)
--user string                     User (max character count: 25) (required)
-v, --version                         version for create
--volume object                   Instance Volume Request (properties: size and type)
Use --volume=help for more details (required)
--volume.size integer             Instance Volume Request: The size of the volume (in GiB). (range: 10 - 50000)
This is the same as '--volume=size:integer'.
--volume.type enum                Instance Volume Request: The type of the volume. (one of "CLOUD_HDD", "CLOUD_NVME" or "CLOUD_NVME_15K")
This is the same as '--volume=type:enum'. (default "CLOUD_NVME_15K")

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Backups
Database instances management. | backups
Usage:​
Usage:  ./mgc dbaas instances backups [flags]  ./mgc dbaas instances backups [command]
Product catalog:​

Commands:
create      Backup Create.
delete      Delete Backup.
get         Backup Detail.
list        Backups List.

Other commands:​

Flags:
-h, --help      help for backups
-v, --version   version for backups

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Creates a new backup asynchronously.
Usage:​
Usage:  ./mgc dbaas instances backups create [instance-id] [flags]
Product catalog:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'
-h, --help                          help for create
--instance-id uuid              Value referring to instance Id. (required)
--mode enum                     Backup Mode Request: An enumeration. (must be "FULL") (required)
-v, --version                       version for create

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Replicas
Database replicas management.
Usage:​
Usage:  ./mgc dbaas replicas [flags]  ./mgc dbaas replicas [command]
Product catalog:​

Commands:
create      Replica Create.
delete      Deletes a replica instance.
get         Replica Detail.
list        Replicas List.
resize      Replica Resize.
start       Replica Start.
stop        Replica Stop.

Other commands:​

Flags:
-h, --help      help for replicas
-v, --version   version for replicas

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Creates a new replica for an instance asynchronously.
Usage:​
Usage:  ./mgc dbaas replicas create [flags]
Product catalog:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--flavor-id uuid                Flavor Id
-h, --help                          help for create
--name string                   Name (max character count: 255) (required)
--source-id uuid                Source Id (required)
-v, --version                       version for create

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Start
Start an instance replica.
Usage:​
Usage:  ./mgc dbaas replicas start [replica-id] [flags]
Product catalog:​

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
-h, --help                          help for start
--replica-id uuid               Value referring to replica Id. (required)
-v, --version                       version for start

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Http
HTTP access
Usage:​
Usage:  ./mgc http [flags]  ./mgc http [command]
Product catalog:​

Commands:
do          Execute generic http request
json        JSON HTTP access

Other commands:​

Flags:
-h, --help   help for http

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Do
Execute generic http request
Usage:​
Usage:  ./mgc http do [flags]
Product catalog:​

Flags:
--body string
--headers object           Use --headers=help for more details
-h, --help                     help for do
--method enum              (one of "DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT" or "TRACE") (required)
--security array(object)   Use --security=help for more details
--url string               Golang template with the URL (required)

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--region enum            Region to reach the service (one of "br-mgl-1", "br-ne-1" or "br-se-1") (default "br-ne-1")
--server-url uri         Manually specify the server to use

Flags:​


---

Json
JSON HTTP access
Usage:​
Usage:  ./mgc http json [flags]  ./mgc http json [command]
Product catalog:​

Commands:
delete      Call using HTTP DELETE
get         Call using HTTP GET
head        Call using HTTP HEAD
options     Call using HTTP OPTIONS
patch       Call using HTTP PATCH
post        Call using HTTP POST
put         Call using HTTP PUT
trace       Call using HTTP TRACE

Other commands:​

Flags:
-h, --help   help for json

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Kubernetes
APIs related to the Kubernetes product.
Usage:​
Usage:  ./mgc kubernetes [flags]  ./mgc kubernetes [command]
Product catalog:​

Aliases:
kubernetes, k8s, kube, kub

Other commands:​

Commands:
cluster     Endpoints related to the creation, listing, deletion, and retrieval of the kubeconfig for a Kubernetes cluster.
flavor      Endpoints related to listing available flavors for a Kubernetes cluster.
info        Endpoints related to listing available flavors (resource configurations) and Kubernetes versions for a Kubernetes cluster.
nodepool    Endpoints related to the creation, listing of nodepools and nodes, updating, and deletion of nodepools for a Kubernetes cluster.
version     Endpoints related to listing available Kubernetes versions for a Kubernetes cluster.

Flags:​
Flags:  -h, --help      help for kubernetes  -v, --version   version for kubernetes

---

Network
APIs referentes ao produto de VPC
Usage:​
Usage:  ./mgc network [flags]  ./mgc network [command]
Product catalog:​

Commands:
ports           VPC Port
public-ips      VPC Public IPs
rules           VPC Rules
security-groups VPC Security Groups
subnets         VPC Subnets
vpcs            Virtual Private Cloud (VPC)

Other commands:​

Flags:
-h, --help      help for network
-v, --version   version for network

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Object-storage
Create and manage Buckets and Objects via the Object Storage API
Usage:​
Usage:  ./mgc object-storage [flags]  ./mgc object-storage [command]
Product catalog:​

Aliases:
object-storage, object, objs

Other commands:​

Commands:
buckets     Bucket operations for Object Storage API
key-pair    Manage credentials to use Object Storage
objects     Object operations for Object Storage API

Flags:​
Flags:  -h, --help   help for object-storage

---

Buckets
Bucket operations for Object Storage API
Usage:​
Usage:  ./mgc object-storage buckets [flags]  ./mgc object-storage buckets [command]
Product catalog:​

Commands:
acl         ACL-related commands
create      Create a new Bucket
delete      Delete an existing Bucket
list        List all existing Buckets
public-url  Get bucket public url
versioning  Manage bucket versioning

Other commands:​

Flags:
-h, --help   help for buckets

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Buckets are "containers" that are able to store various Objects inside
Usage:​
Usage:  ./mgc object-storage buckets create [bucket] [flags]
Product catalog:​

Flags:
--bucket string                 Name of the bucket to be created (required)
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--enable-versioning             Enable versioning for this bucket (default true)
--grant-write array(object)     Allows grantees to create objects in the bucket
Use --grant-write=help for more details
-h, --help                          help for create
--private                       Owner gets FULL_CONTROL. Delegated users have access. No one else has access rights
--public-read                   Owner gets FULL_CONTROL. Everyone else has READ rights

Other commands:​

Global Flags:
--chunk-size integer     Chunk size to consider when doing multipart requests. Specified in Mb (range: 8 - 5120) (default 8)
--cli.show-cli-globals   Show all CLI global flags on usage text
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use
--workers integer        Number of routines that spawn to do parallel operations within object_storage (min: 1) (default 5)

Flags:​


---

Acl
ACL-related commands
Usage:​
Usage:  ./mgc object-storage buckets acl [flags]  ./mgc object-storage buckets acl [command]
Product catalog:​

Commands:
get         Get the ACL for the specified bucket
set         set permission information for the specified bucket

Other commands:​

Flags:
-h, --help   help for acl

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Versioning
Manage bucket versioning
Usage:​
Usage:  ./mgc object-storage buckets versioning [flags]  ./mgc object-storage buckets versioning [command]
Product catalog:​

Commands:
enable      Enable versioning for a Bucket
get         Get versioning info for a Bucket
suspend     Suspend versioning for a Bucket

Other commands:​

Flags:
-h, --help   help for versioning

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Key-pair
Manage credentials to use Object Storage
Usage:​
Usage:  ./mgc object-storage key-pair [flags]  ./mgc object-storage key-pair [command]
Product catalog:​

Commands:
create      Create new credentials used for Object Storage requests
current     Get the current Object Storage credentials
get         Get details about a specific key
list        List valid Object Storage credentials
revoke      Revoke credentials used in Object Storage requests
set         Change current Object Storage credential to selected

Other commands:​

Additional Commands:
select      call "list", prompt selection and then "set"

Flags:​
Flags:  -h, --help   help for key-pair

---

Objects
Object operations for Object Storage API
Usage:​
Usage:  ./mgc object-storage objects [flags]  ./mgc object-storage objects [command]
Product catalog:​

Commands:
acl          ACL related operations
copy         Copy an object from a bucket to another bucket
copy-all     Copy all objects from a bucket to another bucket
delete       Delete an object from a bucket
delete-all   Delete all objects from a bucket
download     Download an object from a bucket
download-all Download all objects from a bucket
head         Get object metadata
list         List all objects from a bucket
move         Moves one object from source to destination
move-dir     Moves objects from source to destination
presign      Generate a pre-signed URL for accessing an object
public-url   Get object public url
sync         Synchronizes a local path with a bucket
upload       Upload a file to a bucket
upload-dir   Upload a directory to a bucket
versions     Retrieve all versions of an object

Other commands:​

Flags:
-h, --help   help for objects

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Profile
Profiles hold auth and runtime configuration for the MgcSDK, like tokens and log filter settings.
Users can create as many profiles as they choose to. Auth and config operations will affect only the
current profile, so users can alter and switch between profiles without loosing the previous configuration
Usage:​
Usage:  ./mgc profile [flags]  ./mgc profile [command]
Product catalog:​

Commands:
create      Creates a new profile
delete      Deletes the profile with the specified name
get         Get current profile.
list        List all available profiles
set         Sets profile to be used

Other commands:​

Additional Commands:
select      call "list", prompt selection and then "set"

Flags:​
Flags:  -h, --help   help for profile

---

Virtual-machine
Virtual Machine Api Product
Usage:​
Usage:  ./mgc virtual-machine [flags]  ./mgc virtual-machine [command]
Product catalog:​

Aliases:
virtual-machine, vms, vm, virtual-machines, machines, vmachine

Other commands:​

Commands:
images        Operations with images for instances.
instances     Operations with instances, including create, delete, start, stop, reboot and other actions.
machine-types Operations with machine types for instances.
snapshots     Operations with snapshots for instances.

Flags:​
Flags:  -h, --help      help for virtual-machine  -v, --version   version for virtual-machine

---

Images
Operations with images for instances.
Usage:​
Usage:  ./mgc virtual-machine images [flags]  ./mgc virtual-machine images [command]
Product catalog:​

Commands:
list        Retrieves all images available in the region.

Other commands:​

Flags:
-h, --help      help for images
-v, --version   version for images

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Retrieve a list of images allowed for the current tenant which is logged in.
Usage:​
Usage:  ./mgc virtual-machine images list [flags]
Product catalog:​

Flags:
--control.limit integer     Limit (max: 2147483647) (default 50)
--control.offset integer    Offset (max: 2147483647)
--control.sort string       Sort (pattern: ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "platform:asc,end_life_at:desc")
-h, --help                     help for list
-v, --version                  version for list

Other commands:​

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:​


---

Instances
Operations with instances, including create, delete, start, stop, reboot and other actions.
Usage:​
Usage:  ./mgc virtual-machine instances [flags]  ./mgc virtual-machine instances [command]
Product catalog:​

Commands:
create      Create an instance asynchronously.
delete      Delete a instance asynchronously
get         Retrieve the details of an instance.
list        Lists all instances in the current tenant.
port        port
reboot      Reboot a running or suspended instance.
rename      Renames an instance.
retype      Changes a running or stopped instance machine type for another one.
start       Starts a running or suspended instance.
stop        Stops a running instance.
suspend     Suspends a running instance.

Other commands:​

Flags:
-h, --help      help for instances
-v, --version   version for instances

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Machine-types
Operations with machine types for instances.
Usage:​
Usage:  ./mgc virtual-machine machine-types [flags]  ./mgc virtual-machine machine-types [command]
Product catalog:​

Commands:
list        Retrieves all machine-types available in the region.

Other commands:​

Flags:
-h, --help      help for machine-types
-v, --version   version for machine-types

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Snapshots
Operations with snapshots for instances.
Usage:​
Usage:  ./mgc virtual-machine snapshots [flags]  ./mgc virtual-machine snapshots [command]
Product catalog:​

Commands:
create      Create a snapshot of a virtual machine asynchronously.
delete      Delete a Snapshot asynchronously
get         Retrieve the details of an snapshot.
list        Lists all snapshots in the current tenant.
rename      Renames a snapshot
restore     Restore a snapshot to a virtual machine

Other commands:​

Flags:
-h, --help      help for snapshots
-v, --version   version for snapshots

Flags:​
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Visão geral
As API Keys são essenciais para autenticar na Magalu Cloud, elas são versáteis e podem ser usadas em várias plataformas:

Interface de Linha de Comando (CLI)
Kit de Desenvolvimento de Software (SDK)
Terraform
Solicitações diretas de API

Componentes de uma Chave de API​
Uma chave de API consiste em três partes:

API Key: Usada para autenticação com a API Magalu, CLI, SDK e Terraform.
Key Pair ID: Parte do processo de autenticação para Objetos Magalu.
Key Pair Secret: Funciona em conjunto com o ID do Par de Chaves para autenticação de Objetos Magalu.

Uso​

A API Key autentica solicitações à API principal do Magalu e ferramentas associadas (CLI, SDK, Terraform).
O  Key Pair ID e Key Pair Secret juntos autenticam solicitações especificamente para Object Storage da Magalu.

Ao usar esses componentes adequadamente, você pode interagir de forma segura com vários serviços e recursos do Magalu.

---

Criar API Keys

🖥️ ConsoleCLI MGC👣 Inicio > Object Storage > API Key > Criar API Key
Na página de Produto de Object Storage
Clique na aba “API Keys”
Clique em “+ Criar API Key“
Insira um nome e validades para a chave
Clique em “Criar API Key”
infoAo configurar a API Key com fim de validade, ao expirar o período a chave será revogada, deixando a chave inválida para a autenticação de qualquer requisição. Chaves revogadas não poderão ser ativadas ou deletadas.warningAPI Key dará acesso total a Object Storage, permitindo que todas as ações disponíveis possam ser executadaswarningCaso queira criar sua Api Key com permissões personalizadas, siga o procedimento abaixo:
Acesse o ID Magalu (lembre-se de estar autenticado com a conta que possui os acessos necessários.)
Clique em Criar API Key
Defina um nome para a API Key
Selecione o período de expiração
Selecione Object Storage
Selecione as permissões que deseja liberar com sua Key (apenas ler / apenas criar / ambos)

Aqui está sua API Key

Após realizar a autenticação crie uma nova api-key, executando o comando abaixo alterando o campo <api-key-name> :mgc object-storage api-key create <api-key-name>Após rodar o comando anterior, retornara um UUID, você pode usar no seguinte comando para definir as chaves que usará:mgc object-storage api-key set <api-key-uuid>

---

Consultar API Keys

🖥️ ConsoleCLI MGC👣 Inicio > Object Storage > API Key
Na página de Produto de Object Storage
Clique na aba “API Keys”
Para consultar as API Keys via CLI execute o comandomgc object-storage api-key list

---

Como criar API Key

🖥️ Console>_ CLIComo criar​warningMantenha sua API Key em sigilo para evitar acessos não autorizados.A autenticação com API Key é ideal para quando você não tem a CLI instalada. Siga estas etapas simples para se autenticar:
Acesse o ID Magalu (lembre-se de estar autenticado com a conta que possui os acessos necessários.)
Clique em Criar API Key
Defina um nome para a API Key
Selecione o período de expiração
Selecione as aplicações da Magalu Cloud que deseja dar permissão

Copie a API Key

Para criar API Keys pela CLI, siga os seguintes passos:
Execute o comando:
mgc auth api-key create --name="api-key-name"
Em seguida é possível selecionar quais escopos a API Key terá acesso, selecione apertando enter nos scopes desejados.

Para finalizar, basta clicar tab, e a API Key será criada, o retorno será parecido com este:
Select scopes:   > Virtual Machine [Read]uuid: f4b2345c-fue1-4176-a525-fasdfaaa
Como o retorno só traz o UUID, é necessário consultar para obter a API Key:
mgc auth api-key get f4b2345c-fue1-4176-a525-fasdfaaaPronto, sua API Key será retornada e já poderá ser utilizada.

---

Autenticação nas APIs
Para se autenticar nas APIs da Magalu Cloud você precisará criar API Keys com os escopos que deseja dar acesso.
Para se autenticar nas APIs basta passar a API Key no header x-api-keynas requisições.
Exemplo:
curl --location 'https://api.magalu.cloud/br-ne-1/compute/v1/instances' \--header 'x-api-key: YOUR_API_KEY' \--header 'Accept: application/json'

---

Paginação e Ordenação
Paginação​
ParâmetroDescriçãoValor PadrãoExemplo_limitDetermina a quantidade de registros a serem retornados50GET /v1/intances?_limit=50_offsetPosição do registro de referência, a partir dele serão retornados os próximos N registros0GET /v1/intances?_offset=0
Ordenação​
OrdemParâmetroExemplo?_sort=campo:ascOrdena de forma AscendenteGET /v1/intances?_sort=shipping.date:asc?_sort=campo:descOrdena de forma DescendenteGET /v1/intances?_sort=shipping.date:desc

---

Tenant ID
O Tenant ID é o idenficador da conta. Nas APIs ele tem o nome de x-tenant-id.
Para saber seu tenant ID basta utilizar o seguinte comando na CLI:
mgc auth tenant current
No retorno haverá o campo uuid
uuid: afd0199e-0ff10-4a10-at80-4134131
Utilize este valor no x-tenant-id.

---

Virtual Machines

instancesgetList all instances.postCreate an instance.postAttach network interface to an instance.postDetach a non primary network interface from an instance.delDelete an instance.getRetrieve the details of a specific instance.postReboot an instance.patchRenames an instance.postChanges an instance machine-type.postStarts an instance.postStops an instance.postSuspends instance.imagesgetRetrieves all images.machine-typesgetRetrieves all machine-types.snapshotsgetLists all snapshots.postCreate a snapshot of an instance.delDelete a Snapshot.getRetrieve the details of an snapshot.postRestore a snapshot to an instance.patchRenames a snapshot.backupsgetLists all backups in the current tenant.postCreate a backup of a virtual machine asynchronously.delDelete a backup of a virtual machine asynchronously.getRetrieve the details of a backup.postCopy a backup of a virtual machine asynchronously.patchRenames a backuppostRestore a backup to a virtual machineAPI docs by RedoclyVirtual Machine Api Product - v1 (v1)Virtual Machine Api Product
instancesOperations with instances, including create, delete, start, stop, reboot and other actions.
List all instances. List Virtual Machine instances in the current tenant which is logged in.
Notes

You can use the extend argument to get more details from the inner objects
like image or type.

query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
expandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type', 'machine-types', 'network'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
get/v1/instancesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instancesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"instances": [{"availability_zone": "br-regiao-1a","created_at": "2022-06-10T18:33:12Z","error": {"message": "An error occurred while creating your instance. Please contact our support for assistance.","slug": "create_instance.keypair.not_found"},"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","image": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"name": "instance name","network": {"ports": [{"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}]},"ssh_key_name": "keypair_name_here","state": "running","status": "completed","updated_at": "2022-06-11T18:33:12Z","user_data": "base64_data"}]}Create an instance. Creates a Virtual Machine instance in the current tenant which is logged in.
An instance is ready for you to use when it's in the running state.
Notes

For the image data, you can use the virtual-machine images list command
  to list all available images.
For the machine type data, you can use the virtual-machine machine-types
  list command to list all available machine types.
You can verify the state of your instance using the virtual-machine get
command.

Rules

If you don't specify a VPC, the default VPC will be used. When the
default VPC is not available, the command will fail.
If you don't specify an network interface, an default network interface
will be created.
You can either specify an image id or an image name. If you specify
both, the image id will be used.
You can either specify a machine type id or a machine type name. If
you specify both, the machine type id will be used.
You can either specify an VPC id or an VPC name. If you specify both,
the VPC id will be used.
The user data must be a Base64 encoded string.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  machine_typerequiredID (object) or Name (object) (Machine Type)  ssh_key_namerequiredstring (Ssh key Name)   >= 0 characters  imagerequiredID (object) or Name (object) (Image)  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  networkInstanceCreateRequestV1NetworkDefault (object) or null Default:  {"vpc":{"name":"default"},"associate_public_ip":true} user_dataUsed to perform automated configuration tasks. (string) or Used to perform automated configuration tasks. (null) (Used to perform automated configuration tasks.)  Responses201 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instancesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instancesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","image": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"name": "instance name","network": {"associate_public_ip": true,"interface": {"security_groups": [{"id": "f273fbde-2ddf-4dcd-8c41-342671ac0d17"},{"id": "02a2acf3-d6db-4424-ac97-0254cb9c329e"}]},"vpc": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}},"ssh_key_name": "keypair_name_here","user_data": "some_base64_script"} Response samples 201400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Attach network interface to an instance. Attach network interface to an instance for a default project.
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredinstancerequiredID (object) or Name (object) (Instance)  networkrequiredobject (NICRequestInterfaceField)  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instances/network-interface/attachServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/network-interface/attachServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/network-interface/attach Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "c47e974f-8002-46e9-8a63-d66505be2aa1"},"network": {"interface": {"id": "31dcb3ea-9320-4122-8fea-3a3b06114ca1"}}} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Detach a non primary network interface from an instance. Detach a non primary network interface from an instance for a default project
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredinstancerequiredID (object) or Name (object) (Instance)  networkrequiredobject (NICRequestInterfaceField)  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instances/network-interface/detachServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/network-interface/detachServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/network-interface/detach Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "c47e974f-8002-46e9-8a63-d66505be2aa1"},"network": {"interface": {"id": "31dcb3ea-9320-4122-8fea-3a3b06114ca1"}}} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Delete an instance. Deletes permanently an instance with the id provided in the current tenant
which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so
you can get the id of the instance that you want to delete.

Result

The attached ports will be deleted as well.
The attached volumes will be detached.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
query Parametersdelete_public_ipboolean (Delete Public Ip)  Default:  false Flag default value false.
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
delete/v1/instances/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Retrieve the details of a specific instance. Get an instance details for the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances,
so you can get the id of the instance that you want to get details.

You can use the expand argument to get more details from the inner objects
like image or type.


path Parametersidrequiredstring (Id)  Instance id - for help use ./mgc virtual-machines instances list .
query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type', 'machine-types', 'network'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
get/v1/instances/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id} Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","created_at": "2022-06-10T18:33:12Z","error": {"message": "An error occurred while creating your instance. Please contact our support for assistance.","slug": "create_instance.keypair.not_found"},"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","image": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"name": "instance name","network": {"ports": [{"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}]},"ssh_key_name": "keypair_name_here","state": "running","status": "completed","updated_at": "2022-06-11T18:33:12Z","user_data": "some_base_64_str"}Reboot an instance. Reboots a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id
of the instance that you want to reboot.

Rules

The instance must be in the running or suspend state.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/rebootServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/rebootServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/reboot Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Renames an instance. Renames a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id of
the instance that you want to rename.

path Parametersidrequiredstring (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  New name
Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
patch/v1/instances/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "new instance name"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Changes an instance machine-type. Changes a Virtual Machine instance machine type with the id provided in the current tenant
which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get
the id of the instance that you want to change the machine type.

Rules

The instance must be in the running or stopped state.
The new machine type must be compatible with the current machine type.
The new machine type must be available in the same region as the current machine type.
You must provide either the machine type id or the machine type name, if you provide both,
the machine type id will be used.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredmachine_typerequiredID (object) or Name (object) (Machine Type)   Any of IDNameidrequiredstring (Id)   [ 1 .. 255 ] characters  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instances/{id}/retypeServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/retypeServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/retype Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Starts an instance. Starts a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances,
so you can get the id of the instance that you want to start.

Rules

The instance must be in the stopped or suspended states.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/startServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/startServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/start Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Stops an instance. Stops a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id of
the instance that you want to stop.

Rules

The instance must be in the running state.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/stopServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/stopServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/stop Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Suspends instance. Suspends a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id of
the instance that you want to suspend.

Rules

The instance must be in the running state.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/suspendServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/suspendServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/suspend Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}imagesOperations with images for instances.
Retrieves all images. Retrieve a list of images allowed for the current region.
query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 _offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "platform:asc,end_life_at:desc" Responses200 Successful Response
422 Validation Error
get/v1/imagesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/imagesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/images Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"images": [{"end_life_at": "2022-06-10T18:33:12Z","end_standard_support_at": "2022-06-10T18:33:12Z","id": "c47e974f-8002-46e9-8a63-d66505be2aa1","minimum_requirements": {"disk": 2,"ram": 1,"vcpu": 1},"name": "ubuntu 22.10","platform": "linux","release_at": "2022-06-10T18:33:12Z","status": "active","version": "22.10"}]}machine-typesOperations with machine types for instances.
Retrieves all machine-types. Retrieves a list of machine types allowed for the current tenant which is logged in.
query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
Responses200 Successful Response
422 Validation Error
get/v1/machine-typesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/machine-typesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/machine-types Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"machine_types": [{"disk": 10,"gpu": 1,"id": "3a4dc05b-eb10-42ec-8c0c-848e06f7aded","name": "abc.small","ram": 2,"sku": "some_sku","status": "active","vcpus": 2}]}snapshotsOperations with snapshots for instances.
Lists all snapshots. List all snapshots in the current tenant which is logged in.
Notes

You can use the expand argument to get more details from the inner objects
like image and machine types.

query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
expandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
get/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"snapshots": [{"created_at": "2022-06-10T18:33:12Z","id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","image": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"}},"name": "snapshot name","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}]}Create a snapshot of an instance. Create a snapshot of a Virtual Machine in the current tenant which is logged in. 
A Snapshot is ready for restore when it's in available state.
Notes

You can verify the state of snapshot using the snapshot get command,
To create a snapshot it's mandatory inform a valid and unique name.

Rules

It's only possible to create a snapshot of a valid virtual machine.
It's not possible to create 2 snapshots with the same name.
You can inform ID or Name from a Virtual Machine if both informed the priority will be ID.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  instancerequiredID (object) or Name (object) (Instance)  Responses202 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
post/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "snapshot name"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Delete a Snapshot. Deletes an snapshot with the id provided in the current tenant
which is logged in.
Notes

You can use the Snapshots list command to retrieve all snapshots, so
you can get the id of the snapshot that you want to delete.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
delete/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Retrieve the details of an snapshot. Get an snapshot details for the current tenant which is logged in.
Notes

You can use the snapshots list command to retrieve all snapshots,
so you can get the id of the snapshot that you want to get details.

You can use the expand argument to get more details from the inner objects
like image or type.


path Parametersidrequiredstring (Id)  query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
get/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id} Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-06-10T18:33:12Z","id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","image": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"}},"name": "snapshot name","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}Restore a snapshot to an instance. Restore a snapshot of an instance with the current tenant which is logged in. 
Notes

You can check the snapshot state using snapshot list command.
Use "machine-types list" to see all machine types available.

Rules

A Snapshot is ready to restore when it's in available state.
To restore a snapshot you have to inform the new instance settings.
You must choose a machine-type that has a disk equal or larger
than the original instance.

path Parametersidrequiredstring (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  machine_typerequiredID (object) or Name (object) (Machine Type)  ssh_key_namerequiredstring (Ssh Key Name)   >= 0 characters  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  networkInstanceCreateRequestV1NetworkDefault (object) or null Default:  {"vpc":{"name":"default"},"associate_public_ip":true} user_dataUser Data (string) or User Data (null) (User Data)  Responses202 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
post/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id} Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "instance name","network": {"associate_public_ip": true,"interface": {"security_groups": [{"id": "f273fbde-2ddf-4dcd-8c41-342671ac0d17"},{"id": "02a2acf3-d6db-4424-ac97-0254cb9c329e"}]},"vpc": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}},"ssh_key_name": "keypair_name_here","user_data": "some_base64_script"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Renames a snapshot. Renames a Snapshot with the id provided in the current tenant which is logged in.
Notes

You can use the snapshots list command to retrieve all snapshots, so you can get the id of
the snapshot that you want to rename.

path Parametersidrequiredstring (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  Responses204 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
patch/v1/snapshots/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "new snapshot name"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}backupsLists all backups in the current tenant. List Virtual Machine backups in the current tenant which is logged in.
Notes

You can use the extend argument to get more details from the inner objects
like image or type.

query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
expandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['instance'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
get/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"backups": [{"backup_type": "daily","created_at": "2022-06-10T18:33:12Z","id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"min_disk": 10,"name": "backup name ffff","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}]}Create a backup of a virtual machine asynchronously. Create a backup of a Virtual Machine with the current tenant which is logged in.
A Backup is ready for restore when it's in completed status.
Rules

It's possible to create a maximum of 100 backups per virtual machine.
In case quota reached, choose a backup to remove.
You can inform ID or Name from a Virtual Machine if both informed the priority will be ID.
It's only possible to create a backup of a valid virtual machine.
Each backup must have a unique name. It's not possible to create backups with the same name.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  instancerequiredID (object) or Name (object) (Instance)  Responses202 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
post/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "backup name"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Delete a backup of a virtual machine asynchronously. delete a backup from instance
path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
delete/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Retrieve the details of a backup. Get a backup details for the current tenant which is logged in.
Notes

You can use the backup list command to retrieve all backups,
so you can get the id of the backup that you want to get details.

You can use the expand argument to get more details from the object
like instance.


path Parametersidrequiredstring (Id)  query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['instance'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
get/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id} Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"backup_type": "daily","created_at": "2022-06-10T18:33:12Z","id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"min_disk": 10,"name": "backup name","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}Copy a backup of a virtual machine asynchronously. Copy a backup region
path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredregionrequiredstring (Regions)  Enum: "br-se1" "br-se-1" "br-ne-1"  Responses204 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
post/v1/backups/{id}/copyServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}/copyServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id}/copy Request samples PayloadContent typeapplication/jsonCopy{"region": "br-ne-1"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Renames a backup Renames a backup with the id provided in the current tenant which is logged in.
Rules

You can use the backup list command to retrieve all backups, so you can get the id of
the backup that you want to rename.
A Backup can only renamed when it's in completed status.
Each backup must have a unique name.

path Parametersidrequiredstring (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  Responses204 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
patch/v1/backups/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "new backup name"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Restore a backup to a virtual machine Restore a backup of a Virtual Machine with the current tenant which is logged in. 
A Backup is ready for restore when it's in completed status.
Notes

You can verify the status of backup using the backup list command.
Use machine-types list to see all machine types available.

Rules

To restore a backup you have to inform the new virtual machine information.
You can choose a machine-type that has a disk equal or larger
than the minimum disk of the backup.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  machine_typerequiredID (object) or Name (object) (Machine Type)  ssh_key_namerequiredstring (Ssh Key Name)  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  networkrequiredobject (InstanceCreateRequestV1NetworkDefault)  user_dataUser Data (string) or User Data (null) (User Data)  Responses202 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
post/v1/backups/{id}/restoreServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}/restoreServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id}/restore Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "instance name","network": {"associate_public_ip": true,"interface": {"security_groups": [{"id": "f273fbde-2ddf-4dcd-8c41-342671ac0d17"},{"id": "02a2acf3-d6db-4424-ac97-0254cb9c329e"}]},"vpc": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"}},"ssh_key_name": "keypair_name_here","user_data": "some_base64_script"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}

---

Auditoria

eventsgetLists all events.event-typesgetLists all event types.API docs by RedoclyCloud Events Consult API (v1)Cloud Events API Product.
eventsEndpoints related to listing events emitted by other products.
Lists all events. Lists all events emitted by other products.
Authorizations:OAuth2query Parameters_limitinteger (Limit)   [ 0 .. 2147483647 ]  Default:  50 Number of items per page
_offsetinteger (Offset)   [ 0 .. 2147483647 ]  Default:  0 Offset for pagination
idID (string) (ID)  Identification of the event
source__likeSource (string) (Source)  Context in which the event occurred ('like' operation)
timeTime (string) (Time)  Timestamp of when the occurrence happened
type__likeType (string) (Type)  Type of event related to the originating occurrence ('like' operation)
product__likeProduct (string) (Product)  In which producer product an event occurred ('like' operation)
authidAuth ID (string) (Auth ID)  Identification of the principal that triggered the occurrence
dataobject (Raw Data)  Default:  ""  Example:  data.tenant_id=00000000-0000-0000-0000-000000000000&data.machine_type.name=cloud-bs1.xsmallThe raw data event
header ParametersX-Tenant-IDany (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
500 Internal Server Error
get/v0/eventsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/audit/v0/eventsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/audit/v0/eventsServer for br-se1 region
https://api.magalu.cloud/br-se1/audit/v0/events Response samples 200422500Content typeapplication/jsonCopy Expand all  Collapse all {"meta": {"limit": 0,"offset": 0,"count": 0,"total": 0},"results": [{"id": "00000000-00000000-00000000-00000000","source": "https://api.com/v1/instances/00000000-00000000-00000000-00000000","type": "cloud.magalu.compute.instance.create","specversion": "1.0","subject": "instance/00000000-00000000-00000000-00000000","time": "2024-07-16T22:50:00","authid": "00000000-00000000-00000000-00000000","authtype": "tenant","product": "default","region": "string","tenantid": "00000000-00000000-00000000-00000000","data": { }}]}event-typesEndpoints related to listing types of events emitted by other products.
Lists all event types. Lists all types of events emitted by other products.
Authorizations:OAuth2query Parameters_limitinteger (Limit)   [ 0 .. 2147483647 ]  Default:  50 Number of items per page
_offsetinteger (Offset)   [ 0 .. 2147483647 ]  Default:  0 Offset for pagination
header ParametersX-Tenant-IDany (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
500 Internal Server Error
get/v0/event-typesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/audit/v0/event-typesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/audit/v0/event-typesServer for br-se1 region
https://api.magalu.cloud/br-se1/audit/v0/event-types Response samples 200422500Content typeapplication/jsonCopy Expand all  Collapse all {"meta": {"limit": 0,"offset": 0,"count": 0,"total": 0},"results": [{"type": "string"}]}

---

Network

portsgetDetails of a Port listdelDelete PortgetPort DetailspostAttach Security GrouppostDetach Security Grouppublic_ipsgetTenant's public IP listdelDelete Public IPgetPublic IP DetailspostAttach Public IPpostDetach Public IPrulesdelDelete a RulegetRule Detailssecurity_groupsgetList Security Groups by TenantpostCreate Security GroupdelDelete a security groupgetSecurity Group DetailsgetList RulespostCreate RulesubnetpoolsgetList Subnet Pools by TenantpostCreate a Subnet Pool in a tenantdelDelete Subnet Pool by IDgetGet Subnet Pool by IDpostBook SubnetpoolpostUnbook SubnetpoolsubnetsdelDelete a SubnetgetSubnet DetailspatchUpdate SubnetvpcspostV1 Create VPCgetList VPCpostCreate VPCdelDelete VPCgetVPC DetailsgetList PortspostCreate PortgetList Public IPspostCreate Public IPgetList Security GroupspostCreate Security GroupgetList SubnetspostCreate SubnetpostV1 Create VPCAPI docs by RedoclyVPC API Product (1.137.1) URL: https://github.com/luizalabs  VPC Api Product
portsOperations related to Ports
Details of a Port list Return a detailed list of ports from the provided tenant_id
Authorizations:OAuth2query Parametersport_id_listArray of any (Port Id List)  Default:  "" header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/portsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/portsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all [{"created_at": "2022-01-01 00:00:00","description": "port description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_address": [{"ip_address": "172.20.0.2","subnet_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"is_admin_state_up": true,"is_port_security_enabled": true,"name": "port_name","public_ip": [{"public_ip": "100.94.5.31","public_ip_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]Delete Port Delete a port from the provided tenant_id
Authorizations:OAuth2path Parametersport_idrequiredany (port_id)  ID of the Port to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/ports/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Port Details Return a port details from the provided tenant_id
Authorizations:OAuth2path Parametersport_idrequiredany (Port Id)  header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/ports/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01 00:00:00","description": "port description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_address": [{"ip_address": "172.20.0.2","subnet_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"is_admin_state_up": true,"is_port_security_enabled": true,"name": "port_name","public_ip": [{"public_ip": "100.94.5.31","public_ip_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Attach Security Group Attach a Security Group to a Port with provided port_id, security_group_id, x-tenant-id of an specific project type
Authorizations:OAuth2path Parametersport_idrequiredany (port_id)  ID of the Port to attach security group
security_group_idrequiredany (security_group_id)  ID of the Security Group to attach
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/ports/{port_id}/attach/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}/attach/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id}/attach/{security_group_id} Response samples 200422Content typeapplication/jsonCopynullDetach Security Group Detach a Security Group to a Port with provided port_id, security_group_id, x-tenant-id of an specific project type
Authorizations:OAuth2path Parametersport_idrequiredany (port_id)  ID of the Port to detach security group
security_group_idrequiredany (security_group_id)  ID of the Security Group to detach
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/ports/{port_id}/detach/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}/detach/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id}/detach/{security_group_id} Response samples 200422Content typeapplication/jsonCopynullpublic_ipsOperations related to Public IPs
Tenant's public IP list Return a tenant's public ip list
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/public_ipsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ipsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"public_ips": [{"created_at": "2022-01-01 00:00:00","description": "port description","error": "error","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","public_ip": "100.94.5.31","status": "created","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Delete Public IP Delete a Public IP from the provided tenant_id
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/public_ips/{public_ip_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Public IP Details Return a Public IP details
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to retrieve
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/public_ips/{public_ip_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id} Response samples 200422Content typeapplication/jsonCopy{"created_at": "2022-01-01 00:00:00","description": "port description","error": "error","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_ip": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","public_ip": "100.94.5.31","status": "created","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Attach Public IP Attach a Public IP to a Port
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to attach port to
port_idrequiredany (Port ID)  Id of the Port to attach the Public IP
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/public_ips/{public_ip_id}/attach/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}/attach/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id}/attach/{port_id} Response samples 200422Content typeapplication/jsonCopynullDetach Public IP Detach a Public IP to a Port
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to detach port to
port_idrequiredany (Port ID)  Id of the Port to detach the Public IP
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/public_ips/{public_ip_id}/detach/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}/detach/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id}/detach/{port_id} Response samples 200422Content typeapplication/jsonCopynullrulesOperations related to Rules
Delete a Rule Delete a rule from the provided tenant_id
Authorizations:OAuth2path Parametersrule_idrequiredany (Rule ID)  Id of the Rule
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/rules/{rule_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/rules/{rule_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/rules/{rule_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Rule Details Return a rule details
Authorizations:OAuth2path Parametersrule_idrequiredany (Rule ID)  Id of the Rule
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/rules/{rule_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/rules/{rule_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/rules/{rule_id} Response samples 200422Content typeapplication/jsonCopy{"created_at": "2022-01-01 00:00:00","description": "Some rule description","direction": "egress","ethertype": "IPv4","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24","security_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "created"}security_groupsOperations related to Security Groups
List Security Groups by Tenant Returns a list of security groups for a provided tenant_id
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"security_groups": [{"created_at": "2022-01-01 00:00:00","description": "security group description","error": "null","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "security_group_name","project_type": "default","status": "created","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create Security Group Create a Security Group
Authorizations:OAuth2query Parametersvalidate_quotaboolean (validateQuota)  Default:  true Validate the quota before creating Security Group
waitboolean (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutinteger (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
skip_default_rulesboolean (Skip Default Rules)  Default:  false Skip creation of default security group rules
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  Default:  "" namerequiredName (string) or Name (any) (Name)  Responses200 Successful Response
422 Validation Error
post/v0/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups Request samples PayloadContent typeapplication/jsonCopy{"description": "security group description","name": "security_group_name"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete a security group Delete a security group from the provided tenant_id
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the security group to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/security_groups/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Security Group Details Return a security group details
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the security group to detail
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/security_groups/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01 00:00:00","description": "security group description","error": "null","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "security_group_name","project_type": "default","rules": [{"created_at": "2022-01-01 00:00:00","direction": "egress","error": "null","ethertype": "IPv4","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24","security_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "created"}],"status": "created","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Rules Returns a list of rules for a provided security_group_id
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the Security Group
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/security_groups/{security_group_id}/rulesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}/rulesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id}/rules Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"rules": [{"created_at": "2022-01-01 00:00:00","direction": "egress","ethertype": "IPv4","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24","security_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "created"}]}Create Rule Create a Rule async, returning its ID. To monitor the creation progress, please check the status in the service message or implement polling.Either a remote_ip_prefix or a remote_group_id can be specified.With remote_ip_prefix, all IPs that match the criteria will be allowed.With remote_group_id, only the specified security group is allowed to communicatefollowing the specified protocol, direction and port_range_min/max
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the Security Group
query Parametersvalidate_quotaboolean (validateQuota)  Default:  true Validate the quota before creating Rule
waitwait (boolean) or wait (any) (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutwaitTimeout (integer) or waitTimeout (any) (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  directionDirection (string) or Direction (any) (Direction)  ethertyperequiredstring (Ethertype)  port_range_maxPort Range Max (integer) or Port Range Max (any) (Port Range Max)  port_range_minPort Range Min (integer) or Port Range Min (any) (Port Range Min)  protocolProtocol (string) or Protocol (any) (Protocol)  remote_group_idRemote Group Id (string) or Remote Group Id (any) (Remote Group Id)  remote_ip_prefixRemote Ip Prefix (string) or Remote Ip Prefix (any) (Remote Ip Prefix)  Responses200 Successful Response
422 Validation Error
post/v0/security_groups/{security_group_id}/rulesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}/rulesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id}/rules Request samples PayloadContent typeapplication/jsonCopy{"description": "Some rule description","direction": "egress","ethertype": "IPv4","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}subnetpoolsOperations related to Subnet Pools
List Subnet Pools by Tenant Returns a list of Subnet Pools for the current tenant's project
Authorizations:OAuth2query Parameters_offsetinteger (Items Offset)   >= 0  Default:  0 Start item for pagination
_limitinteger (Pagination)   >= 1  Default:  20 Number of items per page
_sortstring ( Sort)  Default:  "created_at:desc"  Examples: _sort=created_at:asc - created_at:asc_sort=created_at:desc - created_at:descName of the field wich the list must be ordered by ending with :asc or :desc
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/subnetpoolsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpoolsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"meta": {"links": {"next": "?_offset=30&_limit=10","previous": "?_offset=10&_limit=10","self": "?_offset=30&_limit=10"},"page": {"count": 10,"limit": 10,"offset": 20,"total": 112}},"results": [{"cidr": "172.20.0.0/16","description": "subnet pool description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "subnet_pool_name","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create a Subnet Pool in a tenant Create a Subnet Pool
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequiredcidrstring (Cidr)  Default:  "172.26.0.0/16" The CIDR notation for the subnet pool.
descriptionrequiredstring (Description)  The description for the subnet pool
namerequiredstring (Name)  The name of the subnet pool.
typestring (Type) ^(pip|default)$ Default:  "default" The type of subnetpool, pip or default.
Responses201 Successful Response
422 Validation Error
post/v0/subnetpoolsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpoolsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools Request samples PayloadContent typeapplication/jsonCopy{"cidr": "172.26.0.0/16","description": "some description","name": "some_subnet_pool"} Response samples 201422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete Subnet Pool by ID Delete one Subnet Pool by ID
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/subnetpools/{subnetpool_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Get Subnet Pool by ID Get details of a specific Subnet Pool
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to get details
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/subnetpools/{subnetpool_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id} Response samples 200422Content typeapplication/jsonCopy{"cidr": "172.26.0.0/16","created_at": "2022-01-01T00:00:00.000000Z","description": "some description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_version": 4,"name": "some_subnet_pool","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Book Subnetpool Booking a CIDR range from a subnetpool
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to get details
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequiredcidrCidr (string) or Cidr (any) (Cidr)  maskMask (integer) or Mask (any) (Mask)  Responses201 Successful Response
422 Validation Error
post/v0/subnetpools/{subnetpool_id}/book_cidrServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}/book_cidrServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id}/book_cidr Request samples PayloadContent typeapplication/jsonExampleExample with CIDRExample with MaskExample with CIDRCopy{"cidr": "172.26.0.0/16"} Response samples 201422Content typeapplication/jsonCopy{"cidr": "172.26.0.0/16"}Unbook Subnetpool Unbooking a CIDR range from a subnetpool
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to get details
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequiredcidrstring (Cidr)  Default:  "172.26.0.0/16" The CIDR notation for the subnet pool.
Responses204 Successful Response
422 Validation Error
post/v0/subnetpools/{subnetpool_id}/unbook_cidrServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}/unbook_cidrServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id}/unbook_cidr Request samples PayloadContent typeapplication/jsonCopy{"cidr": "172.26.0.0/16"} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}subnetsOperations related to Subnets
Delete a Subnet Delete a subnet from the provided tenant_id
Authorizations:OAuth2path Parameterssubnet_idrequiredany (Subnet Id)  Id of the Subnet to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/subnets/{subnet_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnets/{subnet_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnets/{subnet_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Subnet Details Returns a subnet details
Authorizations:OAuth2path Parameterssubnet_idrequiredany (Subnet Id)  Id of the Subnet to detail
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/subnets/{subnet_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnets/{subnet_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnets/{subnet_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"cidr_block": "172.20.0.0/24","created_at": "2022-01-01 00:00:00","description": "vpc description","dhcp_pools": [{"end": "172.50.0.254","start": "172.50.0.2"}],"dns_nameservers": ["8.8.8.8"],"gateway_ip": "172.50.0.1","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_version": "4","name": "vpc_name","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","zone": "a"}Update Subnet Update a subnet from the provided tenant_id
Authorizations:OAuth2path Parameterssubnet_idrequiredstring (Subnet Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddns_nameserversArray of strings <ipvanyaddress>  (Dns Nameservers) [ items <ipvanyaddress > ] Default:  [] Responses200 Successful Response
422 Validation Error
patch/v0/subnets/{subnet_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnets/{subnet_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnets/{subnet_id} Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"dns_nameservers": ["8.8.8.8"]} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}vpcsOperations related to VPCs
V1 Create VPC V1 Create a VPC
Authorizations:OAuth2header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  namerequiredstring (Name)  Responses202 Accepted
400 Bad Request
409 Conflict
422 Validation Error
500 Internal Exception
504 Gateway Timeout
post/latest/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/latest/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/latest/vpcs Request samples PayloadContent typeapplication/jsonCopy{"description": "Description","name": "VPC Name"} Response samples 202400409422500504Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "pending"}List VPC Returns a list of VPCs for a provided tenant_id
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"vpcs": [{"created_at": "2022-01-01 00:00:00","description": "DESCRIPTION","external_network": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "vpc_name","network_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","router_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"subnets": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00"}]}Create VPC Create a VPC
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  namerequiredstring (Name)  Responses200 Successful Response
422 Validation Error
post/v0/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs Request samples PayloadContent typeapplication/jsonCopy{"description": "Description","name": "vpc_name"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete VPC Delete a VPC from the provided tenant_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (VPC Id)  ID of the VPC to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/vpcs/{vpc_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}VPC Details Return a VPC details
Authorizations:OAuth2path Parametersvpc_idrequiredany (VPC Id)  ID of the VPC to detail
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01 00:00:00","description": "DESCRIPTION","external_network": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "vpc_name","network_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","router_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"subnets": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00"}List Ports Returns a list of ports for a provided vpc_id and x-tenant-id. The list will be paginated, it means you can easily find what you need just setting the page number(_offset) and the quantity of items per page(_limit). The level of detail can also be set
Authorizations:OAuth2path Parametersvpc_idrequiredany (vpc_id)  ID of VPC to list ports
query Parametersdetailedboolean (Detailed)  Default:  true _offsetinteger (Page Number)   >= 1  Default:  1 Page Number
_limitinteger (Items Per Page)   >= 1  Default:  10 Items Per Page
port_id_listArray of any (Port Id List)  Default:  "" header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/portsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/portsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/ports Response samples 200422Content typeapplication/jsonExamplePortsListSimplifiedPortsListPortsListSimplifiedCopy Expand all  Collapse all {"ports_simplified": [{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_address": [{"ip_address": "172.20.0.2","subnet_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}]}Create Port Create a Port with provided vpc_id and x-tenant-id. You can provide a list of security_groups_id or subnets
Authorizations:OAuth2path Parametersvpc_idrequiredany (vpc_id)  ID of the VPC to create port
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
x-zoneX-Zone (string) or X-Zone (any) (X-Zone)  Request Body schema: application/jsonrequiredhas_pipHas Pip (boolean) or Has Pip (any) (Has Pip)  Default:  true has_sgHas Sg (boolean) or Has Sg (any) (Has Sg)  Default:  true namerequiredstring (Name)   [ 5 .. 100 ] characters  security_groups_idArray of Security Groups Id (strings) or Security Groups Id (any) (Security Groups Id)  Default:  [] subnetsArray of Subnets (strings) or Subnets (any) (Subnets)  Default:  [] Responses200 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/portsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/portsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/ports Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"has_pip": true,"has_sg": true,"name": "port_name","security_groups_id": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"subnets": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Public IPs Returns a list of Public IPs for a provided vpc_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc ID)  Id of the VPC to list the Public IPs in
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/public_ipsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/public_ipsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/public_ips Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"public_ips": [{"created_at": "2022-01-01 00:00:00","description": "port description","error": "error","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","public_ip": "100.94.5.31","status": "created","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create Public IP Create async Public IP in a VPC with provided vpc_id and x_tenant_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc ID)  Id of the VPC to create the Public IP in
query Parametersvalidate_quotaboolean (validateQuota)  Default:  true Validate the quota before creating the Public IP
waitboolean (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutwaitTimeout (integer) or waitTimeout (any) (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  Default:  ""  Any of DescriptionDescriptionstring (Description)  Default:  "" Responses200 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/public_ipsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/public_ipsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/public_ips Request samples PayloadContent typeapplication/jsonCopy{"description": "public_ip_description"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Security Groups Returns a list of security groups for a provided vpc_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc ID)  Id of the VPC to create the Security Group in
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/security_groups Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"security_groups": [{"created_at": "2022-01-01 00:00:00","description": "security group description","error": "null","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "security_group_name","project_type": "default","status": "created","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create Security Group  Deprecated Create a Security Group
Authorizations:OAuth2path Parametersvpc_idrequiredVPC Id (string) or VPC Id (any) (VPC Id)  Id of the vpc to create the security group in
query Parameterswaitwait (boolean) or wait (any) (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutwaitTimeout (integer) or waitTimeout (any) (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
skip_default_rulesboolean (Skip Default Rules)  Default:  false Skip creation of default security group rules
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  Default:  "" namerequiredName (string) or Name (any) (Name)  Responses200 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/security_groups Request samples PayloadContent typeapplication/jsonCopy{"description": "security group description","name": "security_group_name"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Subnets Returns a list of subnets for a provided vpc_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc Id)  Id of the VPC to list Subnets
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/subnetsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/subnetsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/subnets Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"subnets": [{"cidr_block": "172.20.0.0/24","created_at": "2022-01-01 00:00:00","description": "vpc description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_version": "4","name": "vpc_name","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","zone": "a"}]}Create Subnet Create a Subnet
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc Id)  Id of the VPC to create Subnet
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
x-zoneX-Zone (string) or X-Zone (any) (X-Zone)  Request Body schema: application/jsonrequiredcidr_blockrequiredstring (Cidr Block)  descriptionDescription (string) or Description (any) (Description)  dns_nameserversArray of strings <ipvanyaddress>  (Dns Nameservers) [ items <ipvanyaddress > ] Default:  [] ip_versionrequiredinteger (Ip Version)  namerequiredstring (Name)  subnetpool_idrequiredstring (Subnetpool Id)  Responses201 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/subnetsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/subnetsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/subnets Request samples PayloadContent typeapplication/jsonExampleExample with CIDRExample with MaskExample with CIDRCopy Expand all  Collapse all {"cidr_block": "172.50.0.0/24","description": "some_description","dns_nameservers": ["8.8.8.8"],"ip_version": 4,"name": "subnet_name","subnetpool_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"} Response samples 201422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}V1 Create VPC V1 Create a VPC
Authorizations:OAuth2header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  namerequiredstring (Name)  Responses202 Accepted
400 Bad Request
409 Conflict
422 Validation Error
500 Internal Exception
504 Gateway Timeout
post/v1/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v1/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v1/vpcs Request samples PayloadContent typeapplication/jsonCopy{"description": "Description","name": "VPC Name"} Response samples 202400409422500504Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "pending"}

---

Block Storage

volumesgetList all volumes.postCreate a new volume.delDelete a volume.getRetrieve the details of a specific volume.postAttach the volume to an instance.postDetach the volume from an instance.postExtend the size of a volume.patchRename a volume.postChange the type of a volume.volume-typesgetList all volume types.snapshotsgetList all snapshots.postCreate a snapshot.delDelete a snapshot.getRetrieve the details of a specific snapshot.patchRename a snapshot.usagegetGet UsageattachmentspostAttach a volume to an instance.delDelete an attachment.backupsgetList all backups.postCreate a backup.postCopy backup cross region.delDelete a backup.getRetrieve the details of a specific backup.patchRename a backup.healthchecksgetHealth CheckgetLivenessAPI docs by RedoclyBlock Storage API Product (1.171.0)Block Storage API Product
volumesOperations with volumes, including create, delete, extend, retype, list and other actions.
List all volumes. Retrieve a list of Volumes for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume Type.

query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['volume_type', 'attachment']
_limitinteger ( Limit)   > 0  Default:  50 _offsetinteger ( Offset)   >= 0  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" nameName (string) or Name (null) (Name)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Validation Error
get/v1/volumesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"volumes": [{"attachment": {"attached_at": "2022-01-01T00:00:10Z","device": "/dev/vdb","instance": {"created_at": "2022-01-01T00:00:10Z","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "machine name","state": "running","status": "completed","updated_at": "2022-01-01T00:00:10Z"}},"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","error": {"message": "You have reached the limit of allowed disks. Please, remove unused disks or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "volume name","size": 10,"state": "in-use","status": "completed","type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},"updated_at": "2022-01-01T00:00:10Z"}]}Create a new volume. Create a Volume for the currently authenticated tenant.
The Volume can be used when it reaches the "available" state and "completed"
 status.
Rules

The Volume name must be unique; otherwise, the creation will be disallowed.
The Volume type must be available to use.

Notes

Utilize the block-storage volume-types list command to retrieve a list
 of all available Volume Types.
Verify the state and status of your Volume using the
block-storage volume get --id [uuid] command".

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  sizerequiredinteger (Size)   [ 10 .. 2147483648 ]  Gibibytes (GiB)
typerequiredIdRequest (object) or Name (object) (Type)  backupIdRequest (object) or Name (object) or Backup (null) (Backup)  snapshotIdRequest (object) or Name (object) or Snapshot (null) (Snapshot)  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  Responses202 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/volumesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-se1-a","backup": {"name": "my_backup_name"},"name": "volume-name","size": 10,"snapshot": {"name": "my_snapshot_name"},"type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 202404409422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete a volume. Delete a Volume for the currently authenticated tenant.
Rules

The Volume cannot be attached to a Virtual Machine, i.e., its state cannot
 be "in-use". If necessary, detach the Volume from the Virtual Machine before
 proceeding with deletion.
The Volume must not have any snapshots. If necessary, delete the Volume's
snapshots before proceeding with deletion.
The Volume must have the status "completed", i.e., must not have any
actions in progress.

Notes

Check the state and status of your Volume using the
block-storage volume get --id [uuid] command".

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/volumes/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Retrieve the details of a specific volume. Retrieve details of a Volume for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume
 Type.
Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume for which you want to retrieve
 details.

path Parametersidrequiredstring <uuid>  (Id)  query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['volume_type', 'attachment']
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Validation Error
get/v1/volumes/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id} Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"attachment": {"attached_at": "2022-01-01T00:00:10Z","device": "/dev/vdb","instance": {"created_at": "2022-01-01T00:00:10Z","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "machine name","state": "running","status": "completed","updated_at": "2022-01-01T00:00:10Z"}},"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","error": {"message": "You have reached the limit of allowed disks. Please, remove unused disks or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "volume name","size": 10,"state": "in-use","status": "completed","type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},"updated_at": "2022-01-01T00:00:10Z"}Attach the volume to an instance. Attach a Volume to a Virtual Machine instance for the currently
 authenticated tenant.
The Volume attachment will be completed when the Volume status returns to
"completed", and the state becomes "in-use".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "available".
The Virtual Machine's state must be "stopped" or "running".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
virtual-machine instances get --id [uuid] command".

path Parametersidrequiredstring <uuid>  (Id)  virtual_machine_idrequiredstring <uuid>  (Virtual Machine Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/volumes/{id}/attach/{virtual_machine_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/attach/{virtual_machine_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/attach/{virtual_machine_id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Detach the volume from an instance. Detach a Volume from a Virtual Machine instance for the
 currently authenticated tenant.
The Volume detachment will be completed when the Volume state returns to
 "available," and the status becomes "completed".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "in-use".
The Virtual Machine's state must be "stopped".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
 virtual-machine instances get --id [uuid] command.
Ensure that any file systems on the device within your operating system are
 unmounted before detaching the Volume.

Troubleshooting

A failure during detachment can result in the Volume becoming stuck in the
 busy state. If this occurs, detachment may be delayed indefinitely until you
 unmount the Volume, force detachment, reboot the instance, or perform all
 three.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/volumes/{id}/detachServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/detachServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/detach Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Extend the size of a volume. Extend the size of an existing Volume for the currently
 authenticated tenant.
The Volume extension will be completed when the Volume status returns to
 "completed".
Rules

The Volume state must be "available".
The Volume status must be "completed" or "extend_error".
The new Volume size must be larger than the current size.

Notes

Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume you want to extend.
Storage quotas are managed internally. If the operation fails due to quota
 restrictions, please contact our support team for assistance.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredsizerequiredinteger (Size)   > 0  New volume size in GB
Responses204 Successful Response
404 Not Found
422 Unprocessable Entity
post/v1/volumes/{id}/extendServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/extendServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/extend Request samples PayloadContent typeapplication/jsonCopy{"size": 20} Response samples 404422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Rename a volume. Rename a Volume for the currently authenticated tenant.
Rules

The Volume name must be unique; otherwise, renaming will not be allowed.

Notes

Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume you wish to rename.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
patch/v1/volumes/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "volume-name"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Change the type of a volume. Change the Volume Type of an existing Volume for the currently
 authenticated tenant.
The Volume retype will be completed when the Volume status returns to
 "completed".
Rules

The Volume state must be "available".
The Volume status must be "completed" or "retype_error".
The new Volume Type must belong to the same region as the Volume.

Notes

Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume you want to retype.
Utilize the block-storage volume-types list command to retrieve a list of
 all Volume Types and obtain the ID of the Volume Type you want to use.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednew_typerequiredIdRequest (object) or Name (object) (New Type)   Any of IdRequestNameidrequiredstring (Id)   non-empty  Responses204 Successful Response
404 Not Found
422 Unprocessable Entity
post/v1/volumes/{id}/retypeServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/retypeServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/retype Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"new_type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 404422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]volume-typesOperations with volume types for volumes.
List all volume types. List Volume Types allowed in the current region.
Notes

Volume types are managed internally. If you wish to use a Volume Type that
 is not yet available, please contact our support team for assistance.

query Parametersavailability-zoneAvailability-Zone (string) or Availability-Zone (null) (Availability-Zone)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
get/v1/volume-typesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volume-typesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volume-types Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"types": [{"availability_zones": ["a"],"disk_type": "nvme","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","iops": {"read": 1000,"total": 1000,"write": 1000},"name": "my_volume_type","status": "active"}]}snapshotsOperations with snapshots for volumes.
List all snapshots. Retrieve a list of Snapshots for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume used to
 create each Snapshot.

query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  _limitinteger ( Limit)   > 0  Default:  50 _offsetinteger ( Offset)   >= 0  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" nameName (string) or Name (null) (Name)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"snapshots": [{"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","description": "my snapshot for testing","error": {"message": "You have reached the limit of allowed snapshots. Please, remove unused snapshots or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "My snapshot","size": 10,"state": "available","status": "completed","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}}]}Create a snapshot. Create a Snapshot for the currently authenticated tenant.
The Snapshot can be used when it reaches the "available" state and the
 "completed" status.
Rules

The Snapshot name must be unique; otherwise, the creation will be disallowed.
Creating Snapshots from restored Volumes may lead to future conflicts as
 you can't delete a Volume with an Snapshot and can't delete a Snapshot with a
 restored Volume, so we recommend avoiding it.

Notes

Use the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume that will be used to create the
 Snapshot.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  volumerequiredIdRequest (object) or Name (object) (Volume)  descriptionrequiredDescription (string) or Description (null) (Description)  Responses202 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"description": "my-snapshot","name": "snapshot-name","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 202404409422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete a snapshot. Delete a Snapshot for the currently authenticated tenant.
Rules

The Snapshot's status must be "completed".
The Snapshot's state must be "available".
Deleting a Snapshot that has been restored is not possible. If necessary,
 delete the restored Volume first and then proceed to delete the Snapshot.

Notes

Utilize the block-storage snapshots list command to retrieve a list of
 all Snapshots and obtain the ID of the Snapshot you wish to delete.
If needed, you can use the block-storage volume list command to retrieve
 a list of all Volumes and obtain the ID of the restored Volume.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Retrieve the details of a specific snapshot. Retrieve details of a Snapshot for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume
 used to create the Snapshot.
Utilize the block-storage snapshots list command to retrieve a list of
 all Snapshots and obtain the ID of the Snapshot for which you want to retrieve
 details.

path Parametersidrequiredstring <uuid>  (Id)  query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots/{id} Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","description": "my snapshot for testing","error": {"message": "You have reached the limit of allowed snapshots. Please, remove unused snapshots or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "My snapshot","size": 10,"state": "available","status": "completed","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}}Rename a snapshot. Rename a Snapshot for the currently authenticated tenant.
Rules

The Snapshot name must be unique; otherwise, renaming will not be allowed.

Notes

Utilize the block-storage snapshots list command to retrieve a list of
 all Snapshots and obtain the ID of the Snapshot you wish to rename.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
patch/v1/snapshots/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshots/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "snapshot-name"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]usageGet Usage Retrieve usage for specific quota_slug (disk & volumes)
query Parametersquota_slugQuota Slug (string) or Quota Slug (null) (Quota Slug)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
get/v0/usageServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v0/usageServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v0/usage Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"results": [{"quota_slug": "disk","used": 10}]}attachmentsAttach a volume to an instance. Attach a Volume to a Virtual Machine instance for the currently
 authenticated tenant.
The Volume attachment will be completed when the Volume status returns to
"completed", and the state becomes "in-use".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "available".
The Virtual Machine's state must be "stopped" or "running".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
virtual-machine instances get --id [uuid] command".

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredvolumerequiredobject (IdRequest)  instancerequiredobject (IdRequest)  deviceDevice (string) or Device (null) (Device)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/attachmentsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/attachmentsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/attachments Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"device": "/dev/vdc","instance": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},"volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Delete an attachment. Detach a Volume from a Virtual Machine instance for the
 currently authenticated tenant.
The Volume detachment will be completed when the Volume state returns to
 "available," and the status becomes "completed".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "in-use".
The Virtual Machine's state must be "stopped".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
 virtual-machine instances get --id [uuid] command.
Ensure that any file systems on the device within your operating system are
 unmounted before detaching the Volume.

Troubleshooting

A failure during detachment can result in the Volume becoming stuck in the
 busy state. If this occurs, detachment may be delayed indefinitely until you
 unmount the Volume, force detachment, reboot the instance, or perform all
 three.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/attachments/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/attachments/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/attachments/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]backupsList all backups. Retrieve a list of Backups for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the
 Volume used to create each Backup.

query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  _limitinteger ( Limit)   > 0  Default:  50 _offsetinteger ( Offset)   >= 0  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" nameName (string) or Name (null) (Name)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"backups": [{"created_at": "2022-01-01T00:00:10Z","description": "my backup for testing","error": {"message": "You have reached the limit of allowed backups. Please, remove unused backups or contact support to increase your quota.","slug": "creating_error_quota"},"id": "c2ea3568-0298-43ea-986a-f27ce3cf182b","name": "My backup","size": 10,"source_backup": {"id": "c9bb8b62-87d3-4c2a-864a-945d242f10ac"},"state": "available","status": "completed","type": "incremental","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "351d14b4-0ea4-49fb-bc93-18e9966149c7"}}]}Create a backup. Create a backup for the currently authenticated tenant.
The Backup can be used when it reaches the "available" state and the
 "completed" status.
Rules

The Backup name must be unique; otherwise, the creation will be disallowed.
The Volume can be either in in-use or available states.
The Volume must not have an operation in execution.

Notes

Use the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume that will be used to create the
 Backup.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (null) (Description)  volumerequiredIdRequest (object) or Name (object) (Volume)  namerequiredstring (Name)  typestring (BackupType)  Default:  "full" Enum: "full" "incremental"  Responses202 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"description": "my-backup","name": "backup name","type": "full","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 202404409422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Copy backup cross region. Copy a backup cross region for the currently authenticated tenant.
Rules

The copy only be accepted when the destiny region is different from origin region.
The copy only be accepted if the backup's name in destiny region is different from input name.
The copy only be accepted if the user has access to destiny region.

Notes

Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup you wish to copy across different region.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequireddestiny_regionrequiredstring (Destiny Region)   [ 1 .. 255 ] characters  backuprequiredobject (BackupIdRequest)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/backups/copyServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/copyServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/copy Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"backup": {"name": "backup-tomato"},"destiny_region": "br-ne1"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Delete a backup. Delete a Backup for the currently authenticated tenant.
Rules

The Backup's status must be "completed".
The Backup's state must be "available".

Notes

Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup you wish to delete.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Retrieve the details of a specific backup. Retrieve details of a Backup for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume
 used to create the Backup.
Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup for which you want to retrieve
 details.

path Parametersidrequiredstring <uuid>  (Id)  query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/{id} Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01T00:00:10Z","description": "my backup for testing","error": {"message": "You have reached the limit of allowed backups. Please, remove unused backups or contact support to increase your quota.","slug": "creating_error_quota"},"id": "c2ea3568-0298-43ea-986a-f27ce3cf182b","name": "My backup","size": 10,"source_backup": {"id": "c9bb8b62-87d3-4c2a-864a-945d242f10ac"},"state": "available","status": "completed","type": "incremental","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "351d14b4-0ea4-49fb-bc93-18e9966149c7"}}Rename a backup. Patches a Backup for the currently authenticated tenant.
Rules

The Backup name must be unique; otherwise, renaming will not be allowed.
The Backup's state must be available.

Notes

Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup you wish to rename.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednameName (string) or Name (null) (Name)  descriptionDescription (string) or Description (null) (Description)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
patch/v1/backups/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"description": "new description to my resource","name": "new name to my resource"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]healthchecksHealth Check Check api status
Responses200 Successful Response
get/healthcheckServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/healthcheckServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/healthcheck Response samples 200Content typeapplication/jsonCopy{"status": "OK"}Liveness Liveness probe
Responses204 Successful Response
get/livenessServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/livenessServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/liveness

---

Visão Geral
Este guia fornece instruções passo a passo sobre como configurar e usar o provedor (provider) MGC no seu projeto Terraform (ou OpenTofu) e gerenciar seus recursos na nuvem Magalu.
Você pode também acessar o registro da MGC no site da Hashicorp, onde há também a documentação referência do nosso provider.
Siga estes passos cuidadosamente para garantir uma integração bem-sucedida.

---

Exemplos de uso do Terraform
Disponibilizamos este repositório onde contém exemplos práticos de como usar o Terraform para provisionar e gerenciar recursos na Magalu Cloud. Os exemplos estão divididos em dois sub-repositórios:

Simples: Estes exemplos demonstram o uso básico para recursos individuais. (exemplo: Criar uma VM)
Avançado: Estes exemplos cobrem casos de uso que envolvem múltiplos recursos. (exemplo: Criar uma VM com armazenamento em bloco anexado)

Sempre estaremos atualizando este repositório para garantir que os exemplos estarão atualizados e completos!

---

Pré-requisitos
Terraform​
Antes de começar tenha certeza de que você tem o Terraform instalado e para isso siga as instruções no site da Hashicorp.

---

Como usar o provider
Você pode visitar a página oficial do provider MGC no registro online do Terraform e abaixo estão os passos iniciais que auxiliam na configuração do provider para o seu projeto.

Crie uma pasta para o seu projeto, como por exemplo: ~/terraform-mgc.
Crie um novo arquivo de configuração para o projeto, como por exemplo ~/terraform-mgc/main.tf
Adicione o código abaixo ao arquivo main.tf recém criado:

O código abaixo fará o download e instalação da última versão do provider mgc.
terraform {    required_providers {        mgc = {        source = "MagaluCloud/mgc"        }    }}provider "mgc" {    # Configuration options}
Se você deseja instalar uma versão específica do provider, basta adicionar o parâmetro version, como mostra este outro exemplo:
terraform {    required_providers {        mgc = {        source = "MagaluCloud/mgc"        **version = "0.18.6"**        }    }}provider "mgc" {    # Configuration options}
No código acima estamos forçando a instalação do provider de versão 0.18.6.

---

Configurar região
Para configurar a região do provedor, utilize o seguinte código:
provider "mgc" {  region="br-se1"}
Parâmetros​
region: Define a região para o provedor MGC. No exemplo acima, br-se1 indica a região Sudeste.
Exemplo​
No exemplo abaixo utilizamos 2 regiões br-se1 e br-ne1 e criamos um provider para cada, adicionando um alias para facilitar o controle dos recursos de block-storage:
terraform {  required_providers {    mgc = {      source = "magalucloud/mgc"      version = "0.18.10"    }  }}provider "mgc" {  alias = "sudeste"  region = "br-se1"}provider "mgc" {  alias  = "nordeste"  region = "br-ne1"}resource "mgc_block-storage_volumes" "block_storage" {    provider = mgc.nordeste    name = "volume-via-terraform"    size = 30    type = {        name = "cloud_nvme20k"    }}resource "mgc_block-storage_volumes" "block_storage-sudeste" {    provider = mgc.sudeste    name = "volume-via-terraform"    size = 30    type = {        name = "cloud_nvme20k"    }}

---

Autenticação
Autenticação usando a CLI​
É importante que você tenha feito o procedimento de autenticação pelo CLI ao menos uma vez, porque o provider Terraform utilizará a mesmo token de sessão do usuário armazenados localmente.
O token tem um tempo pré-determinado de expiração, então lembre-se de atualizar o token de tempos em tempos. Basta re-executa o procedimento de autenticação da CLI.
Saiba mais na documentação da CLI.
Autenticação com API Key​
Para saber mais sobre a autenticação utilizando API Key
Autenticação com API Key em Object Storage​
Para utilizar no Object Storage, temos uma diferença, por utilizarmos o protocolo S3, é necessário utilizar os pares de chaves (Key Pairs), para gerar os pares de chaves, siga as instruções aqui Como gerar Key Pairs
Exemplo de como utilizar Key Pairs e API-Key no Terraform​
provider "mgc" {  alias = "nordeste"  region = "br-ne1"  api_key = "2wfc0ee3-521f-40a0-af99-fas890809"  object_storage = {    key_pair = {      key_id = "8ce469da-5f44-8fd9-ade7-9381038fasd9"      key_secret = "f88as6ef-8a58-adfa-9698-891029favn"    }  }}
infoLembre que temos um repositório com exemplos de uso do terraform caso tenha dúvidas.

---

Adicionando seus recursos
Para adicionar recursos suportados da Magalu Cloud no seu projeto terraform, siga as instruções contidas na documentação referências do provider MGC e também na documentação oficial da Magalu Cloud.
infoA região da Magalu Cloud onde o projeto Terraform será executado é a mesma que está nas configurações da CLI. Veja as instruções de configuração da CLI para mais detalhes.
Exemplo de criação de Virtual Machine​
Abaixo segue um exemplo de configuração para instância de Virtual Machine:
// virtual_machines.tfresource "mgc_virtual-machine_instances" "myvm" {    provider = "mgc"    name = "my-tf-vm"    machine_type = {        name = "cloud-bs1.xsmall"    }    image = {        name = "cloud-ubuntu-22.04 LTS"    }    ssh_key_name = "my_ssh_key"}
Esse exemplo deve ser adicionado a um arquivo com extensão .tf , como por exemplo virtual_machines.tf e deve ficar na mesma pasta dos demais arquivos do projeto.

---

Utilização de Variáveis de Ambiente no Terraform
Verifique quais são as variáveis de ambiente disponíveis.
Configuração no Terraform​
No Terraform, você pode acessar essas variáveis usando o provedor adequado. Exemplo de configuração no arquivo main.tf:
provider "mgc" {  alias = "nordeste"  region = var.mgc_region  api_key = var.mgc_api_key  object_storage = {    key_pair = {      key_id = var.mgc_obj_key_id      key_secret = var.mgc_obj_key_secret    }  }}variable "mgc_api_key" {  description = "API Key para autenticação"}variable "mgc_obj_key_id" {  description = "ID da chave do objeto"}variable "mgc_obj_key_secret" {  description = "Segredo da chave do objeto"}variable "mgc_region" {  description = "Região de operação dos recursos"}variable "mgc_env" {  description = "Ambiente de operação"}

---

Testando seu projeto terraform
Agora vamos executar o seu projeto terraform. Os comandos sugeridos abaixo seguem o fluxo básico de execução e verificação da ferramenta, mas para melhor compreender o seu funcionamento recomendamos visitar a documentação oficial a página do desenvolvedor: Terraform Documentation.


Inicialmente abra um seu terminal dentro da pasta onde está o projeto terraform (os arquivos .tf) e execute o comando init para validar o provider.
terraform init


Agora execute o seguinte comando para revisar as mudanças antes de aplicar:
terraform plan


E quando estiver seguro das alterações execute o comando abaixo para aplicá-las. Responda aos prompts de confirmação, caso sejam exibidos no seu terminal.
terraform apply


Por fim, para verificar as alterações aplicadas sobre seus recursos na Magalu Cloud, execute o comando abaixo.
terraform show



---

Documentações dos produtos
Acesse a documentação dos produtos da MGC usando Terraform

---

Variáveis de ambiente
Esta documentação descreve como configurar e utilizar as seguintes variáveis de ambiente para o Terraform e a CLI:

MGC_API_KEY
MGC_OBJ_KEY_ID
MGC_OBJ_KEY_SECRET
MGC_REGION
MGC_ENV

Essas variáveis de ambiente são usadas para autenticação e configuração de ambiente ao interagir com a infraestrutura e serviços fornecidos.
Variáveis de Ambiente


MGC_API_KEY -
Chave de API para autenticação. Saiba mais.


MGC_OBJ_KEY_ID -
ID da chave para acessar ao produto de Object Storage. Saiba mais.


MGC_OBJ_KEY_SECRET -
Secret da chave para acessar ao produto de Object Storage. Saiba mais.


MGC_REGION -
Especifica a região onde os recursos serão criados e gerenciados.


MGC_ENV -
Define o ambiente de operação para diferenciar entre diferentes fases de desenvolvimento.


warningAs variáveis de ambiente sempre terão prioridade. Ou seja, no caso onde o usuário tenha a CLI e também API Key como variáveis de ambientes setadas, será utilizado a API Key para autenticação.
Exemplo de utilização​

LinuxWindowsLinux​export MGC_API_KEY="sua_api_key_aqui"export MGC_OBJ_KEY_ID="seu_obj_key_id_aqui"export MGC_OBJ_KEY_SECRET="seu_obj_key_secret_aqui"export MGC_REGION="sua_regiao_aqui"export MGC_ENV="seu_ambiente_aqui"Windows​$env:MGC_API_KEY="sua_api_key_aqui"$env:MGC_OBJ_KEY_ID="seu_obj_key_id_aqui"$env:MGC_OBJ_KEY_SECRET="seu_obj_key_secret_aqui"$env:MGC_REGION="sua_regiao_aqui"$env:MGC_ENV="seu_ambiente_aqui"

---

Visão Geral
O que é uma Chave SSH?​
Uma chave SSH (Secure Shell) é uma ferramenta criptográfica usada para autenticação segura entre um cliente e um servidor. As chaves SSH são amplamente utilizadas para acessar sistemas e servidores de forma segura sem a necessidade de usar senhas.
Componentes de uma Chave SSH​

Chave Pública: Esta chave pode ser compartilhada com qualquer pessoa ou servidor. Ela é usada pelo servidor para verificar a autenticidade da chave privada correspondente.
Chave Privada: Esta chave deve ser mantida em segredo. Ela é usada pelo cliente para se autenticar com o servidor que possui a chave pública correspondente.

Benefícios das Chaves SSH​

Segurança: As chaves SSH oferecem um método de autenticação mais seguro do que senhas, pois são baseadas em criptografia assimétrica.
Automação: Permitem a automação de processos sem a necessidade de interação manual para fornecer uma senha.
Conveniencia: Facilitam o acesso a sistemas e servidores de forma rápida e segura.

Ações Possíveis com o Comando mgc profile ssh-keys​
O comando mgc profile ssh-keys é utilizado para gerenciar chaves SSH associadas a perfis. Aqui estão as ações que você pode realizar:
1. Criar Chave SSH (create)​

Descrição: Cria uma nova chave SSH e a associa a um perfil. Este comando é útil para adicionar novas chaves SSH que você possa precisar para acessar diferentes sistemas ou servidores.

2. Excluir Chave SSH (delete)​

Descrição: Remove uma chave SSH existente do perfil. Este comando é útil quando você deseja revogar o acesso de uma chave específica ou limpar chaves desnecessárias.

3. Obter Chave SSH (get)​

Descrição: Recupera informações sobre uma chave SSH existente. Isso é útil para verificar os detalhes ou a configuração de uma chave específica.

4. Listar Chaves SSH (list)​

Descrição: Exibe uma lista de todas as chaves SSH associadas ao perfil. Esse comando ajuda a visualizar e gerenciar todas as chaves SSH em uso.


---

Criar Chave SSH
Criar uma chave ssh​
O primeiro passo é criar uma chave ssh, no exemplo é apresentado como criar uma chave utilizando o sistema operacional linux:
ssh-keygen -t rsa -b 4096 -f ~/.ssh/sshkey-example
Para visualizar a chave pública execute o comando:
cat ~/.ssh/sshkey-example.pub
Inserir a chave na sua conta​
Em seguida, já é possível copiar a chave pública para a Magalu Cloud utilizando o seguinte comando na CLI:
mgc profile ssh-keys create --key="<SUA CHAVE PUBLICA AQUI>" --name="sshkey-cli-example
infoCopie a chave publica e cole dentro do parametro --key
Parâmetros​

--name: Nome da nova chave SSH.
--key : Chave pública


---

Consultar Chaves SSH
Consultar uma chave ssh​
O subcomando get recupera informações sobre uma chave SSH existente.
Sintaxe​
mgc profile ssh-keys get <key-id>
Parâmetros​

<key-id>: ID da chave SSH que você deseja obter.

Exemplo de Uso​
Para obter detalhes sobre uma chave SSH com o ID "123123123123", use:
mgc profile ssh-keys get 123123123123
Listar chaves ssh​
O subcomando list exibe uma lista de todas as chaves SSH associadas ao perfil.
Sintaxe​
mgc profile ssh-keys list

---

Visão Geral da Auditoria da Magalu Cloud
Este documento fornece uma visão geral abrangente da Auditoria oferecida pela Magalu Cloud (MGC) e como ela funciona.
Diversos produtos da MGC emitem eventos quando certas ações são realizadas, que são então armazenados para eventual consulta. Com a Auditoria, usuários têm transparência o suficiente para saber quem fez o quê e quando em seus recursos, ajudando na verificação de uso externo indevido de dados ou resolução de contestação de consumo.
Alguns exemplos de eventos são:

Criação de uma nova instância de Virtual Machine;
Redimensionamento de uma instância de Database;
Qualquer deleção de recursos.


---

Listar eventos

>_ CLIPara listar os eventos associados ao seu tenant, use o comando:mgc audit events listA Auditoria oferece diversos filtros para ajudar na listagem, sendo alguns deles:--source-like: filtra baseado no contexto do evento. Por exemplo, caso o usuário queira consultar eventos de iniciar atrelados a uma instância arbitrária de Virtual Machine, poderia ser usado o comando:mgc audit events list --source-like=<ID>/start--type-like: filtra baseado no tipo do evento. Por exemplo, caso o usuário queira consultar todos os eventos emitidos por Block Storage:mgc audit events list --type-like=block-storageOu caso queira consultar todos os eventos de criação de instâncias:mgc audit events list --type-like=instances.createPara consultar outros parâmetros de filtragem, anexe --help no comando.

---

Listar tipos de eventos

>_ CLIPara listar os tipos únicos de eventos associados ao seu tenant, use o comando:mgc audit event-types listPara consultar parâmetros de paginação, anexe --help no comando acima.

---

Dicas de flags no CLI
Paginação​
O usuário pode navegar pelos eventos com os parâmetros --control.limit e --control.offset, que respectivamente denotam quantos eventos trazer e a partir de qual evento trazer. Por padrão, 50 resultados serão trazidos à partir do início.
mgc audit events list --control.limit=25 --control.offset=10
No exemplo acima, seriam trazidos 25 eventos à partir do 10º. Em consultas com filtragem, a paginação se aplica apenas aos eventos buscados.

---

Produtos que emitem eventos
No momento, os seguintes produtos da Magalu Cloud emitem eventos para Auditoria:
ProdutoRecursoEventosVirtual MachineBackupCriar, Deletar, Restaurar, Renomear.ImagemCriar, Deletar, Renomear.InstânciaCriar, Deletar, Alterar tipo, Renomear, Iniciar, Parar, Suspender, Reiniciar.PortaAnexar, Desanexar.SnapshotCriar, Restaurar, Deletar.DatabaseBackupCriar, Deletar, Restaurar.InstânciaCriar, Deletar, Iniciar, Parar, Redimensionar.RéplicaCriar, Deletar, Iniciar, Parar, Redimensionar.KubernetesClusterCriar, Deletar.NodepoolCriar, Deletar, Atualizar.Block StorageBackupCriar, Deletar, Restaurar, Renomear.SnapshotCriar, Deletar, Restaurar, Renomear.VolumeCriar, Deletar, Renomear, Anexar, Desanexar, Redimensionar, Alterar tipo.

---

Especificação dos eventos
Os eventos da Auditoria seguem a especificação CloudEvents, que busca descrever um formato comum de dados para interoperabilidade entre serviços, plataformas e sistemas.
Fora os campos padrões do CloudEvents, os eventos da Auditoria apresentam as seguintes extensões:
product: identifica o nome formal do produto;
region: a região física onde o evento foi emitido;
tenantid: identifica o tenant que acionou o evento.

---

Visão Geral
A Magalu Cloud oferece uma abordagem transparente e flexível para seus serviços e políticas financeiras. Os custos de utilização são calculados com base no consumo de recursos específicos de cada serviço, apresentando uma variedade de estruturas de preços.
Atualmente, os pagamentos são realizados exclusivamente via cartão de crédito, embora opções alternativas estejam abertas para discussão, visando atender às necessidades individuais dos clientes. Ferramentas de monitoramento e controle de gastos são fornecidas, permitindo aos usuários acompanhar e definir alertas sobre seus consumos. Quanto a descontos e créditos, estes são gerenciados pela equipe comercial, sendo disponíveis mediante solicitação. As faturas, que incluem impostos, são emitidas mensalmente e podem ser acessadas facilmente através do Console do Cliente, garantindo transparência e conformidade com regulamentações fiscais.

---

Cálculo dos custos de utilização dos serviços
Os custos de utilização dos serviços são calculados com base no consumo de recursos, como capacidade de armazenamento, poder de processamento, largura de banda, entre outros. Cada serviço possui uma estrutura de preços específica, que pode incluir tarifas fixas, tarifas por hora de utilização, tarifas por uso de dados, entre outras. Você poderá visualizar os detalhes da precificação diretamente na página de cada produto ou serviço.

---

Métodos de pagamento aceitos
Para todos os nossos clientes, atualmente aceitamos apenas pagamentos via cartão de crédito (não é necessário habilitar a opção para utilização no exterior).
No entanto, para clientes de grande consumo que desejam explorar outras opções de pagamento, como o PIX, estamos abertos a discutir possibilidades alternativas. Por favor, entre em contato conosco para abrir uma solicitação e avaliaremos a viabilidade de oferecer o PIX como uma opção de pagamento para sua conta. Estamos comprometidos em atender às necessidades individuais de nossos clientes e encontrar soluções adequadas para facilitar a transação financeira.

---

Monitoramento e controle dos gastos
Os clientes têm acesso a ferramentas de monitoramento e controle de gastos na Magalu Cloud. Por meio do link Faturamento no Console, é possível acompanhar em tempo real o consumo de recursos e os custos associados a cada serviço utilizado. Em breve será possívelconfigurar alertas para ser notificado quando seus gastos atingirem determinados limites predefinidos.

---

Políticas de descontos e créditos oferecidas
Os descontos e políticas promocionais são gerenciados pela nossa equipe comercial. Se você estiver interessado em explorar possíveis descontos ou créditos para o seu caso específico, recomendamos entrar em contato conosco para abrir uma solicitação. Nossa equipe avaliará sua solicitação e discutirá as opções disponíveis para atender às suas necessidades e requisitos comerciais. Estamos comprometidos em oferecer soluções personalizadas e flexíveis para nossos clientes.

---

Emissão e acesso as faturas
As faturas são fechadas mensalmente no dia 6 do mês subsequente ao consumo. Após o fechamento, as notas fiscais correspondentes são geradas e estarão disponíveis para baixar em poucos dias após o fechamento. Você poderá acessar suas faturas e notas fiscais através do link Faturamento no Console, onde estarão disponíveis para visualização e download em formato digital. Em caso de dúvidas ou problemas, nossa equipe de suporte está à disposição para ajudá-lo.

---

Emissão e acesso as faturas
As faturas são fechadas mensalmente no dia 6 do mês subsequente ao consumo. Após o fechamento, as notas fiscais correspondentes são geradas e estarão disponíveis para baixar em poucos dias após o fechamento. Você poderá acessar suas faturas e notas fiscais através do link Faturamento no Console, onde estarão disponíveis para visualização e download em formato digital. Em caso de dúvidas ou problemas, nossa equipe de suporte está à disposição para ajudá-lo.

---

Tratamento das casas decimais
Em nosso sistema, os preços dos produtos são definidos em uma granularidade considerável, o que pode resultar em valores com mais de três casas decimais no cálculo do consumo. Para garantir consistência e transparência, adotamos uma regra de arredondamento: quando o valor monetário ultrapassa três casas decimais e o valor da quarta casa decimal é igual ou maior que 5, arredondamos o valor para cima.
Isso garante que os valores finais sejam representados de forma precisa e justa para nossos clientes.

---

Parcelamento ou negociação de faturas
Em alguns casos é possível negociar o parcelamento de faturas ou estabelecer acordos de pagamento alternativos em caso de dificuldades financeiras. Recomendamos entrar em contato com o suporte ao cliente para discutir opções de pagamento flexíveis e encontrar uma solução adequada para a situação específica.

---

Upgrade ou downgrade do meu produto ou serviço
Não é cobrada nenhuma taxa adicional para realizar um upgrade ou downgrade do seu produto ou serviço. No entanto, ao efetuar a
mudança, o novo recurso será cobrado proporcionalmente ao novo preço até o final do mês. Isso significa que você pagará apenas pela
diferença de preço entre o plano anterior e o novo plano, calculada com base no tempo restante no ciclo de faturamento atual. Essa
abordagem garante que você pague apenas pelo que está utilizando, sem taxas adicionais pela alteração do plano.

---

Período considerado para o cálculo da fatura
O período considerado para o cálculo da fatura é sempre o mês fechado, abrangendo do primeiro ao último dia do mês. Isso significa que
todas as transações e consumo de recursos realizados dentro desse intervalo de tempo serão refletidos na fatura correspondente ao final
do mês. Essa prática garante uma visão clara e abrangente dos custos e uso dos serviços durante o período de faturamento.

---

Atualização do valor mostrado na tela do faturamento
O valor mostrado na tela de faturamento é atualizado a cada 15 minutos para refletir os dados mais recentes. No entanto, é importante
observar que, devido ao tempo necessário para processar os cálculos, o valor exibido pode não ser exatamente em tempo real. O valor
exato e final só será exibido após o fechamento da fatura correspondente ao período de cobrança.

---

Atualização do valor mostrado na tela do faturamento
O valor mostrado na tela de faturamento é atualizado a cada 15 minutos para refletir os dados mais recentes. No entanto, é importante
observar que, devido ao tempo necessário para processar os cálculos, o valor exibido pode não ser exatamente em tempo real. O valor
exato e final só será exibido após o fechamento da fatura correspondente ao período de cobrança.

---

Atualizar minhas informações de pagamento
Atualmente, não temos uma interface disponível para que os usuários alterem seus dados cadastrais diretamente. No entanto, você pode
abrir uma solicitação de atendimento para atualizar suas informações de pagamento. Nossa equipe de suporte estará pronta para ajudá-lo
e garantir que suas informações sejam atualizadas de forma precisa e segura. Pedimos desculpas pelo inconveniente e agradecemos sua
compreensão enquanto trabalhamos para melhorar nossos sistemas e oferecer uma experiência mais conveniente para nossos clientes.

---

Política de reembolso em caso de cancelamento de um serviço
Não possuímos política de reembolso em caso de cancelamento. Entretanto, em uma situação de cancelamento, você será cobrado
apenas pelo consumo até a data do cancelamento. Estamos comprometidos em garantir transparência e equidade em nossas práticas de
cobrança.

---

Taxa adicional para pagamentos atrasados
Sim, em caso de pagamentos atrasados, serão aplicados juros e multa. No entanto, estamos aqui para ajudá-lo a evitar essas penalidades.
Se precisar de assistência com o pagamento ou tiver dificuldades, não hesite em entrar em contato conosco. Estamos comprometidos em
encontrar soluções que sejam justas e acessíveis para você.

---

Resumo detalhado do consumo de recursos em minha fatura
Sim, é possível. Por favor, abra uma solicitação de atendimento e enviaremos o mais breve possível um arquivo detalhado com o consumo
de recursos por categoria. Estamos comprometidos em fornecer todas as informações necessárias para garantir a transparência e o
entendimento completo das suas cobranças.

---

Cobrança no cartão de crédito em relação ao consumo dos serviços
A cobrança no cartão de crédito é realizada no mês subsequente ao consumo dos serviços. Normalmente, as cobranças são processadas
no dia 6 do mês seguinte ao período de uso dos recursos. Isso garante que você tenha tempo suficiente para revisar suas faturas antes do
pagamento e ajuda a manter um ciclo consistente de cobrança.

---

Variação na cotação do dólar afeta nossos preços
Nossos preços são calculados em reais, e a variação na cotação do dólar não influencia fortemente nossos preços. Isso significa que,
mesmo que haja flutuações na taxa de câmbio, os preços dos nossos serviços permanecem relativamente estáveis em relação ao real.
Estamos comprometidos em oferecer transparência e estabilidade em nossas políticas de preços para garantir uma experiência
consistente para nossos clientes.

---

Programa de Preview
O Programa de Preview é a forma mais fácil e rápida de começar a utilizar os lançamentos mais recentes da Magalu Cloud. Com um processo totalmente automatizado, você pode explorar os produtos disponíveis em apenas alguns cliques. Esteja sempre por dentro das inovações e contribua com a melhoria contínua dos produtos.
Importante: Produtos em estágio de “preview” significam que estão finalizados em termos de desenvolvimento, porém são liberados de forma cadenciada e controlada para o público geral.
Por que participar do programa?​

Facilidade para ativar novos produtos: basta você aceitar participar do programa através do console e começar a usar na mesma hora.
Contribua ativamente para melhoria contínua do produto: dê feedbacks sobre os produtos diretamente pelo portal, contribuindo para a evolução e robustez dos produtos disponíveis.
Otimize suas operações com novas funcionalidades: fique por dentro dos lançamentos mais recentes da Magalu Cloud e esteja à frente do mercado.

Os produtos disponíveis no programa estão em beta?​
Os produtos disponíveis no programa estão no estágio de Public Preview, ou seja, qualquer usuário pode utilizar e contribuir com feedbacks para melhoria contínua. Por isso, produtos neste estágio estão em evolução e podem possuir algumas limitações relacionadas a performance, escala ou suporte.
O Programa de Preview estará disponível para todos os clientes?​
Sim, basta você ter uma conta cadastrada na Magalu Cloud para ter acesso ao programa.
Como participar do Programa de Preview?​
Como ativar o Programa?​

Abra o Console e acesse sua conta.
Clique para expandir o menu lateral.
Clique em “habilitar produtos em preview”.
No modal, clique em “quero participar”.
Volte para a tela inicial e confira os produtos disponíveis.

Pronto, agora todos os produtos disponíveis no programa de preview estão habilitados na sua conta. Para começar a usar, basta configurar cada um deles e iniciar sua jornada agora mesmo.
Como eu faço para não participar mais do Programa?​
Quando você aceita participar do programa, os produtos disponíveis passam a aparecer no console, mas não é obrigatório o uso, apenas se houver necessidade. Não é possível deixar de participar do programa, mas fique tranquilo, pois não haverá nenhuma cobrança adicional.
Existe alguma cobrança para participar do Programa?​
Não haverá cobrança para participar do programa, somente se você começar a usar os produtos disponíveis (a variar de acordo com o produto). O programa apenas permite que você consiga acessar esses produtos de forma fácil e rápida, sem precisar de intermediários.
Como saber quais são os produtos disponíveis no Programa?​
Após você aceitar participar do programa, os produtos ficam disponíveis no menu lateral com a tag “preview”. Para ter mais informações sobre cada produto, basta acessar docs.magalu.cloud.
Por que o Programa não aparece para mim?​
Este programa está disponível exclusivamente para clientes com máquinas ligadas na região Sudeste (SE1). Se for o caso e mesmo assim o programa não está disponível para você, procure nosso time de atendimento em help.magalu.cloud.
Feedback​
Como posso enviar um feedback sobre o produto que estou usando?​

Abra a página/seção do produto que deseja enviar o feedback.
Procure pela caixa de feedback localizada no canto inferior direito.



Envie seu feedback.

Encontrei um problema, o que devo fazer?​
Acesse nossa central de ajuda em help.magalu.cloud para encontrar as dúvidas mais frequentes. Caso ainda não tenha encontrado a solução, utilize o botão "Enviar um ticket", localizado no final da página.


---

