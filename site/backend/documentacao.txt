Vis√£o Geral das Virtual Machines da Magalu Cloud
Este documento fornece uma vis√£o geral abrangente do produto de Virtual Machines oferecido pela Magalu Cloud e como ele funciona. As Virtual Machines (VMs) como o pr√≥prio nome diz s√£o m√°quinas virtuais, ou seja,  ambientes computacionais isolados criados por software de virtualiza√ß√£o. Cada VM funciona como um computador completo, com seu pr√≥prio sistema operacional, vCPU, mem√≥ria, armazenamento e outros recursos. As VMs podem ser executadas em um √∫nico servidor f√≠sico, permitindo que voc√™ execute v√°rios sistemas operacionais e aplicativos em um √∫nico dispositivo de hardware.
Funcionamento das Virtual Machines‚Äã
As Virtual Machines da Magalu Cloud funcionam atrav√©s de uma infraestrutura de virtualiza√ß√£o que permite a execu√ß√£o de m√∫ltiplos sistemas operacionais e aplicativos em um √∫nico servidor f√≠sico. Cada VM √© isolada e independente, permitindo que os usu√°rios tenham controle total sobre seu ambiente de computa√ß√£o. As VMs atuam com base em quatro elementos principais, s√£o eles:

Sistemas operacionais

Voc√™ pode executar uma ampla variedade de sistemas operacionais em suas VMs, incluindo Distribui√ß√µes Linux e Windows Server.

Recursos de computa√ß√£o escal√°veis

Voc√™ pode provisionar suas VMs com a quantidade de vCPUs, mem√≥ria e armazenamento que demandam as suas aplica√ß√µes de forma facilitada e intuitiva.

Armazenamento escal√°vel e independente

Voc√™ pode armazenar os dados de suas VMs em armazenamento em bloco (Block Storage), permitindo que voc√™ desligue ou delete sua m√°quina sem perder os dados armazenados, e em armazenamento em objetos (Object Storage), o que permite que seus dados fiquem acess√≠veis de qualquer lugar.

Configura√ß√µes de Rede

As VMs podem ser conectadas a redes privadas e p√∫blicas, permitindo uma integra√ß√£o f√°cil com outros servi√ßos e sistemas. Voc√™ pode definir regras de seguran√ßa, configurar IPs, DNS, gateways e gerenciar o tr√°fego de rede para suas VMs.
Passo a Passo do funcionamento de uma VM‚Äã
O funcionamento do servi√ßo de Virtual Machines pode ser resumido da seguinte forma:


Crie sua Inst√¢ncia: Provisione, instale e configure sua VM com sistema operacional e recursos desejados.


Anexe o Volume: Os usu√°rios podem fazer upload de objetos para seus buckets. Os objetos podem ser facilmente adicionados, atualizados ou exclu√≠dos conforme necess√°rio.


Configure as Regras de Seguran√ßa: Defina tipo de rede, configure IP, DNS, gateway, adicione interfaces e gerencie o tr√°fego.


Acesse sua Inst√¢ncia: Acesse remotamente sua inst√¢ncia. Conecte-se via SSH para inst√¢ncias de Distribui√ß√£o Linux ou via RDP para VMs com Windows Server.


Gerencie suas Inst√¢ncias: Monitore desempenho, aplique atualiza√ß√µes, fa√ßa snapshots, backups e escale recursos conforme necess√°rio.



---

Listar imagens dispon√≠veis

üñ•Ô∏è Console>_ CLIüë£ *Inicio > Menu > Virtual Machines
Clique em "Criar inst√¢ncia";
A lista de imagens aparecer√° no t√≥pico "Escolha uma imagem"
Para listar as imagens pela CLI use o comando:mgc virtual-machines machine-types list

---

Listar inst√¢cias

Para listar todas as inst√¢ncias execute o comando abaixo:
üñ•Ô∏è ConsoleCLIüë£ In√≠cio > Menu > Virtual MachinesAo seguir o caminho acima, as VMs criadas em todas as zonas da mesma regi√£o ser√£o listadas.mgc virtual-machines instances list

---

Consultar detalhes de uma inst√¢ncia

Para consultar detalhes de uma inst√¢ncia execute o comando abaixo:
üñ•Ô∏è Console>_ CLIüë£In√≠cio > Menu > Virtual Machines > Inst√¢ncia > Detalhes da VMNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja visualizar os detalhes


Clique em "Detalhes da VM"

mgc virtual-machines instances get --id="0377d966-4a2d-485f-81b9-37273ba26471"Para ter ainda mais detalhamento, √© poss√≠vel utilizar a flag --expand com um dos valores abaixo
image
machine-type
network
Exemplo:mgc virtual-machines instances get --id="0377d966-4a2d-485f-81b9-37273ba26471" --expand image,machine-type,network

---

Acessar inst√¢ncia Windows
Este documento ir√° gui√°-lo pelas etapas para acessar remotamente uma m√°quina Windows usando o protocolo RDP e Remmina.
Este tutorial pressup√µe que voc√™ j√° tenha uma inst√¢ncia com Windows. Caso n√£o tenha ainda, o processo de cria√ß√£o de uma inst√¢ncia do Windows Server pode ser visto em Criar uma inst√¢ncia Windows.
Para acessar a inst√¢ncia Windows voc√™ precisar√°:


Habilitar porta


Acessar via RDP ou Remmina


Habilitando porta‚Äã
Habilitar a porta 3389 √© essencial para permitir o acesso remoto √† sua inst√¢ncia do Windows Server por meio do Remote Desktop Protocol (RDP).
Sem essa porta habilitada, o Windows Server n√£o escutaria conex√µes RDP de entrada. Consequentemente, as tentativas de conex√£o remota ao servidor falhariam, pois n√£o haveria canal designado para comunica√ß√£o.
Para habilitar a comunica√ß√£o pela porta 3389 para acesso remoto √† sua inst√¢ncia do Windows Server, siga estas etapas:


Acesse sua inst√¢ncia no painel do servi√ßo de nuvem.


Navegue at√© os  Detalhes da inst√¢ncia.


Na se√ß√£o de "Rede", localize o "Grupos de Seguran√ßa".


Clique em ‚ÄúAdicionar regra‚Äù para criar uma nova regra.


Na nova p√°gina de configura√ß√£o de regras:

Clique em ‚ÄúAvan√ßado‚Äù.
Selecione ‚ÄúTCP‚Äù como protocolo.
Escolha "Ingress" como dire√ß√£o.
Defina a porta para "3389".
Especifique o IP de origem como "0.0.0.0".
Clique em ‚ÄúAdicionar regra‚Äù para aplicar a configura√ß√£o.



Com esta regra em vigor, voc√™ poder√° acessar sua inst√¢ncia remotamente usando o Remote Desktop Protocol.
Remote Desktop Connection‚Äã
Se voc√™ usa Windows, √© poss√≠vel estabelecer uma conex√£o remota com outra m√°quina Windows usando o programa ‚ÄúRemote Desktop Connection‚Äù.


Para abrir o programa, abra o ‚ÄúMenu Iniciar‚Äù e digite ‚ÄúConex√£o de √Årea de Trabalho Remota‚Äù.


Na janela que se abre, insira o IP da m√°quina Windows √† qual deseja se conectar e clique em ‚ÄúConectar‚Äù.


Outra janela ser√° aberta solicitando que voc√™ insira as credenciais:

Em Nome de usu√°rio, coloque Administrador.
Em Senha, coloque W1ndows.



Remmina (Linux)‚Äã
Se voc√™ usa distribui√ß√µes Linux, √© poss√≠vel estabelecer uma conex√£o com uma m√°quina Windows usando Remmina.
Se voc√™ usa Ubuntu, pode instal√°-lo via Terminal com o comando:
sudo apt-get install remmina
Se voc√™ usa outras distribui√ß√µes, verifique no reposit√≥rio da sua distribui√ß√£o como instalar o remmina.
Configurando Remmina‚Äã


Abra o Remmina em sua m√°quina Linux


Clique em ‚ÄúConex√£o‚Äù > ‚ÄúNova conex√£o‚Äù.


Selecione "RDP" como protocolo.


No campo ‚ÄúServidor‚Äù, digite o nome do computador remoto ou seu endere√ßo IP.


No campo Nome de usu√°rio (Username), coloque Administrador.


No campo Senha (Password), coloque W1ndows.


Preencha o nome da sess√£o, se desejar.


Clique em "Salvar".


Depois disso, sua conex√£o ser√° salva na tela inicial. Para estabelecer uma conex√£o com a m√°quina, basta clicar duas vezes na entrada da tabela.

---

Criar inst√¢ncia

Para criar uma inst√¢ncia execute os comandos abaixo:
üñ•Ô∏è Console>_ CLIüë£In√≠cio > Menu > Virtual MachinesNa p√°gina de Virtual Machines, clique no bot√£o para "Criar inst√¢ncia".

Escolha a regi√£o em que deseja criar sua inst√¢ncia. Recomendamos escolher a regi√£o mais pr√≥xima aos destinat√°rios da sua aplica√ß√£o.


Escolha uma imagem, um Sistema Operacional, e a vers√£o da imagem que deseja.


Escolha um tipo inst√¢ncia. Defina a quantidade de vCPUs, de mem√≥ria RAM em GB e de disco local em GB mais adequada para a aplica√ß√£o que deseja.


Opcionalmente, escolha se deseja atribuir um IPv4 p√∫blico para essa inst√¢ncia. Por padr√£o, o IPv6 p√∫blico √© gerado automaticamente ap√≥s a cria√ß√£o da inst√¢ncia.

infoAssociar um IPv4 P√∫blico √† inst√¢ncia serve para exposi√ß√£o de servi√ßos na Internet conforme estiver configurado no Security Group relecionado a ela.
Insira uma chave SSH ou selecione uma chave j√° utilizada anteriormente.
infoAcesse o documento para saber mais sobre e como Inserir uma Chave SSH.
Por fim, defina o nome da sua inst√¢ncia. Para o nome da inst√¢ncia s√£o permitidas apenas letras min√∫sculas, h√≠fen, underline e n√∫meros.
Para criar sua Inst√¢ncia execute o comando abaixo de acordo com suas deini√ß√µes de inputs.Por Nome‚Äãmgc virtual-machines instances create --name="name-instance-2" --machine-type.name="cloud-bs1.xsmall" --image.name="cloud-ubuntu-24.04 LTS" --ssh-key-name="ssh_key_name"Por ID‚Äãmgc virtual-machines instances create --name="name-instance-1" --machine-type.id="45d57c50-61d3-46fc-992e-77f5605dd561" --image.id="57b93394-a161-4b32-8262-52a6f4148837" --ssh-key-name="ssh_key_name" Exemplo de Retorno‚Äã‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ ID                                   ‚îÇ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ 0377d966-4a2d-485f-81b9-37273ba26471 ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îòFlags‚ÄãPara criar uma inst√¢ncia voc√™ precisar√° dar como entrada no comando as seguintes flags:NomeTipoDescri√ß√£oObrigat√≥rionamestringNome da Inst√¢nciaYesimageobjectNome ou ID da ImagemYesimage.idstringID da ImagemNoimage.namestringNome da ImagemNomachine-typeobjectNome ou ID do Tipo de Inst√¢nciaYesmachine-type.idstringID do Tipo de Inst√¢nciaNomachine-type.namestringNome do Tipo de Inst√¢nciaNonetworkobjectPropriedades de Associa√ß√£o de IP P√∫blico eou  VPC (Para mais detalhes acessar documenta√ß√£o de Network)Nonetwork.associate-public-ipbooleanAssocia√ß√£o de IP P√∫blico (Default √© "true")Nonetwork.vpcobjectNome ou ID da VPCNonetwork.vpc.idstringID da VPCNonetwork.vpc.namestringNome da VPCNossh-key-namestringNome da chave SSHYesDefini√ß√µes das flags obrigat√≥rias:--name: Defina o nome da inst√¢ncia (entre 1 a 255 caracteres)--machine.type ou --machine.id: Defina o tipo de inst√¢ncias dispon√≠veis para isso Liste todos os tipos de Inst√¢ncias ou Veja os documento com as Tipos de inst√¢ncias dispon√≠veis.--image.type ou --image.id: Defina a imagem, Sistema Operacional, dispon√≠veis para isso Liste todas as Imagens ou Veja os documento com Imagens dispon√≠veis.--ssh-key-name: Defina a chave SSH que deseja utilizar para acessar a Inst√¢ncia. Previamente, acesse como Como inserir uma Chave SSH.infoPara definir as configura√ß√µes avan√ßadas de redes acesse Como configurar VPC.

---

Criar inst√¢ncia Windows

Para criar uma inst√¢ncia Windows Server 2022 √© necess√°rio utilizar a CLI da Magalu Cloud. Em breve iremos disponibilizar essa oferta de sistema operacional no Console.
>_ CLIPr√©-Requisito‚ÄãAntes de come√ßar, certifique-se de ter a Chave SSH cadastrada no Console da Magalu Cloud, conforme o documento Inserir e Gerenciar Chaves SSH.A imagem do Windows Server 2022 foi registrada com o nome windows-server-2022 em nossa API. As imagens do Windows requerem pelo menos 2 vCPUs, 4 GB de RAM e um m√≠nimo de 40 GB de disco para funcionar corretamente.Para criar uma inst√¢ncia do Windows Server 2022, usaremos o seguinte comando:mgc virtual-machines instances create \--name="Minha M√°quina Windows" \--machine-type.name="<instance_type>" \--image.name "windows-server-2022" \--ssh-key-name="<ssh-key-name>"Ap√≥s executar o comando, voc√™ receber√° uma resposta semelhante a esta:‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê‚îÇ ID                                   ‚îÇ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§‚îÇ a22b308f-e3fe-4239-af67-902cc0745775 ‚îÇ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îòEsta resposta indica que a inst√¢ncia foi criada com sucesso e fornece o ID da inst√¢ncia gerada.

---

Gerar Chaves SSH

Chaves SSH consistem em um par de chaves: uma p√∫blica e uma privada. A chave p√∫blica √© carregada para a inst√¢ncia de VM, enquanto a chave privada permanece segura no seu dispositivo local. Juntas, elas permitem a autentica√ß√£o sem senha ao acessar a VM.
Para gerar o par de chaves SSH siga as instru√ß√µes abaixo de acordo com o seus sistema operacional
Em Sistemas Linux ou MacOS‚Äã


Abra o terminal: A maioria das distribui√ß√µes Linux j√° vem com o OpenSSH instalado, ent√£o voc√™ pode usar o terminal diretamente.


Gerar a chave SSH:



Execute o seguinte comando:

ssh-keygen -t rsa

Voc√™ ser√° solicitado a escolher um local para salvar a chave. Pressione Enter para aceitar o local padr√£o (~/.ssh/id_rsa).
Em seguida, ser√° solicitado a criar uma senha para proteger a chave privada (opcional, mas recomendado).


Verifique a chave SSH: Sua chave p√∫blica estar√° dispon√≠vel em ~/.ssh/id_rsa.pub. Para visualizar, use:

 cat ~/.ssh/id_rsa.pub

Inserir uma Chave SSH sua chave SSH seguindo as seguintes orienta√ß√µes.

Em Sistemas Windows‚Äã


Instalar o OpenSSH (se necess√°rio): No Windows 10 e 11, o OpenSSH geralmente j√° vem instalado. Caso contr√°rio, voc√™ pode instalar atrav√©s das "Configura√ß√µes" > "Aplicativos" > "Recursos Opcionais" > "Adicionar recurso" e adicionar "Cliente OpenSSH".


Abra o PowerShell: Use o atalho Win + X e selecione "Windows PowerShell".


Gerar a chave SSH:



Execute o comando:

ssh-keygen -t rsa

Siga os prompts para salvar a chave no local padr√£o (C:\Users\SeuNomeDeUsu√°rio.ssh\id_rsa) e criar uma senha para a chave.


Verifique a chave SSH: Use o comando abaixo para visualizar a chave p√∫blica

Get-Content ~/.ssh/id_rsa.pub

---

Inserir Chaves SSH

Para inserir uma chave SSH em uma inst√¢ncia siga o passo a passo:
üñ•Ô∏è Console>_ CLIüë£In√≠cio > Menu > Virtual Machines > Criar Inst√¢nciaNo formul√°rio de cria√ß√£o de inst√¢ncia na se√ß√£o Chave SSH:

Clique "Inserir uma chave pr√≥pria nova"


Defina o nome da sua Chave SSH P√∫blica que ficar√° armazenada. Para o nome da chave SSH s√£o permitidas apenas letras min√∫sculas, h√≠fen, underline e n√∫meros.


Insira sua chave SSH, copiando e colando ela do seu gerador de chaves.

infoAcesse o documento para saber mais sobre e como Gerar uma Chave SSH..Verique a documenta√ß√£o aqui

---

Deletar inst√¢cia

Para excluir permanentemente uma inst√¢ncia, execute o comando abaixo.
infoOrientamos primeiramente sempre a voc√™ desanexar volumes e/ou desassociar IPs vinculados a inst√¢ncia a ser deletada para que n√£o haja acidentes ou inconsist√™ncias nos dados dos recursos que escolher manter.
üñ•Ô∏è Console>_ CLIüë£In√≠cio > Menu > Virtual MachinesNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja deletar


Clique em "Excluir"


Confirme a opera√ß√£o digitando o nome da inst√¢ncia

infoA dele√ß√£o das inst√¢ncias √© irrevers√≠vel, n√£o podendo ser recuperada depois. Por√©m esta a√ß√£o n√£o afeta qualquer imagem gerada da mesma.mgc virtual-machines instances delete --id 66afc2fa-36eb-43b4-9619-35df0e3f9ad7Flags‚ÄãTabela com explica√ß√£o sobre as flags utilizadas no comando:NomeTipoDescri√ß√£oObrigat√≥rioidstringO id da inst√¢nciaYesdelete_public_ipbooleanEscolha excluir ip p√∫blico juntosNoinfoNote que voc√™ poder√° deletar simult√¢neamente o Public IP associado a sua inst√¢ncia a ser deletada.

---

Iniciar inst√¢ncia

Para iniciar uma inst√¢ncia de Virtual Machines, siga as instru√ß√µes:
üñ•Ô∏è ConsoleCLIüë£In√≠cio > Menu > Virtual MachinesNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja iniciar


Clique em "Ligar inst√¢ncia"

mgc virtual-machines instances start --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags‚ÄãTabela com explica√ß√£o sobre as flags utilizadas no comando:NomeTipoDescri√ß√£oObrigat√≥rioidstringO ID da inst√¢nciaYes

---

Interromper inst√¢ncia

Para interromper uma inst√¢ncia de m√°quina virtual, execute o comando abaixo.
üñ•Ô∏è ConsoleCLIüë£In√≠cio > Menu > Virtual MachinesNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja interromper


Clique em "Desligar inst√¢ncia"

mgc virtual-machines instances stop --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags‚ÄãTabela com explica√ß√£o sobre as flags utilizadas no comando:NomeTipoDescri√ß√£oObrigat√≥rioidstringO ID da inst√¢nciaYes

---

Suspender inst√¢ncia

Para suspendar uma inst√¢ncia de Virtual Machines, execute o comando abaixo.
üñ•Ô∏è Console>_ CLIüë£In√≠cio > Menu > Virtual MachinesNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja suspender


Clique em "Detalhes da inst√¢ncia"


No canto superior direito, h√° o status atual da m√°quina. Selecione "Suspender inst√¢ncia"

mgc virtual-machines instances suspend --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags‚ÄãTabela com explica√ß√£o sobre as flags utilizadas no comando:NomeTipoDescri√ß√£oObrigat√≥rioidstringO ID da inst√¢nciaYes

---

Reiniciar inst√¢cia

Para reiniciar uma inst√¢ncia de Virtual Machines, execute o comando abaixo.
üñ•Ô∏è ConsoleCLIüë£In√≠cio > Menu > Virtual MachinesNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja reiniciar


Clique em "Detalhes da inst√¢ncia"


No canto superior direito, h√° o status atual da m√°quina. Selecione "Reiniciar inst√¢ncia"

mgc virtual-machines instances reboot --id="0377d966-4a2d-485f-81b9-37273ba26471"Flags‚ÄãTabela com explica√ß√£o sobre as flags utilizadas no comando:NomeTipoDescri√ß√£oObrigat√≥rioidstringO ID da inst√¢nciaYes

---

Resize de inst√¢ncia
Para alterar o tipo de uma inst√¢ncia, execute o comando abaixo na CLI. Esta mesma a√ß√£o estar√° dispon√≠vel no console em breve.
üñ•Ô∏è Console>_ CLIüë£In√≠cio > Menu > Virtual MachinesNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja alterar o tipo de inst√¢ncia


Clique em "Resize da inst√¢ncia"


Escolha o novo tipo de inst√¢ncia que deseja

infoO novo tipo de inst√¢ncia precisa necessariamente ter o disco local com tamanho igual ou maior ao do disco anterior.Neste modelo √© utilizado o nome da inst√¢ncia com a flag --machine-type.namemgc virtual-machine instances retype --id="0377d966-4a2d-485f-81b9-37273ba26471" --machine-type.name cloud-gp1.largeNeste modelo √© utilizado o id da inst√¢ncia com a flag --machine-type.idmgc virtual-machine instances retype --id="0377d966-4a2d-485f-81b9-37273ba26471" --machine-type.id="0138757f-032c-4699-899c-a268cc477710"Flags‚ÄãTabela com explica√ß√£o sobre as flags utilizadas no comando:NameTypeDescriptionRequiredidstringO id da inst√¢nciaYesmachine-type.idstringO ID do tipo de m√°quinaNomachine-type.namestringO nome do tipo de m√°quinaNoRegras‚Äã
A inst√¢ncia deve estar no estado em execu√ß√£o ou parada.
O novo tipo de m√°quina deve ser compat√≠vel com o tipo de m√°quina atual.
O novo tipo de m√°quina deve estar dispon√≠vel na mesma regi√£o que o tipo de m√°quina atual.
Voc√™ deve fornecer o ID do tipo de m√°quina ou o nome do tipo de m√°quina; se fornecer ambos, o ID do tipo de m√°quina ser√° usado.


---

Anexar uma NIC a uma inst√¢ncia
Para anexar uma NIC (Network Interface) a uma inst√¢ncia, execute o comando abaixo na CLI. Esta mesma a√ß√£o estar√° dispon√≠vel no console em breve.
Pr√©-requisitos‚Äã

Ter uma NIC criada em Network

mgc virtual-machines instances network-interface --instance.id="0377d966-4a2d-485f-81b9-37273ba26471" --network.interface.id="0138757f-032c-4699-899c-a268cc477710" 
Flags‚Äã
Tabela com explica√ß√£o sobre as flags utilizadas no comando:
NomeTipoDescri√ß√£oObrigat√≥rioinstance.idstringO id da inst√¢nciaYesnetwork.interface.idstringO id do NIC (Network Interface)Yes

---

Renomear inst√¢ncia
Para renomear uma inst√¢ncia, execute o comando abaixo na CLI. Esta mesma a√ß√£o estar√° dispon√≠vel no console em breve.
mgc virtual-machines instances rename --id="0377d966-4a2d-485f-81b9-37273ba26471" --name="nem_name_instance"
Flags‚Äã
Tabela com explica√ß√£o sobre as flags utilizadas no comando:
NomeTipoDescri√ß√£oObrigat√≥rioidstringO id da inst√¢nciaYesnamestringO novo nome da inst√¢nciaYes

---

Desanexar uma NIC a uma inst√¢ncia
Para desanexar uma NIC (Network Interface) de uma inst√¢ncia, execute o comando abaixo na CLI. Esta mesma a√ß√£o estar√° dispon√≠vel no console em breve.
mgc virtual-machines instances network-interface --instance.id="0377d966-4a2d-485f-81b9-37273ba26471" --network.interface.id="0138757f-032c-4699-899c-a268cc477710" 
Flags‚Äã
Tabela com explica√ß√£o sobre as flags utilizadas no comando:
NomeTipoDescri√ß√£oObrigat√≥rioinstance.idstringO id da inst√¢nciaYesnetwork.interface.idstringO id do NIC (Network Interface)Yes

---

Listar tipos de m√°quinas

Para listar os tipos de inst√¢ncias dispon√≠veis, execute o comando abaixo:
üñ•Ô∏è Console>_ CLIüë£ In√≠cio > Menu > Virtual Machines
Clique em "Criar inst√¢ncia";
A lista de tipos de inst√¢ncia aparecer√° no t√≥pico "Escolha um tipo de inst√¢ncia"
mgc virtual-machines machine-types list

---

Listar as imagens

Para listar as imagens execute o comando abaixo:
üñ•Ô∏è ConsoleCLIüë£ In√≠cio > Menu > Virtual Machines > Minhas imagensAo seguir o caminho acima, ser√£o listadas todas as imagens.mgc virtual-machines snapshots list

---

Consultar detalhes de uma imagem

Para consultar detalhes de uma imagem rode o comando abaixo:
üñ•Ô∏è Console>_ CLIüë£ In√≠cio > Menu > Virtual Machines > Minhas imagensAo seguir o caminho acima, ser√£o listadas todas as imagens com detalhes.mgc virtual-machines snapshots get --id f91b0872-997f-40b3-87fa-24bbba54658b

---

Criar uma imagem

Para criar uma imagem da sua inst√¢ncia execute o comando abaixo:
infoCaso a sua inst√¢ncia se encontre ligada, recomendamos que antes de criar a imagem voc√™ desligue a inst√¢ncia para n√£o gerar inconsist√™ncia nos dados da imagem.
üñ•Ô∏è ConsoleCLIüë£In√≠cio > Menu > Virtual MachinesNa listagem de inst√¢ncias da p√°gina de Virtual Machines:

Clique no menu da inst√¢ncia que deseja criar uma imagem


Clique em "Criar imagem"


Uma sugest√£o de nome √© fornecida mas voc√™ pode definir o nome da imagem de sua prefer√™ncia. Para o nome da imagem s√£o permitidas apenas letras min√∫sculas, h√≠fen, underline e n√∫meros.


Clique em "Criar imagem"

mgc virtual-machines snapshots create --name my-snapshot  --virtual-machine.id 0e2dc76-1215-47a7-9fc3-a5b45d5dbedc

---

Deletar uma imagem

Para deletar um imagem da sua inst√¢ncia execute o comando abaixo:
üñ•Ô∏è Console>_ CLIüë£In√≠cio > Menu > Virtual Machines > Minhas imagensNa p√°gina de Virtual Machines na aba de Minhas imagens:

Clique no menu da imagem que deseja deletar


Clique em "Excluir"


Confirme a opera√ß√£o digitando o nome da inst√¢ncia

infoA dele√ß√£o das imagens √© irrevers√≠vel, n√£o podendo ser recuperada depois. Por√©m esta a√ß√£o n√£o afeta qualquer inst√¢ncia da onde essa imagem foi gerada ou inst√¢ncias que foram geradas a partir de uma imagem.mgc virtual-machines snapshots delete --id 90e2dc76-1215-47a7-9fc3-a5b45d5dbedc

---

Restaurar uma imagem

Para restaurar uma imagem em uma nova inst√¢ncia execute o comando abaixo:
ConsoleCLIüë£In√≠cio > Menu > Virtual Machines > Minhas imagensNa p√°gina de Virtual Machines na aba de Minhas imagens:
Clique no menu da imagem que deseja restaurar
infoA imagem estar√° pronta para restaura√ß√£o quando estiver no estado dispon√≠vel.

Clique em "Restaurar imagem"


Escolha um tipo de inst√¢ncia que possua Disco igual ou maior ao tamanho da imagem


Defina a chave SSH, selecionando uma chave ou inserindo uma nova chave.


Defina um nome da inst√¢ncia com imagem restaurada.

mgc virtual-machines instances restore --id 90e2dc76-1215-47a7-9fc3-a5b45d5dbedc --name="name-instance-2" --machine-type.name="cloud-bs1.xsmall" --ssh-key-name="ssh_key_name"Flags‚ÄãNomeTipoDescri√ß√£oObrigat√≥rionamestringNome da Inst√¢nciaYesimage.idstringID da ImagemYesidstringID da ImagemNomachine-typeobjectNome ou ID do Tipo de Inst√¢nciaYesmachine-type.idstringID do Tipo de Inst√¢nciaNomachine-type.namestringNome do Tipo de Inst√¢nciaNonetworkobjectPropriedades de Associa√ß√£o de IP P√∫blico eou  VPC (Para mais detalhes acessar documenta√ß√£o de Network)Nonetwork.associate-public-ipbooleanAssocia√ß√£o de IP P√∫blico (Default √© "true")Nonetwork.vpcobjectNome ou ID da VPCNonetwork.vpc.idstringID da VPCNonetwork.vpc.namestringNome da VPCNossh-key-namestringNome da chave SSHYesDefini√ß√µes das flags obrigat√≥rias:
--id: O ID da imagem (snapshot) que deseja restaurar.
--name: Defina o nome da inst√¢ncia (entre 1 a 255 caracteres)
--machine.type ou --machine.id: Defina o tipo de inst√¢ncias dispon√≠veis para isso Liste todos os tipos de Inst√¢ncias ou Veja os documento com as Tipos de inst√¢ncias dispon√≠veis.
--ssh-key-name: Defina a chave SSH que deseja utilizar para acessar a Inst√¢ncia. Previamente, acesse como Como inserir uma Chave SSH.infoPara definir as configura√ß√µes avan√ßadas de redes acesse Como configurar VPC.

---

Renomear uma imagem
Para renomear uma imagem, execute o comando na CLI. Esta mesma a√ß√£o estar√° dispon√≠vel no console em breve.
mgc virtual-machines snapshots rename \--id 90e2dc76-1215-47a7-9fc3-a5b45d5dbedc \--name renamed-snapshot

---

Status e States de uma inst√¢ncia
Ao gerenciar inst√¢ncias do produto de Virtual Machines, voc√™ encontrar√° os termos Status e States. Embora possam parecer semelhantes, esses conceitos t√™m significados distintos e desempenham pap√©is diferentes no gerenciamento de inst√¢ncias de VMs.
Diferen√ßa entre Status e States‚Äã
Status de uma inst√¢ncia‚Äã
Status refere-se √† condi√ß√£o operacional atual da VM, representando a sa√∫de, disponibilidade e outras m√©tricas de desempenho que indicam se a VM est√° funcionando corretamente ou enfrentando problemas. O Status ajuda a determinar se a VM est√° pronta para uso, se requer aten√ß√£o, ou se est√° passando por manuten√ß√£o.
States de uma inst√¢ncia‚Äã
States, por outro lado, representam o ciclo de vida operacional da VM. Isso indica o estado em que a VM se encontra dentro do seu ciclo de vida, desde a cria√ß√£o at√© a exclus√£o. O State reflete as a√ß√µes que est√£o sendo executadas na VM, como inicializa√ß√£o, parada, suspens√£o, reinicializa√ß√£o ou encerramento.
Lista de Status e States dispon√≠veis‚Äã
Status‚Äã
Os Status das inst√¢ncias ofertadas na Magalu Cloud s√£o:


Criando (Provisioning/Creating): A VM est√° sendo criada e os recursos necess√°rios est√£o sendo alocados.


Ligando (Starting): A VM est√° em processo para ligar.


Desligando (Stopping): A VM est√° em processo de desligamento.


Suspendendo (Supending): O processo de suspens√£o foi iniciado, onde a VM √© colocada em um estado de suspens√£o, preservando seu estado atual na mem√≥ria, mas parando a execu√ß√£o.


Rebooting: A VM est√° sendo reiniciada, o que implica em uma parada tempor√°ria e uma nova inicializa√ß√£o.


Redimensionando (Resizing/Retyping): O processo de altera√ß√£o do tipo de inst√¢ncia que far√° com que a inst√¢ncia tenha tamanho diferente est√° em andamento.


Pendente (Pending): A VM est√° sendo iniciada ou uma a√ß√£o est√° sendo processada.


Excluindo (Deleting): A VM est√° sendo exclu√≠da.


States‚Äã
Os States descrevem o ciclo de vida da VM, que inclui:


Ligado (Running): A VM foi provisionada e est√° ativa, pronta para uso.


Desligado (Stopped): A VM est√° parada, seja por uma a√ß√£o do usu√°rio ou devido a um evento do sistema.


Suspended (Suspenso): A VM foi suspensa temporariamente, mantendo seu estado em mem√≥ria, mas n√£o executando nenhuma opera√ß√£o.


Error (Erro): A VM encontrou um problema e requer interven√ß√£o.



---

Dicas de flags no CLI
Limit‚Äã
Voc√™ pode usar --control.limit  para controlar a quantidade de resultados que ser√£o impressos:
mgc virtual-machines machine-types list --control.limit 10
Offset‚Äã
Voc√™ pode usar --control.offset  para controlar o offset de resultados que ser√£o impressos:
mgc virtual-machines machine-types list --control.offset 10
Sort‚Äã
Voc√™ pode usar --control.sort  para controlar a ordena√ß√£o dos resultados que ser√£o impressos:
mgc virtual-machines machine-types list --control.sort name:asc,end_standard_support_at:desc

---

Pre√ßo
A estrutura de pre√ßos das Virtual Machines √© baseada no modelo de cobran√ßa por uso (pay-as-you-go), garantindo flexibilidade para ajustar seus custos conforme suas necessidades. O pre√ßo √© calculado com base no tipo da inst√¢ncia escolhida e no tempo de uso.
Inst√¢ncias de Virtual Machines:‚Äã
O pre√ßo das inst√¢ncias √© determinado pelo tipo de m√°quina (vCPU, mem√≥ria RAM, Disco Local (NVMe) e desempenho) e pelo tempo em que a inst√¢ncia existe.
Importante ressaltar que a cobran√ßa √© realizada pela aloca√ß√£o da inst√¢ncia, independentemente do status da inst√¢ncia (ligada, desligada ou suspensa). Ou seja, m√°quinas que n√£o est√£o ligadas ainda geram custos enquanto n√£o forem exclu√≠das. Atualmente, estamos trabalhando para flexibilizar esse modelo conforme a altera√ß√£o dos status da inst√¢ncia.
Licen√ßas de Sistemas Operacionais:‚Äã
Para sistemas operacionais que exigem licen√ßas pagas, como o Windows, a cobran√ßa √© feita separadamente. No caso do Windows, as licen√ßas s√£o cobradas com base no n√∫mero de pares de vCPUs e pelo per√≠odo de uso da m√°quina.
Servi√ßos Adicionais:‚Äã
Al√©m das inst√¢ncias, outros servi√ßos como volumes de Block Storage, IPs P√∫blicos e Tr√°fego de Sa√≠da (Egress) de Network tamb√©m s√£o cobrados separadamente. Isso permite que voc√™ ajuste a configura√ß√£o da sua infraestrutura conforme suas necessidades, pagando apenas pelos recursos adicionais que utilizar.
Snapshots:‚Äã
Atualmente, n√£o est√£o sendo cobrados, mas isso pode ser por tempo indeterminado. Qualquer mudan√ßa nesta pol√≠tica ser√° comunicada previamente, garantindo transpar√™ncia e previsibilidade de custos.
Pre√ßos‚Äã
Os pre√ßos para cada tipo de volume podem ser consultados diretamente na p√°gina de pre√ßos do website da Magalu Cloud, onde os valores s√£o apresentados de forma clara e atualizada.
Exemplo de C√°lculo de Custos:‚Äã
Caso 1:‚Äã
Suponha que voc√™ crie uma inst√¢ncia do tipo BV2-4-40 com 2 vCPUs, 4 GB de RAM e 40 GB de disco local (NVMe), utilizando-a por 730 horas (equivalente a um m√™s), e com sistema operacional Windows.
A cobran√ßa seria:

Inst√¢ncia Windows BV2-4-40: 730 horas x pre√ßo do tipo BV2-4-40 com sistema Windows

Caso 2:‚Äã
Suponha que voc√™ crie uma inst√¢ncia do tipo BV4-8-100 com 4 vCPUs, 8 GB de RAM e 1000 GB de disco local (NVMe), utilizando-a por 730 horas (equivalente a um m√™s), e com sistema operacional Ubuntu. Al√©m disso, voc√™ adicionou um IPv4 e trafegou externamente 200 GiB durante esse m√™s. Ainda, adicionou um volume de 5.000 IOPS com 100 GiB  A cobran√ßa seria:

Inst√¢ncia Ubuntu BV4-8-100: 730 horas x pre√ßo do tipo BV4-8-100
IPv4 P√∫blico: 730 horas x pre√ßo do IPv4 por hora
Egress de Transfer√™ncia de Dados: 200 GiB x pre√ßo por GiB transferido de sa√≠da
Volume de Block Storage: 100 GiB x 730 horas x pre√ßo por GB/hora do tipo de volume de 5.000 IOPS

Note que neste exemplo:

A m√°quina com sistema operacional Ubuntu n√£o gera custos de licen√ßa adicional.
O volume de armazenamento, o IP p√∫blico e a transfer√™ncia de dados de sa√≠da (egress) s√£o cobrados separadamente com base no uso.
A transfer√™ncia de dados egress inclui o tr√°fego de sa√≠da da sua inst√¢ncia para a internet ou outras redes, e o valor √© calculado conforme o volume de dados transferidos.

Esses componentes resultam em custos detalhados, e voc√™ pode acompanhar todos os gastos em tempo real na p√°gina de Faturamento do Console da Magalu Cloud, que oferece uma vis√£o completa sobre o uso de suas Virtual Machines, volumes de armazenamento, IPs p√∫blicos e transfer√™ncia de dados.

---

Ofertas de imagens dispon√≠veis
As imagens dispon√≠veis para sua inst√¢ncia s√£o as seguintes:
TipoImagemVers√µes Dispon√≠veisDistro LinuxUbuntu24.04; 22.04; 20.04Distro LinuxDebian12; 11; 10Distro LinuxOracle Linux9.3; 8.9Distro LinuxRocky9; 8Distro LinuxOpensuse15.5Distro LinuxFedora38; 37MicrosoftWindows Server2022
Caso necessite de alguma imagem diferente das dispon√≠veis, por favor, solicite no Suporte.

---

Ofertas de inst√¢ncias dispon√≠veis
Os tipos de inst√¢ncias dispon√≠veis s√£o:
Tipos de Inst√¢nciavCPURAM (GB)Disco Local (GB)i1-c1-r1-d101110i1-c1-r2-d201220i1-c1-r4-d201420i1-c2-r2-d102210i1-c2-r2-d202220i1-c2-r2-d402240i1-c2-r2-d10022100i1-c2-r2-d15022150i1-c2-r4-d102410i1-c2-r4-d202420i1-c2-r4-d402440i1-c2-r4-d10024100i1-c2-r4-d15024150i1-c4-r4-d204420i1-c4-r4-d404440i1-c4-r4-d10044100i1-c4-r4-d15044150i1-c4-r8-d204820i1-c4-r8-d404840i1-c4-r8-d10048100i1-c4-r8-d15048150i1-c8-r8-d408840i1-c8-r8-d10088100i1-c8-r8-d15088150i1-c8-r16-d4081640i1-c8-r16-d100816100i1-c8-r16-d150816150i1-c8-r32-d4083240i1-c8-r32-d100832100i1-c8-r32-d150832150i1-c16-r16-d40161640i1-c16-r16-d1001616100i1-c16-r16-d1501616150i1-c16-r32-d40163240i1-c16-r32-d1001632100i1-c16-r32-d1501632150i1-c32-r64-d40326440i1-c32-r64-d1503264150i1-c4-r8-d404840
Nem todos os tipos de inst√¢ncia est√£o dispon√≠veis para determinados sistema operacionais:

Windows Server aceita apenas tipos de inst√¢ncias com 2 ou mais vCPUs e com disco local maior ou igual a 40GB.
Oracle Linux aceita apenas tipos de inst√¢ncia com disco local maior ou igual a 40GB.


---

Vis√£o Geral
Este documento apresenta uma vis√£o detalhada do servi√ßo de Object Storage fornecido pela
Magalu Cloud. O Object Storage √© uma solu√ß√£o de armazenamento de objetos em nuvem,
compat√≠vel com a API S3, que se destaca pela sua escalabilidade, seguran√ßa e
confiabilidade. Este servi√ßo √© ideal para atender √†s diversas necessidades de
armazenamento de dados de empresas de todos os portes e setores.
Estrutura do Object Storage‚Äã
O servi√ßo de Object Storage da Magalu Cloud √© estruturado em dois componentes principais:
buckets e objetos.
Buckets‚Äã
Buckets s√£o cont√™ineres de armazenamento de alto n√≠vel que organizam e agrupam objetos
relacionados. Eles fornecem uma estrutura l√≥gica para o armazenamento, facilitando a
organiza√ß√£o e o acesso eficiente aos dados.
Objetos‚Äã
Objetos s√£o unidades de dados armazenadas no servi√ßo de Object Storage. Eles podem incluir
arquivos, imagens, v√≠deos ou documentos, e s√£o identificados por uma chave √∫nica dentro de
um bucket. Os objetos podem ter tamanhos variados e s√£o armazenados de maneira dur√°vel,
permitindo acesso e manipula√ß√£o conforme necess√°rio.
Recursos Dispon√≠veis‚Äã
O Object Storage da Magalu Cloud √© compat√≠vel com o protocolo S3 (Simple Storage Service),
oferecendo um conjunto completo de funcionalidades que refletem as capacidades do S3. A
seguir, est√£o detalhadas as funcionalidades dispon√≠veis em nossas regi√µes:


Cria√ß√£o e Gerenciamento de Buckets: Permite a cria√ß√£o e gest√£o de buckets para
organizar e armazenar objetos conforme suas necessidades espec√≠ficas. Os usu√°rios podem
criar, listar e excluir buckets com facilidade.


Upload e Download de Objetos: Suporte para o upload e download de objetos de
qualquer tamanho para e a partir de seus buckets, garantindo uma transfer√™ncia eficiente
de dados. Para configura√ß√£o de permiss√µes de acesso (ACL-Grantee), consulte a documenta√ß√£o
de ACL da AWS CLI.


Gerenciamento de Objetos: Inclui opera√ß√µes para gerenciar objetos, como a c√≥pia
entre buckets e a exclus√£o de objetos. Os usu√°rios t√™m controle total sobre os objetos
armazenados.


Versionamento de Objetos: Oferece suporte ao versionamento, permitindo que os
usu√°rios mantenham um hist√≥rico de vers√µes anteriores de um objeto. Isso possibilita a
restaura√ß√£o de vers√µes anteriores e o rastreamento das altera√ß√µes ao longo do tempo.Saiba Mais


Controle de Acesso: Configura√ß√£o de pol√≠ticas de controle de acesso (ACL) para
assegurar a seguran√ßa e a privacidade dos dados armazenados. As permiss√µes podem ser
ajustadas para atender √†s necessidades espec√≠ficas de acesso e controle.Saiba Mais


Cria√ß√£o de URLs Pr√©-Assinadas: Permite a gera√ß√£o de URLs pr√©-assinadas para acessar
objetos de forma tempor√°ria e segura. Esses URLs possuem uma validade limitada e podem ser
compartilhados com terceiros, facilitando o acesso aos objetos sem a necessidade de
autentica√ß√£o adicional.


Armazenamento Cold Instant: Por padr√£o, novos objetos utilizam a classe de
armazenamento "standard", que √© adequada para acessos frequentes. No entanto, para muitos
casos, o acesso aos objetos armazenados pode ser raro e o principal objetivo √© garantir
que eles sejam mantidos por longos per√≠odos, ainda que dispon√≠veis para acesso r√°pido
quando necess√°rio.Saiba Mais


Exemplos: backups, logs, registros arquivados para cumprimento de legisla√ß√µes.

Bucket policy: S√£o regras de controle de acesso associadas a um bucket de
armazenamento, que definem quem pode acessar ou gerenciar os objetos armazenados dentro
desse bucket e de que forma. Essas pol√≠ticas permitem que voc√™ controle permiss√µes de
forma detalhada, especificando a√ß√µes permitidas, condi√ß√µes para acesso e usu√°rios ou
grupos que t√™m acesso.Saiba Mais

Benef√≠cios‚Äã
Alta Escalabilidade: O Object Storage da Magalu Cloud √© projetado para escalar conforme as
necessidades dos clientes. Oferece escalabilidade ilimitada, permitindo que empresas de todos os
tamanhos armazenem e gerenciem dados globalmente sem comprometer o desempenho.


Alta Disponibilidade: Com opera√ß√µes de alta disponibilidade em duas regi√µes brasileiras ‚Äî Sudeste e
Nordeste ‚Äî o produto garante que os usu√°rios possam acessar e compartilhar seus dados de forma confi√°vel
em todo o territ√≥rio nacional e globalmente.


Seguran√ßa Avan√ßada: A seguran√ßa dos dados √© uma prioridade para a Magalu Cloud. O Object Storage
oferece criptografia avan√ßada, autentica√ß√£o por API Key e controles de acesso granulares para proteger os
dados contra amea√ßas internas e externas.


Conformidade Regulat√≥ria Local: O armazenamento de dados no Brasil garante que a Magalu Cloud
esteja em conformidade com as regulamenta√ß√µes nacionais. Isso assegura que dados cr√≠ticos que precisam
ser armazenados em territ√≥rio brasileiro estejam sempre acess√≠veis e protegidos conforme as normas locais.


Acessibilidade: A arquitetura flex√≠vel e as interfaces intuitivas, tanto via CLI quanto no Console,
proporcionam acesso e recupera√ß√£o de dados de forma r√°pida e eficiente, oferecendo uma experi√™ncia do
usu√°rio superior.


Alta Confiabilidade: Com uma infraestrutura robusta, suportada por datacenters de tecnologia de
ponta e uma equipe especializada em suporte 24/7, o servi√ßo de Object Storage da Magalu Cloud √© uma
solu√ß√£o confi√°vel para o armazenamento de dados cr√≠ticos. O suporte est√° dispon√≠vel em portugu√™s,
garantindo um atendimento eficiente em todo o pa√≠s.


Cobran√ßa Transparente: O modelo de cobran√ßa do Object Storage √© baseado na metrifica√ß√£o unit√°ria
por GB armazenado e trafegado, com pre√ßos competitivos e acess√≠veis. A cobran√ßa √© realizada em reais
(R$), sem impostos adicionais. Al√©m disso, o consumo √© detalhado e transparente, permitindo aos clientes
visualizar claramente os servi√ßos utilizados e os valores correspondentes.


O Object Storage da Magalu Cloud oferece uma solu√ß√£o robusta e flex√≠vel para o armazenamento de dados, com
recursos avan√ßados que atendem √†s necessidades das empresas modernas.

---

Pr√©-requisitos

Configurar uma Ferramenta Compat√≠vel com S3 de sua prefer√™ncia.


---

Criar Bucket

Ao criar um bucket, voc√™ poder√° armazenar e gerenciar seus objetos de forma eficiente e segura. Os buckets servem
como cont√™ineres que organizam seus dados, permitindo um acesso r√°pido e estruturado.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEüë£ Inicio > Menu > Object StorageNa p√°gina de Armazenamento de Objetos, clique no bot√£o para Criar bucket.

Escolha a Regi√£o: Selecione a regi√£o do datacenter mais pr√≥xima de sua
aplica√ß√£o para otimizar o acesso aos dados. Se os dados forem acessados de uma
localiza√ß√£o geogr√°fica espec√≠fica, escolha a regi√£o do datacenter
correspondente.


Configura√ß√£o de Permiss√£o: Por padr√£o, o bucket √© configurado como
Privado. Escolha a op√ß√£o de permiss√£o desejada:


Privado: Somente usu√°rios que se conectam ao bucket usando API Keys
poder√£o listar seu conte√∫do. Ap√≥s a cria√ß√£o do bucket, voc√™ pode configurar
Listas de Controle de Acesso (ACL) para autorizar usu√°rios espec√≠ficos a
acess√°-lo.


P√∫blico: Permite que qualquer pessoa possa listar os objetos
armazenados no bucket. Note que o acesso ser√° somente para leitura dos
dados.



mgc object-storage buckets create NOME_DO_BUCKETaws s3 mb s3://NOME_DO_BUCKETaws s3api create-bucket --bucket NOME_DO_BUCKETrclone mkdir NOME_DO_REMOTO:NOME_DO_BUCKET
infoEscolha um nome √∫nico para o seu bucket. Sugerimos um
nome que atenda √†s regras de nomenclatura dos buckets. O nome do bucket ser√°
validado, e se o nome desejado n√£o estiver dispon√≠vel, a cria√ß√£o do bucket n√£o
ser√° permitida.

---

Listar Buckets

A listagem exibe informa√ß√µes b√°sicas sobre cada bucket, facilitando o gerenciamento.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEüë£ Inicio > Menu > Object StorageNa p√°gina de Object Storage, voc√™ pode visualizar todos os buckets para cada
regi√£o. A listagem exibe informa√ß√µes b√°sicas sobre cada bucket, facilitando o
gerenciamento.mgc object-storage buckets listaws s3 lsaws s3api list-bucketsrclone lsd NOME_DO_REMOTO:

---

Alterar Permiss√£o

Alterando as permiss√µes de um bucket no seu sistema de armazenamento. As permiss√µes podem ser configuradas para
tornar o bucket p√∫blico ou privado, controlando o acesso aos objetos armazenados.
üñ•Ô∏è Console>_ CLIüë£ Inicio > Menu > Object Storage > Menu do Bucket > Tornar P√∫blico/Privado
Clique no √≠cone de menu ao lado do bucket para o qual deseja alterar a
permiss√£o.
Selecione a op√ß√£o desejada:


Tornar P√∫blico: Qualquer pessoa com acesso √† URL poder√° listar todos
os objetos no bucket.


Tornar Privado: Apenas o propriet√°rio do bucket e usu√°rios
autorizados ter√£o acesso ao conte√∫do do bucket.

Para conceder acesso a usu√°rios espec√≠ficos em um bucket privado, √©
necess√°rio configurar permiss√µes via ACL (Access Control List).




infoPara acessar o conte√∫do dos objetos em um bucket, √© necess√°rio configurar
permiss√µes via ACL para cada objeto individualmente.Para alterar o n√≠vel de permiss√£o de um bucket atrav√©s da CLI, voc√™ deve
configurar permiss√µes via ACL

---

Excluir Bucket

Quando voc√™ precisa remover um bucket, √© importante seguir os passos corretos para garantir que a exclus√£o ocorra sem problemas.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEüë£ Inicio > Menu > Object Storage > Menu do Bucket > Excluir Bucket

Na p√°gina de Armazenamento de Objetos, voc√™ pode visualizar todos os buckets
para cada regi√£o. Encontre o bucket desejado e selecione a op√ß√£o de
gerenciamento, clicando em Excluir Bucket.


Confirme a exclus√£o reescrevendo o nome do bucket que deseja excluir.

mgc object-storage buckets delete NOME_BUCKETaws s3 rb s3://NOME_BUCKETaws s3api delete-bucket --bucket NOME_BUCKETrclone rmdir NOME_DO_REMOTO:NOME_BUCKET
warningA exclus√£o do bucket ir√° remover permanentemente todo o seu conte√∫do, incluindo
objetos armazenados. Esta a√ß√£o √© irrevers√≠vel.

---

Excluir Buckets com Objetos

Quando voc√™ precisa remover um bucket que cont√©m objetos, √© importante seguir os passos corretos para garantir que a exclus√£o ocorra sem problemas.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEüë£ Inicio > Menu > Object Storage > Menu do Bucket > Excluir Bucket

Na p√°gina de Armazenamento de Objetos, voc√™ pode visualizar todos os buckets
para cada regi√£o. Encontre o bucket desejado e selecione a op√ß√£o de
gerenciamento, clicando em Excluir Bucket.


Confirme a exclus√£o reescrevendo o nome do bucket que deseja excluir.

mgc object-storage buckets delete --bucket NOME_BUCKET --recursiveaws s3 rb s3://NOME_BUCKET --force
Liste todos os objetos no bucket:
aws s3api list-objects --bucket NOME_BUCKET --query "Contents[].Key"
Delete todos os objetos listados:
aws s3api delete-objects --bucket NOME_BUCKET --delete "Objects=[{Key=OBJECT_KEY}]"
Ap√≥s deletar todos os objetos, exclua o bucket:
aws s3api delete-bucket --bucket NOME_BUCKETrclone purge NOME_DO_REMOTO:NOME_BUCKETEm caso de bucket com objetos, √© necess√°rio utilizar a flag --force para
excluir todos os objetos primeiro e, em seguida, remover o bucket.
warningA exclus√£o do bucket ir√° remover permanentemente todo o seu conte√∫do, incluindo
objetos armazenados. Esta a√ß√£o √© irrevers√≠vel.

---

Copiar URL do Bucket
noteAntes voc√™ precisar√° definir uma ACL para o Bucket
üñ•Ô∏è ConsoleMGC-CLIüë£ Inicio > Menu > Object Storage
Clique no √≠cone de menu ao lado do bucket do qual deseja copiar a URL.
Selecione a op√ß√£o ‚ÄúCopiar URL‚Äù.
mgc object-storage buckets public-url NOME_DO_BUCKET

A URL dos Buckets segue o modelo de Virtual Hosting (vHost), com o
seguinte padr√£o:
https://mgc-bucket-1.br-ne1.magaluobjects.com
Ou alternativamente:
https://br-ne1.magaluobjects.com/mgc-bucket-1

---

Upload de Objeto
Fazer o upload de um objeto para um bucket de armazenamento √© uma tarefa fundamental para gerenciar seus dados.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEAtualmente, a interface do Console n√£o suporta a funcionalidade de upload de
objetos. Para realizar essa opera√ß√£o, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects upload CAMINHO_DO_OBJETO NOME_DO_BUCKETaws s3 cp CAMINHO_DO_OBJETO s3://NOME_DO_BUCKETaws s3api put-object --bucket NOME_DO_BUCKET --body CAMINHO_DO_OBJETOrclone copy CAMINHO_DO_OBJETO NOME_DO_REMOTO:mgc-bucket-1

---

Upload de um diret√≥rio com objetos
Realizar o upload de um diret√≥rio √© uma maneira eficiente de transferir m√∫ltiplos arquivos para um
bucket de armazenamento.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIRCLONEAtualmente, a interface do Console n√£o suporta a funcionalidade de upload de
objetos. Para realizar essa opera√ß√£o, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects upload-dir DIRETORIO_LOCAL NOME_DO_BUCKETaws s3 cp DIRETORIO_LOCAL s3://NOME_DO_BUCKETrclone copy DIRETORIO_LOCAL NOME_DO_REMOTO:NOME_DO_BUCKET

---

Listar Objetos
Listar os objetos dentro de um bucket √© uma etapa fundamental para gerenciar seus dados.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIRCLONEAtualmente, a interface do Console n√£o suporta a funcionalidade de listar
objetos. Para realizar essa opera√ß√£o, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects list NOME_DO_BUCKETaws s3 ls s3://NOME_DO_BUCKET rclone ls NOME_DO_REMOTO:NOME_DO_BUCKET

---

Download de Objeto

Baixar um objeto espec√≠fico de um bucket pode ser essencial para acessar dados ou realizar backups.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWS-S3APIRCLONEAtualmente, a interface do Console n√£o suporta a funcionalidade de download de
objetos. Para realizar essa opera√ß√£o, utilize as ferramentas de linha de
comando (CLI).mgc object-storage objects download NOME_DO_BUCKET/CAMINHO_DO_OBJETO /CAMINHO_PARA_SALVAR_O_ARQUIVOaws s3 cp s3://NOME_DO_BUCKET CAMINHO_DO_OBJETO_LOCALaws s3api get-object --bucket NOME_DO_BUCKET --key NOME_DO_OBJETO CAMINHO_DO_OBJETO_LOCALrclone copy NOME_DO_REMOTO:mgc-bucket-1 CAMINHO_DO_OBJETO_LOCAL

---

Download de Todos Objetos
Transferir todos os objetos de um bucket para sua m√°quina local √© uma tarefa comum, especialmente para backup ou
an√°lise.
MGC-CLIAWS-CLIRCLONEmgc object-storage objects download-all NOME_DO_BUCKET CAMINHO_DA_PASTA_LOCALaws s3 sync s3://NOME_DO_BUCKET CAMINHO_DA_PASTA_LOCALrclone sync NOME_DO_REMOTO:mgc-bucket-1 CAMINHO_DA_PASTA_LOCAL

---

Excluir Objeto
Excluir objetos de um bucket pode ser necess√°rio para liberar espa√ßo ou remover dados desatualizados.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWSS-3APIRCLONEAtualmente, a interface do Console n√£o permite a exclus√£o de objetos. Para
realizar essa opera√ß√£o, utilize as ferramentas de linha de comando (CLI).mgc object-storage objects delete  NOME_DO_BUCKET/NOME_DO_OBJETO aws s3 rm s3://NOME_DO_BUCKET/NOME_DO_OBJETO --recursiveaws s3api delete-object --bucket NOME_DO_BUCKET --key NOME_DO_OBJETOrclone delete NOME_DO_REMOTO:NOME_DO_BUCKET/NOME_DO_OBJETO
warningEssa a√ß√£o √© irrevers√≠vel.

---

Excluir Todos os Objetos
Excluir todos os objetos de um bucket pode ser necess√°rio em diversas situa√ß√µes, como a limpeza de dados
antigos ou a reorganiza√ß√£o de armazenamento.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIRCLONEAtualmente, a interface do Console n√£o permite a exclus√£o de objetos. Para
realizar essa opera√ß√£o, utilize as ferramentas de linha de comando (CLI).mgc object-storage objects delete-all NOME_DO_BUCKETaws s3 rm s3://NOME_DO_BUCKET --recursiverclone delete "NOME_DO_REMOTO":NOME_DO_BUCKET
warningEssa a√ß√£o √© irrevers√≠vel.

---

Copiar a URL do Objeto
noteAntes voc√™ precisar√° definir uma ACL para o Objeto
üñ•Ô∏è ConsoleMGC-CLIAtualmente, a interface do Console n√£o oferece suporte para copiar a URL
p√∫blica de um objeto. Para realizar essa opera√ß√£o, utilize as ferramentas de
linha de comando (CLI).mgc object-storage objects public-url [nome-do-bucket]/[nome-do-arquivo]

A URL dos objetos segue o modelo de Virtual Hosting para Buckets (vHost). O
padr√£o para formar a URL √© o seguinte:
https://[regiao].magaluobjects.com/[nome-do-bucket]/[nome-do-arquivo]


[regiao]: Substitua pelo c√≥digo da regi√£o apropriada, como br-ne1. Este
c√≥digo indica a regi√£o do data center onde o bucket est√° localizado.


[nome-do-bucket]: Substitua pelo identificador √∫nico do bucket, como
mgc-bucket-1.


[nome-do-arquivo]: Substitua pelo nome do objeto espec√≠fico dentro do
bucket, como my-file.



---

Upload de um objeto p√∫blico
Fazer o upload de um objeto p√∫blico significa que qualquer pessoa com o link poder√° acessar esse arquivo.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIAWS-S3APIAtualmente, a interface do Console n√£o suporta a funcionalidade de upload de objetos. Para
realizar essa opera√ß√£o, utilize as ferramentas de linha de comando (CLI).Atualmente, n√£o √© poss√≠vel fazer upload de objeto publico via MGC-CLI.aws s3 cp CAMINHO_DO_OBJETO s3://NOME_DO_BUCKET --acl public-readaws s3api put-object --bucket NOME_DO_BUCKET --body CAMINHO_DO_OBJETO --acl public-read

---

Tornar um objeto p√∫blico
Tornar um objeto p√∫blico permite que qualquer pessoa com o link tenha acesso a ele.
üñ•Ô∏è ConsoleMGC-CLIAWS-S3APIAtualmente, a interface do Console n√£o suporta a funcionalidade de upload de objetos. Para
realizar essa opera√ß√£o, utilize as ferramentas de linha de comando (CLI).mgc object-storage objects acl set NOME_DO_BUCKET/CAMINHO_DO_OBJETO --public-readaws s3api put-object-acl --bucket NOME_DO_BUCKET --key CAMINHO_DO_OBJETO --acl public-read

---

Criar ACL do Bucket

infoPara mais informa√ß √µes sobre ACLs, consulte a documenta√ß√£o de ACL.
üñ•Ô∏è ConsoleMGC-CLIAWS-CLIRCLONEüë£ Inicio > Menu > Object Storage > Menu do Bucket > Criar acesso via ACL
Clique no √≠cone de menu ao lado do bucket para o qual deseja configurar permiss√µes.
Selecione a op√ß√£o ‚ÄúCriar Acesso via ACL‚Äù.
Insira o e-mail da pessoa a quem deseja conceder acesso e clique em ‚ÄúAdicionar‚Äù.
Escolha o n√≠vel de acesso desejado para o usu√°rio:

Leitura: O usu√°rio poder√° listar e acessar os metadados dos objetos no
bucket.
Leitura e Escrita: Al√©m das permiss√µes de Leitura, o usu√°rio poder√°
fazer o upload de objetos no bucket.


Clique em ‚ÄúCriar Acesso‚Äù.
mgc object-storage buckets acl set --dst NOME_DO_BUCKET --public-readVoc√™ pode adicionar a flag que melhor atenda √†s suas necessidades de acesso.
As op√ß√µes dispon√≠veis s√£o:

--private: O propriet√°rio (Owner) possui FULL_CONTROL. Apenas o propriet√°rio
e os delegados da conta t√™m direitos de acesso; outros usu√°rios n√£o t√™m acesso.


--public-read: O propriet√°rio (Owner) possui FULL_CONTROL. Qualquer pessoa
pode ler o bucket.


--grant-write array (object): Permite que os destinat√°rios criem objetos
neste bucket.

aws s3api put-bucket-acl --bucket NOME_DO_BUCKET --acl "ACL-Grantee"Para mais informa√ß√µes sobre as op√ß√µes de configura√ß√£o no ‚ÄúACL-Grantee‚Äù,
consulte a documenta√ß√£o de ACL da AWS CLI.O RClone n√£o oferece suporte direto para ACL vinculada ao Bucket. Durante a
configura√ß√£o, voc√™ pode definir ACL ao criar um remote.rclone config
infoAo configurar a ACL do bucket, observe que as regras n√£o s√£o aplic√°veis de
forma recursiva, ou seja, n√£o s√£o transmitidas para os objetos contidos no
bucket. Para aplicar regras de acesso aos objetos, utilize a ACL para Objetos.

---

Verificar o Status de Versionamento
Manter o controle sobre o versionamento de objetos em um bucket √© essencial para garantir que voc√™ possa acessar e
restaurar vers√µes anteriores dos seus dados.
MGC-CLIAWS-S3APImgc object-storage buckets versioning get --bucket NOME_DO_BUCKETaws s3api get-bucket-versioning --bucket NOME_DO_BUCKET

---

Ativar Versionamento de Objetos
O versionamento de objetos √© uma funcionalidade importante que permite manter v√°rias vers√µes de um objeto em um
bucket. Isso pode ser √∫til para recupera√ß√£o de dados e gerenciamento de altera√ß√µes.
MGC-CLIAWS-S3APImgc object-storage buckets versioning --bucket NOME_DO_BUCKET Enabledaws s3api put-bucket-versioning --bucket NOME_DO_BUCKET --versioning-configuration Status=Enabled

---

Listar Vers√µes de um Objeto
Quando o versionamento est√° habilitado em um bucket, voc√™ pode acessar diferentes vers√µes de um objeto. Listar
essas vers√µes pode ser √∫til para gerenciar dados e restaurar informa√ß√µes conforme necess√°rio.
MGC-CLIAWS-S3APImgc object-storage objects versions --dst NOME_DO_BUCKET/NOME_DO_OBJETOaws s3api list-object-versions --bucket NOME_DO_BUCKET --prefix NOME_DO_OBJETO

---

Criar Bucket Policy
infoPara mais informa√ß√µes sobre Bucket Policy, consulte a documenta√ß√£o de Bucket Policy.
Bucket policies s√£o regras de controle de acesso associadas a um bucket de
armazenamento, que definem quem pode acessar ou gerenciar os objetos armazenados dentro
desse bucket e de que forma. Essas pol√≠ticas permitem que voc√™ controle permiss√µes de
forma detalhada, especificando a√ß√µes permitidas, condi√ß√µes para acesso e usu√°rios ou
grupos que t√™m acesso.
üñ•Ô∏è ConsoleMGC-CLIAWS-S3APIVoc√™ pode gerenciar suas Bucket Policies diretamente atrav√©s do console de gerenciamento dispon√≠vel em:
https://console.magalu.cloud/.Navegue at√© "Object Storage"Clique nos tr√™s pontos laterais, e ter√° uma visualiza√ß√£o como a mostrada abaixo:

Clique em "Editar Pol√≠tica"Esse painel permite:
Criar novas pol√≠ticas.
Editar pol√≠ticas existentes.
Esse recurso proporciona um ambiente centralizado e de f√°cil uso para garantir que suas pol√≠ticas est√£o configuradas de acordo com as melhores pr√°ticas de seguran√ßa e governan√ßa de dados.mgc object-storage buckets policy set --dst NOME_DO_BUCKET --policy POLICYaws s3api put-bucket-policy --bucket NOME_DO_BUCKET --policy file://POLICY-PATH
Bucket Policy Sintaxe
As pol√≠ticas s√£o definidas utilizando um documento de pol√≠tica com a seguinte
sintaxe:
policy  = {     <version_block?>     <id_block?>     <statement_block>}<version_block> = "Version" : ("2012-10-17")<id_block> = "Id" : <policy_id_string><statement_block> = "Statement" : [ <statement>, <statement>, ... ]<statement> = {    <sid_block?>,    <principal_block?>,    <effect_block>,    <action_block>,    <resource_block>}<sid_block> = "Sid" : <sid_string><effect_block> = "Effect" : ("Allow" | "Deny")<principal_block> = ("Principal") : ("*" | <principal_map>)<principal_map> = { <principal_map_entry>, <principal_map_entry>, ... }<principal_map_entry> = ("MGC") :    [<principal_id_string>, <principal_id_string>, ...]<action_block> = ("Action") :    ("*" | <action_string> | [<action_string>, <action_string>, ...])<resource_block> = ("Resource") :    : ("*" | <resource_string> | [<resource_string>, <resource_string>, ...])

---

OpenTofu
Infraestrutura como C√≥digo‚Äã
Infraestrutura como C√≥digo
(IaC) refere-se √†
pr√°tica de utilizar arquivos de configura√ß√£o armazenados em reposit√≥rios de c√≥digo para
descrever e gerenciar a infraestrutura de recursos computacionais,
como servidores, redes, armazenamento, bancos de dados, acessos, e DNS.
Empresas que utilizam servi√ßos de nuvem frequentemente recorrem ao Terraform
para organizar e automatizar a configura√ß√£o e o provisionamento de sua
infraestrutura.
OpenTofu + S3 + Magalu Cloud‚Äã
Este guia descreve como utilizar o OpenTofu, uma
alternativa de c√≥digo aberto ao Terraform, para criar e gerenciar recursos de
Object Storage na Magalu Cloud.
Pr√©-requisitos‚Äã

Sistema operacional Linux (por exemplo, Ubuntu)
OpenTofu na vers√£o v1.7.1 ou superior

Projeto e M√≥dulo Ra√≠z‚Äã
Inicie criando um diret√≥rio para o projeto e um m√≥dulo de configura√ß√£o raiz:
mkdir tutorial-tofucd tutorial-tofuecho "terraform {}" > main.tftofu validate
Embora esta configura√ß√£o raiz seja v√°lida, est√° vazia. M√≥dulos do Terraform
utilizam plugins chamados Providers,
que s√£o extens√µes instal√°veis para permitir o uso de produtos de diferentes
nuvens.
Neste tutorial, usaremos o provider
hashicorp/aws
(licen√ßa MPL v2.0),
que permite a intera√ß√£o com fornecedores de Object Storage compat√≠veis com o padr√£o S3. Atualize o arquivo main.tf para o seguinte:
main.tfterraform {  required_providers {    aws = {      source  = "hashicorp/aws"      version = "5.50.0"    }  }}provider "aws" {  # Configuration options}
Instale este plugin com o comando:
tofu init
Retornaremos ao bloco comentado acima ap√≥s configurarmos um "profile aws" com
credenciais de acesso no pr√≥ximo passo.
NotaEmbora exista um provider de Terraform oficial da Magalu Cloud,
n√£o o utilizamos neste tutorial para demonstrar a compatibilidade da API com o
padr√£o S3 e porque, na data de publica√ß√£o, o provider da Magalu estava na vers√£o
0.18.10,
que suportava apenas buckets e n√£o objetos.
Configura√ß√£o das credenciais‚Äã
Como o Object Storage da Magalu √© compat√≠vel com S3, ele tamb√©m utiliza
autentica√ß√£o via API Key. Voc√™ pode criar uma chave de API no console e
In√≠cio > Object Storage > API Key,
clicando em "Criar API Key"

A chave gerada possui duas informa√ß√µes essenciais: ID e Secret. No
tutorial, essas vari√°veis ser√£o configuradas em um arquivo de perfil da AWS,
localizado em ~/.aws/credentials. Crie um perfil chamado tutorial-tofu
substituindo os textos em caixa alta COLE_AQUI_O... com o ID e o SECRET da
chave criada:

mkdir -p ~/.awscat << EOF >> ~/.aws/credentials[tutorial-tofu]aws_access_key_id = COLE_AQUI_O_IDaws_secret_access_key = COLE_AQUI_O_SECRETEOF
Para a Magalu Cloud, ajuste os campos endpoint_url e region. Neste exemplo,
utilizaremos a regi√£o "Brasil - Nordeste 1", identificada como br-ne1:
cat << EOF >> ~/.aws/config[profile tutorial-tofu]endpoint_url = https://br-ne1.magaluobjects.com/region = br-ne1EOF
Se configurado corretamente, retorne ao m√≥dulo raiz do projeto e inclua o nome
do perfil no campo profile do bloco de configura√ß√£o do provider aws:
main.tfprovider "aws" {  profile                     = "tutorial-tofu"  skip_region_validation      = true  skip_requesting_account_id  = true  skip_credentials_validation = true}
Os atributos adicionais (skip_region_validation, skip_requesting_account_id,
skip_credentials_validation) s√£o necess√°rios, e detalhes podem ser consultados
na documenta√ß√£o do plugin.
Primeiro Bucket‚Äã
Agora, vamos criar o primeiro recurso: um bucket para armazenar objetos. Crie
um novo m√≥dulo de configura√ß√£o com o arquivo resources.tf:
resources.tfresource "aws_s3_bucket" "first_bucket" {  bucket_prefix = "tutorial-bucket"}
NotaUtilizamos o campo bucket_prefix em vez de bucket para nomear o cont√™iner,
pois, assim como na AWS, os nomes de buckets na Magalu Cloud s√£o globais e
devem ser √∫nicos. Portanto, ao inv√©s de criar um nome √∫nico manualmente,
fornecemos apenas um prefixo e deixamos o provider gerar um nome √∫nico.
Execute tofu plan para planejar o provisionamento:
tofu plan
Este comando exibir√° as mudan√ßas necess√°rias para alcan√ßar o estado descrito
nas configura√ß√µes. O plano listar√° a cria√ß√£o do bucket:
"# aws_s3_bucket.first_bucket will be created"
Aplique o plano com:
tofu apply -compact-warnings
Confirme a aplica√ß√£o do plano digitando yes quando solicitado. Ao final, a
mensagem deve ser similar a:
Apply complete! Resources: 1 added, 0 changed, 0 destroyed.
Verifique o estado do novo recurso com tofu state list, tofu state show e
tofu show.
Voc√™ tamb√©m pode verificar a cria√ß√£o do bucket atrav√©s da listagem no console:

Certifique-se de selecionar a regi√£o "Brasil - Nordeste 1" se seu console
estiver configurado para outra regi√£o:

Mais recursos: objetos‚Äã
Agora que temos um bucket aws_s3_bucket criado, podemos adicionar dois
arquivos dentro dele utilizando o recurso aws_s3_object. Atualize o arquivo
resources.tf com::
resources.tfresource "aws_s3_bucket" "first_bucket" {  bucket_prefix = "tutorial-bucket"}resource "aws_s3_object" "first_bucket_objects" {  for_each = tomap({    file1 = "./main.tf"    file2 = "./resources.tf"  })  bucket = aws_s3_bucket.first_bucket.id  key    = each.value  source = each.value}
O comando tofu plan mostrar√°:
Plan: 2 to add, 0 to change, 0 to destroy.
E o tofu apply:
Apply complete! Resources: 2 added, 0 changed, 0 destroyed.
Os dois arquivos estar√£o agora na nuvem. O comando tofu state list deve
mostrar 3 recursos:
$ tofu state listaws_s3_bucket.first_bucketaws_s3_object.first_bucket_objects["file1"]aws_s3_object.first_bucket_objects["file2"]
Para ver o estado do segundo objeto, execute:
$ tofu state show 'aws_s3_object.first_bucket_objects["file2"]'# aws_s3_object.first_bucket_objects["file2"]:resource "aws_s3_object" "first_bucket_objects" {    arn                = "arn::s3:::tutorial-bucket20240523203657781600000001/resources.tf"    bucket             = "tutorial-bucket20240523203657781600000001"    bucket_key_enabled = false    content_type       = "application/octet-stream"    etag               = "01d689431df57be26625e8fb41ac04d2"    force_destroy      = false    id                 = "./resources.tf"    key                = "./resources.tf"    source             = "./resources.tf"    storage_class      = "STANDARD"    tags_all           = {}}
Desprovisionando Tudo‚Äã
Para evitar surpresas na conta do cart√£o de cr√©dito, √© crucial saber como
limpar todos os recursos criados. Para desprovisionar os recursos, execute:
tofu destroy
Destroy complete! Resources: 3 destroyed.
Configura√ß√£o e Estado‚Äã
O comando tofu state fornece informa√ß√µes sobre o estado atual da
infraestrutura descrita no c√≥digo. A declara√ß√£o descreve a infraestrutura
desejada, enquanto o "state" reflete a configura√ß√£o atual.
Na minha configura√ß√£o, declarei que a instala√ß√£o deveria ter um bucket com um
certo prefixo no nome e dois objetos dentro, com o caminho dos arquivos locais
para cada objeto.
O estado vai ter muito mais informa√ß√£o do que isso, como por exemplo: o nome
completo que o bucket recebeu, as etags de cada objeto e v√°rios outros detalhes.
Um ls no diret√≥rio do projeto mostrar√° a exist√™ncia de dois arquivos gerados
que descrevem o estado atual e o estado anterior da instala√ß√£o:
terraform.tfstate  terraform.tfstate.backup
Um less no arquivo atual, depois do destroy, mostrar√° que o estado atual n√£o
possui nenhum recurso, por exemplo:
$ less -F terraform.tfstate{  "version": 4,  "terraform_version": "1.7.1",  "serial": 7,  "lineage": "51390cb1-af8e-d82b-99d6-1bb5da876657",  "outputs": {},  "resources": [],  "check_results": null}
Compartilhando o estado com o time‚Äã
Num cen√°rio onde v√°rias pessoas v√£o trabalhar na mesma infraestrutura, ter as
configs e este estado apenas local na m√°quina de quem executou o plano por
√∫ltimo n√£o √© o ideal. Ao mesmo tempo,
por conter informa√ß√µes sens√≠veis,
n√£o √© recomendado colocar os arquivos tfstate.* num reposit√≥rio git,
especialmente se este reposit√≥rio for p√∫blico.
Uma poss√≠vel sa√≠da para coordenar este trabalho em grupo e compartilhar de
maneira privada o estado da instala√ß√£o √© usar a funcionalidade de
estado remoto,
que suporta v√°rias op√ß√µes de onde armazenar este estado, implementados por
diferentes backends.
Vamos ent√£o finalizar este tutorial com um exemplo de como configurar o
OpenTofu para armazenar o estado remotamente num bucket de S3 da Magalu Cloud,
utilizando o backend "s3".
Primeiro, vamos criar um bucket novo s√≥ para isso, num arquivo novo
state-bucket.ft:
state-bucket.tfresource "aws_s3_bucket" "state_bucket" {  bucket_prefix = "tutorial-state-bucket"}
tofu apply
Agora vamos exibir na tela o nome do bucket gerado para copiar e usar na
configura√ß√£o do backend depois:
tofu state show aws_s3_bucket.state_bucket
Finalmente, de volta no main.tf adicionamos este bloco backend "s3" ao
bloco terraform:
main.tfterraform {  required_providers {    aws = {      source  = "hashicorp/aws"      version = "5.50.0"    }  }  backend "s3" {    bucket                      = "NOME_DO_SEU_BUCKET_DE_STATE_AQUI"    key                         = "the_state"    region                      = "br-ne1"    profile                     = "tutorial-tofu"    skip_region_validation      = true    skip_requesting_account_id  = true    skip_credentials_validation = true    skip_s3_checksum            = true  }}provider "aws" {  profile                     = "tutorial-tofu"  skip_region_validation      = true  skip_requesting_account_id  = true  skip_credentials_validation = true}
Para instalar o backend, execute:
tofu init
NotaNum cen√°rio mais real, o bucket de state talvez n√£o viveria no mesmo projeto,
ou teria alguma preven√ß√£o, como lifecycle { prevent_destroy = true  }, ou
seria criado manualmente. Eu criei junto aqui apenas para facilitar o tutorial.
(adaptado do post original em Ego√≠smo Duplicado)

---

Vis√£o Geral
A Magalu Cloud √© uma solu√ß√£o robusta de armazenamento de objetos que segue o protocolo S3, oferecendo uma alternativa confi√°vel e escal√°vel ao AWS S3. A compatibilidade com ferramentas populares do ecossistema S3 torna o Magalu Cloud uma op√ß√£o atraente para empresas e desenvolvedores que buscam integrar seus fluxos de trabalho existentes a uma plataforma de armazenamento eficiente, de alto desempenho e com suporte local.
Este documento detalha as ferramentas compat√≠veis com a Magalu Cloud, focando em suas funcionalidades, compatibilidade e instru√ß√µes de configura√ß√£o.

Vantagens da Compatibilidade com Magalu Cloud‚Äã
A Magalu Cloud oferece in√∫meras vantagens em termos de compatibilidade, especialmente para aqueles que j√° est√£o familiarizados com o ecossistema S3. Com suporte para ferramentas como AWS CLI e RClone, a transi√ß√£o para a Magalu Cloud √© simples e r√°pida, mantendo a integridade dos fluxos de trabalho estabelecidos.

F√°cil Migra√ß√£o: Suporte total a ferramentas que utilizam o protocolo S3, permitindo uma migra√ß√£o sem complica√ß√µes para a Magalu Cloud.
Escalabilidade e Desempenho: Estrutura projetada para grandes volumes de dados e alta performance.
Suporte Completo a Funcionalidades Cr√≠ticas: Opera√ß√µes como cria√ß√£o de buckets, gerenciamento de permiss√µes, upload/download de objetos e versionamento s√£o totalmente suportadas.


Funcionalidades Suportadas por Ferramentas‚Äã
As tr√™s principais ferramentas compat√≠veis com a Magalu Cloud ‚Äì MGC CLI, AWS CLI e RClone ‚Äì oferecem diversas funcionalidades para gerenciar buckets e objetos. Abaixo, uma compara√ß√£o das principais capacidades e limita√ß√µes de cada ferramenta.
Buckets‚Äã

Criar, Listar, Deletar, Convers√£o (p√∫blico/privado), Versionamento:

Suportado em: MGC CLI ‚úÖ, AWS CLI ‚úÖ, RClone ‚úÖ


Permissionamento (ACL/Bucket Policy):

Suportado em: MGC CLI ‚úÖ, AWS CLI ‚úÖ
Limitado em: RClone ‚ûÄ


URL P√∫blica:

Suportado em: MGC CLI ‚úÖ
N√£o suportado: AWS CLI ‚ùå, RClone ‚ùå




Objetos‚Äã

Upload, Download, Deletar, Convers√£o (p√∫blico/privado), Versionamento:

Suportado em: MGC CLI ‚úÖ, AWS CLI ‚úÖ, RClone ‚úÖ


Permissionamento(ACL):

Suportado em: MGC CLI ‚úÖ, AWS CLI ‚úÖ
N√£o suportado: RClone ‚ùå


URL P√∫blica:

Suportado em: MGC CLI ‚úÖ, AWS CLI ‚úÖ
N√£o suportado: RClone ‚ùå


URL Presigned:

Suportado em: MGC CLI ‚úÖ, AWS CLI ‚úÖ, RClone ‚úÖ




Detalhes e Observa√ß√µes:‚Äã
‚ûÄ O RClone n√£o suporta download e exclus√£o de vers√µes de objetos.

Compatibilidade Ampliada com SDKs‚Äã
A Magalu Cloud tamb√©m oferece compatibilidade com SDKs que utilizam o protocolo S3, possibilitando uma integra√ß√£o perfeita com diversas linguagens de programa√ß√£o. Isso permite que desenvolvedores utilizem bibliotecas populares, como o Boto3 para Python, para realizar opera√ß√µes em buckets e objetos hospedados na Magalu Cloud.
Conclus√£o‚Äã
A Magalu Cloud destaca-se pela compatibilidade com ferramentas e protocolos amplamente usados, como AWS CLI e RClone, al√©m de oferecer suporte nativo ao protocolo S3. Essa compatibilidade garante uma migra√ß√£o suave e sem interrup√ß√µes, permitindo que os usu√°rios continuem utilizando suas ferramentas preferidas em um ambiente de armazenamento seguro e de alto desempenho. Magalu Cloud √© a escolha ideal para quem busca escalabilidade, flexibilidade e integra√ß√£o perfeita com o ecossistema S3.

Links √öteis‚Äã
Para explorar mais ferramentas compat√≠veis e guias de configura√ß√£o, confira os tutoriais abaixo:

MGC CLI
AWS CLI
Boto3
Rclone


---

MGC CLI
Magalu Cloud Command Line Interface‚Äã
O MGC CLI (Magalu Cloud Command Line Interface) √© uma ferramenta que permite interagir diretamente com os servi√ßos da Magalu Cloud (MGC) por meio da linha de comando. Compat√≠vel com macOS, Linux e Windows, a CLI oferece suporte para arquiteturas AMD64 e ARM, proporcionando flexibilidade em diversos ambientes.
Como Configurar a MGC CLI com API Keys‚Äã


Instala√ß√£o: Siga as instru√ß√µes na documenta√ß√£o oficial da MGC CLI.


Gerar API Keys: Siga as instru√ß√µes para gerar API Keys.


Configura√ß√£o da API Key:

Para definir seu par de chaves, edite o arquivo ~/.config/mgc/default/auth.yaml:

access_key_id: <access-key-id>secret_access_key: <secret-access-key>


Alterar Regi√£o Padr√£o:

Para verificar as regi√µes dispon√≠veis, execute o seguinte comando:

mgc config get-schema region -o jsonpath=$.enum

Para definir a regi√£o execute o seguinte comando:

mgc config set --key region --value <region>

Edite o arquivo ~/.config/mgc/default/cli.yaml para definir a sua regi√£o:

region: <region>

Para usar uma regi√£o diferente da definida nas configura√ß√µes, use a flag --region como o exemplo abaixo:

mgc object-storage bucket list --region <region>


notePor padr√£o a MGC-CLI usa a regi√£o br-se1

---

Standard

Por padr√£o, novos objetos s√£o armazenados na classe de armazenamento "standard".
Esta classe √© otimizada para acessos frequentes e √© a op√ß√£o padr√£o e mais
vers√°til para armazenamento de objetos em sistemas compat√≠veis com S3. Projetada
para oferecer alta performance e baixa lat√™ncia, a classe Standard √© ideal para
dados que exigem acesso r√°pido e constante.
Caracter√≠sticas Principais‚Äã

Desempenho Otimizado: Proporciona baixa lat√™ncia e alto throughput, com tempos de resposta geralmente medidos em milissegundos.
Alta Durabilidade e Disponibilidade: Garante a integridade e a disponibilidade dos dados. Saiba mais
Escalabilidade: Suporta um n√∫mero praticamente ilimitado de objetos de qualquer tamanho.
Compatibilidade com S3: Totalmente compat√≠vel com a API do Amazon S3,
facilitando a integra√ß√£o com aplica√ß√µes e ferramentas existentes. Saiba mais

Pre√ßo‚Äã
Para informa√ß√µes sobre pre√ßos, consulte nossa p√°gina de Pre√ßos.
Exemplos de Caso de Uso‚Äã

Hospedagem de conte√∫do web e aplica√ß√µes
Distribui√ß√£o de conte√∫do e m√≠dia
Armazenamento de dados para an√°lise de big data
Backups e arquivos de acesso frequente
Armazenamento prim√°rio para aplica√ß√µes nativas em nuvem

N√£o h√° taxa m√≠nima de armazenamento nem compromisso de longo prazo, permitindo que
voc√™ pague apenas pelo que usar.

---

Cold Instant

Por padr√£o, novos objetos utilizam a classe de armazenamento "standard", que √©
adequada para acessos frequentes. No entanto, para muitos casos, o acesso aos
objetos armazenados pode ser raro e o principal objetivo √© garantir que eles
sejam mantidos por longos per√≠odos, ainda que dispon√≠veis para acesso r√°pido
quando necess√°rio.
Exemplos: backups, logs, registros arquivados para cumprimento de legisla√ß√µes.
Para esses casos, nas regi√µes suportadas, est√° dispon√≠vel a classe de armazenamento fria "cold_instant", que oferece um custo de armazenamento reduzido e um custo
de acesso mais elevado. Consulte a p√°gina de Pre√ßos
para comparar as diferentes classes de armazenamento.
noteNo momento, a √∫nica regi√£o que oferece suporte para a classe de armazenamento "cold_instant" √© a regi√£o Sudeste 1 (br-se1).
Na Magalu Cloud, a classe de armazenamento √© definida por objeto, permitindo que um
mesmo bucket contenha objetos de diferentes classes.
Upload de objeto com a classe de armazenamento "cold_instant"‚Äã
MGC-CLIAWS-CLIRCLONEPara carregar um novo arquivo com a classe de armazenamento fria, utilize o valor
"cold_instant" no argumento --storage-class:mgc object-storage objects upload ARQUIVO NOME_DO_BUCKET --storage-class=cold_instantNa AWS CLI, o nome da classe de armazenamento deve ser um dos dispon√≠veis na AWS; cold_instant n√£o √© suportada. Para contornar essa limita√ß√£o, use o nome GLACIER_IRaws s3 cp --storage-class=GLACIER_IR ARQUIVO s3://NOME_DO_BUCKETNa ferramenta RClone, o argumento √© --s3-storage-class:rclone copyto --s3-storage-class="cold_instant" ARQUIVO NOME_DO_REMOTO:NOME_DO_BUCKET/NOME_DO_OBJETOSubstitua NOME_DO_REMOTO pelo nome do seu remote configurado no RClone,
NOME_DO_BUCKET pelo nome do bucket e NOME_DO_OBJETO pelo nome do arquivo dentro
desse bucket.
Modificar a classe de armazenamento de um objeto de "standard" para "cold_instant"‚Äã
MGC-CLIAWS-CLIRCLONEPara alterar a classe de armazenamento de um objeto via CLI, copie o objeto para o mesmo bucket com o par√¢metro --storage-class=cold_instant:mgc object-storage objects copy NOME_DO_BUCKET/NOME_DO_OBJETO MESMO_NOME_DO_BUCKET/MESMO_NOME_DO_OBJETO --storage-class=cold_instantEste comando, se usado com um destino diferente da origem, faz uma c√≥pia do objeto
original, que continuar√° existindo com a classe de armazenamento original.Para alterar a classe de armazenamento de um objeto via CLI, copie o objeto para o
mesmo bucket trocando o par√¢metro --storage-class. Na AWS CLI, o nome da classe de
armazenamento deve ser um dos dispon√≠veis na AWS; cold_instant n√£o √© suportada.
Utilize o nome GLACIER_IR.aws s3 cp --storage-class GLACIER_IR s3://NOME_DO_BUCKET/NOME_DO_OBJETO s3://MESMO_NOME_DO_BUCKET/MESMO_NOME_DO_OBJETOEste comando, se usado com um destino diferente da origem, faz uma c√≥pia do objeto
original, que continuar√° existindo com a classe de armazenamento original.rclone settier "cold_instant" "NOME_DO_REMOTO:NOME_DO_BUCKET/NOME_DO_OBJETO"Substitua NOME_DO_REMOTO pelo nome do seu remote configurado no RClone,
NOME_DO_BUCKET pelo nome do bucket e NOME_DO_OBJETO pelo nome do arquivo dentro
desse bucket.

---

Vis√£o Geral
As classes de armazenamento podem ser categorizadas em duas principais categorias: uma voltada para acesso
frequente e baixa lat√™ncia, ideal para dados que precisam ser acessados regularmente e com rapidez. A
outra √© projetada para dados que s√£o acessados raramente, oferecendo custos de armazenamento mais baixos,
mas com maior lat√™ncia para recupera√ß√£o. A escolha entre essas classes depende da frequ√™ncia de acesso e
do custo desejado para o armazenamento a longo prazo.


Standard: Esta classe √© voltada para acesso frequente e baixa lat√™ncia, ideal para dados que
precisam ser acessados regularmente e com rapidez. Saiba Mais


Cold-Storage: Projetada para dados que s√£o acessados raramente, esta classe oferece custos de
armazenamento mais baixos, mas com maior lat√™ncia para recupera√ß√£o.Saiba Mais



---

Vis√£o Geral
No gerenciamento de acesso a recursos em sistemas de armazenamento de objetos, existem tr√™s principais op√ß√µes:
Buckets P√∫blicos e Privados, ACL (Access Control List) e Bucket Policy. Cada um desses mecanismos tem
suas caracter√≠sticas e n√≠veis de controle sobre quem pode acessar ou modificar os dados. A seguir, apresentamos uma
vis√£o geral dessas op√ß√µes e a ordem de prioridade entre elas.
1. Buckets P√∫blicos e Privados‚Äã
A configura√ß√£o de buckets como p√∫blicos ou privados √© a forma mais b√°sica de controle de acesso.


Buckets P√∫blicos: Qualquer pessoa com acesso √† URL poder√° listar todos os objetos no bucket.


Buckets Privados: Apenas o propriet√°rio do bucket e usu√°rios autorizados ter√£o acesso ao conte√∫do do bucket.


2. ACL (Access Control List)‚Äã
As ACLs oferecem um controle mais granular em compara√ß√£o com a simples configura√ß√£o de buckets p√∫blicos ou privados. Com as ACLs, √© poss√≠vel definir permiss√µes espec√≠ficas para diferentes usu√°rios ou grupos em n√≠vel de objeto ou bucket.

Vantagens:

Permite controlar quem pode ler, escrever ou excluir dados de maneira espec√≠fica.
Ideal para cen√°rios em que diferentes usu√°rios precisam de diferentes n√≠veis de acesso.



3. Bucket Policy‚Äã
As Bucket Policies fornecem um n√≠vel ainda mais abrangente de controle de acesso. Elas permitem definir regras
complexas de permiss√£o que se aplicam a um bucket inteiro.

Vantagens:

Oferece flexibilidade e controle avan√ßado, permitindo a cria√ß√£o de pol√≠ticas espec√≠ficas que atendem a
requisitos de seguran√ßa complexos.
Ideal para gerenciamento de acesso em larga escala em ambientes organizacionais.



Ordem de Grandeza‚Äã
A efic√°cia e a complexidade dos mecanismos de controle de acesso podem ser entendidas pela seguinte ordem de
grandeza:

Bucket Policy: Fornece o maior n√≠vel de controle e flexibilidade.
ACL: Oferece controle granular, mas com limita √ß√µes em compara√ß√£o com as pol√≠ticas de bucket.
Buckets P√∫blicos e Privados: A abordagem mais simples, adequada para cen√°rios menos complexos.

Considera√ß√µes‚Äã
Ao gerenciar o acesso a dados em sistemas de armazenamento, √© crucial entender as diferentes op√ß√µes dispon√≠veis e
suas implica√ß√µes. A escolha entre usar buckets p√∫blicos/privados, ACLs ou Bucket Policies deve ser baseada nas
necessidades espec√≠ficas de seguran√ßa e acesso da sua organiza√ß√£o. A implementa√ß√£o correta desses mecanismos
garantir√° a prote√ß√£o e a integridade dos dados, al√©m de facilitar a conformidade com regulamenta√ß√µes e pol√≠ticas de
seguran√ßa.

---

Armazenamento e Entrega de Conte√∫do de M√≠dia
Empresas de entretenimento, m√≠dia e publicidade est√£o utilizando o produto de Object
Storage para armazenar e gerenciar grandes volumes de m√≠dia digital, como v√≠deos, imagens e
arquivos de √°udio. Com sua escalabilidade ilimitada e alto desempenho, a solu√ß√£o oferece
uma plataforma robusta para hospedar e distribuir conte√∫do digital de maneira eficiente e
econ√¥mica.
Passos para Utiliza√ß√£o Eficiente:‚Äã


Acessar a CLI da Magalu Cloud


Criar um Bucket no Object
Storage da Magalu Cloud


Fazer upload dos arquivos de
m√≠dia ou sincronizar um diret√≥rio


Configurar permiss√£o de acesso do bucket
ou definir uma lista de acesso para
usu√°rios espec√≠ficos


Definir a lista de acessos dos objetos
para que possam ficar vis√≠veis ao p√∫blico desejado


Copiar a URL dos seus
objetos


Compartilhar e/ou fazer refer√™ncia aos seus Arquivos de M√≠dia colando a URL dos seus
objetos



---

Compartilhar Grava√ß√µes de Tela
Gravar a tela √© uma necessidade t√£o comum que muitos sistemas operacionais incluem
atalhos e ferramentas para isto por padr√£o. Quando esta necessidade surge, normalmente
n√£o √© apenas para guardarmos um registro localmente, mas sim para demonstrar algo para outras pessoas.
Isto leva a um segundo trabalho ap√≥s terminada a captura: o de fazer o upload para algum
lugar e depois compartilhar o endere√ßo de onde o v√≠deo foi armazenado.
Este √© um tutorial sobre a ferramenta livre e multiplataforma
Clipshare, que junta estas duas
funcionalidades: grava e j√° sobe para a nuvem.
Download‚Äã
O execut√°vel do Clipshare pode ser baixado na p√°gina de
Releases. Aqui o link para a vers√£o
1.0.0: https://github.com/goshops-com/clipshare/releases/tag/v1.0.0
A se√ß√£o "Assets" cont√©m os links para as diferentes plataformas (Windows, Mac, Linux).
Configura√ß√£o inicial‚Äã
Esta ferramenta funciona com qualquer provedor de armazenamento em nuvem que ofere√ßa uma
API compat√≠vel com S3, o Object Storage da Magalu Cloud √© um deles.
Para este exemplo eu antes
criei um "bucket"
de nome fcz-clipshare-demo-2024 na regi√£o Nordeste 1 (br-ne1).
Linux/MacWindowsHavendo um bucket para onde as grava√ß√µes ser√£o guardadas, o pr√≥ximo passo √© criar um
arquivo de texto de nome .env com o seguinte conte√∫do:ACCESS_KEY=MINHA_ACCESS_KEY_AQUIACCESS_SECRET=MINHA_ACCESS_SECRET_AQUIENDPOINT=https://br-ne1.magaluobjects.com/REGION=br-ne1BUCKET_NAME=fcz-clipshare-demo-2024ACL=privatePRESIGN_URL=truePRESIGN_URL_EXPIRY=86400ImportanteTroque os valores de ACCESS_KEY, ACCESS_SECRET e BUCKET_NAME para os da sua conta.NotaNeste exemplo de configura√ß√£o acima, eu escolhi subir os v√≠deos para um bucket privado
(ACL=private), por√©m disponibilizando links de acesso tempor√°rios (PRESIGN_URL=true)
v√°lidos pelo tempo de 1 dia (PRESIGN_URL_EXPIRY=86400 segundos). Uma descri√ß√£o mais
detalhada de cada op√ß√£o pode ser encontrada na
p√°gina do projeto.Havendo um bucket para onde as grava√ß√µes ser√£o guardadas, o pr√≥ximo passo √© criar um
arquivo de texto de nome .env com o seguinte conte√∫do:ACCESS_KEY=MINHA_ACCESS_KEY_AQUIACCESS_SECRET=MINHA_ACCESS_SECRET_AQUIENDPOINT=https://br-ne1.magaluobjects.com/REGION=br-ne1BUCKET_NAME=fcz-clipshare-demo-2024ACL=privatePRESIGN_URL=truePRESIGN_URL_EXPIRY=86400ImportanteTroque os valores de ACCESS_KEY, ACCESS_SECRET e BUCKET_NAME para os da sua conta.NotaNeste exemplo de configura√ß√£o acima, eu escolhi subir os v√≠deos para um bucket
privado
(ACL=private), por√©m disponibilizando links de acesso tempor√°rios
(PRESIGN_URL=true)
v√°lidos pelo tempo de 1 dia (PRESIGN_URL_EXPIRY=86400 segundos). Uma descri√ß√£o mais
detalhada de cada op√ß√£o pode ser encontrada na
p√°gina do projeto.Crie um arquivo.bat com o seguinte conte√∫do:@echo offsetlocal enabledelayedexpansion:: Muda para o diret√≥rio onde o .bat est√° localizadocd /d %~dp0:: Carrega vari√°veis do .envfor /f "usebackq tokens=1* delims==" %%a in (".env") do (	    set %%a=%%b):: Executa o clipshare.exe.\clipshare.exeImportanteO arquivo execut√°vel, o .env e o .bat necessitam estar na mesma pasta.
Rodando o programa‚Äã
Linux/MacWindowsPara lan√ßar o programa, no Linux, utilizando as vari√°veis de ambiente do arquivo .env
utilize o seguinte comando:env $(cat .env | xargs) ~/Downloads/clipshare-1.0.0.AppImageNotaSubstituindo ~/Downloads/clipshare-1.0.0.AppImage pela localiza√ß√£o do seu execut√°vel do Clipshare.Execute o arquivo .bat criado na se√ß√£o anterior.
Se tudo der certo um novo √≠cone na barra de tarefas do computador vai aparecer,
clicando nele voc√™ tem acesso as op√ß√µes de escolher o microfone e camera caso
precise, e iniciar/parar a grava√ß√£o.
NotaAtente-se que para o clipshare conseguir utilizar a sua c√¢mera, ela n√£o pode estar
em uso em nenhum outro aplicativo ao mesmo tempo, exemplo: Google Meet // Microsoft
Teams.
Ao fim da grava√ß√£o, o v√≠deo ser√° enviado para o bucket e um navegador vai abrir o
endere√ßo tempor√°rio do v√≠deo, dali basta copiar este endere√ßo da barra de
localiza√ß√£o e compartilhar.
Depois de compartilhado‚Äã
Os v√≠deos gerados ficam no seu bucket at√© segunda ordem, mesmo que o link
tempor√°rio de acesso tenha expirado. Isto pode ser √∫til caso voc√™ precise fazer o
download de algum deles no futuro, mover para outras hospedagens, ou trocar de
classe de armazenamento para economizar dinheiro. Esta ferramenta simples n√£o cuida
de nenhum processo de limpeza regular, tenha isto em mente.
Caso precise remover um bucket junto com todos os seus objetos, siga
este documento.
Caso prefira s√≥ mudar a classe de armazenamento dos videos j√° compartilhados depois
que foram vistos, siga este outro documento.
(adaptado do post original em Ego√≠smo Duplicado)

---

Backups e Arquivamento de Dados
Empresas de diferentes setores utilizam Object Storage da Magalu Cloud para
realizar backup de dados de forma segura e confi√°vel. Seja para proteger
informa√ß√µes vitais de neg√≥cios ou para garantir conformidade com regulamenta√ß√µes, a
solu√ß√£o oferece uma maneira eficiente de preservar e recuperar dados essenciais em
caso de perda ou corrup√ß√£o.
Backup Manual‚Äã
Siga o passo a passo abaixo para realizar backup dos seus dados. Para auxiliar em
cada etapa, utilize os documentos de apoio linkados para obter instru√ß√µes
detalhadas sobre como realizar cada a√ß√£o.

Acessar a CLI da Magalu Cloud
Criar um bucket no
Object Storage da Magalu Cloud
Sincronizar o diret√≥rio local
com o bucket do Object Storage

Backup Automatizado‚Äã
Para automatizar o processo de backup, siga as etapas abaixo:

Acessar a CLI da Magalu Cloud
Criar um bucket no
Object Storage da Magalu Cloud
Criar um script de backup usando um editor de texto da sua prefer√™ncia

WindowsLinux ou MacOS
Em um editor de texto, como Nano ou o Vim, escreva o seguinte script:
@echo offrem Configure suas credenciais da AWSaws configurerem Defina o diret√≥rio local que deseja fazer backupset LOCAL_DIRECTORY=C:\caminho\para\diretorio\localrem Defina o nome do bucket S3 onde deseja armazenar os backupsset S3_BUCKET_NAME=nome-do-seu-bucket-s3rem Execute o comando de sincroniza√ß√£o para fazer o backup dos arquivosmgc object-storage objects sync %LOCAL_DIRECTORY%  %S3_BUCKET_NAME%rem Exiba uma mensagem de conclus√£oecho Backup conclu√≠do com sucesso!pause

Salve o script em um local seguro.


Clique em ‚ÄúArquivo‚Äú>‚ÄúSalvar Como‚Äú


Atribua um nome descritivo, como por exemplo, ‚Äúmy-backup.bat‚Äú


No campo ‚ÄúSalvar como tipo‚Äú, escolha ‚ÄúTodos os arquivos (.)‚Äú


Clique em Salvar




Execute o script

Ap√≥s salvar o script, voc√™ pode execut√°-lo clicando duas vezes no arquivo
my-backup.bat. Isso iniciar√° o processo de backup conforme definido no script.


infoCertifique-se de substituir C:\caminho\para\diretorio\local pelo caminho do
diret√≥rio local que voc√™ deseja fazer backup e nome-do-seu-bucket-s3 pelo nome
do seu bucket do Object Storage.
Em um editor de texto, como Nano ou o Vim, escreva o seguinte script:
    #!/bin/bash    # Defina o diret√≥rio local que deseja fazer backup    LOCAL_DIRECTORY=/caminho/para/diretorio/local    # Defina o nome do bucket S3 onde deseja armazenar os backups    S3_BUCKET_NAME=nome-do-seu-bucket-s3    # Execute o comando de sincroniza√ß√£o para fazer o backup dos arquivos    mgc object-storage objects sync $LOCAL_DIRECTORY  $S3_BUCKET_NAME    # Exiba uma mensagem de conclus√£o    echo "Backup conclu√≠do com sucesso!"

Salve o script com um nome descritivo, por exemplo, my-backup.sh


Conceda a permiss√£o de execu√ß√£o usando o comando chmod no terminal:

chmod +x my-backup.sh
Execute o script digitando o seguinte comando no terminal:
./my-backup.shinfoCertifique-se de substituir C:\caminho\para\diretorio\local pelo caminho do diret√≥rio local que voc√™ deseja fazer backup e nome-do-seu-bucket-s3 pelo nome do seu bucket do Object Storage.


Utilizar ferramentas como agendador de tarefas para que o script seja executado periodicamente, conforme necess√°rio

WindowsLinux ou MacOSPara agendar a execu√ß√£o do script de backup em intervalos regulares no Windows, voc√™ pode usar o Agendador de Tarefas.

Abrir o Agendador de Tarefas: Pressione Win + R para abrir a caixa de di√°logo Executar, digite taskschd.msc e pressione Enter. Isso abrir√° o Agendador de Tarefas do Windows.


Criar uma Nova Tarefa: No painel direito do Agendador de Tarefas, clique em "Criar Tarefa..." para abrir o assistente de cria√ß√£o de tarefas.


Configurar os Detalhes da Tarefa:

Na guia Geral, d√™ um nome para a tarefa e, opcionalmente, uma descri√ß√£o.
Na guia Desencadeadores, clique em "Novo..." para criar um novo desencadeador.
Escolha a frequ√™ncia e os hor√°rios nos quais deseja que o backup seja executado.
Na guia A√ß√µes, clique em "Novo..." e selecione "Iniciar um programa". Navegue
at√© o local do seu script de backup e selecione-o.
Na guia Condi√ß√µes e Configura√ß√µes, configure quaisquer condi√ß√µes adicionais ou
configura√ß√µes espec√≠ficas conforme necess√°rio.



Configurar as Op√ß√µes de Seguran√ßa (Opcional):

Se o script de backup exigir privil√©gios elevados para ser executado, voc√™
pode precisar configurar as op√ß√µes de seguran√ßa na guia Geral. Selecione a op√ß√£o
"Executar com as permiss√µes mais altas" para garantir que a tarefa seja
executada com privil√©gios elevados.



Concluir e Salvar: Depois de configurar todos os detalhes da tarefa, clique
em "OK" para salv√°-la.

Para agendar a execu√ß√£o do script de backup em intervalos regulares no Linux, voc√™
pode usar o Cron, que √© um utilit√°rio de agendamento de tarefas integrado ao
sistema operacional.
Editar o Cron para isso execute o seguinte comando:
crontab -e
Configure o agendamento. Adicione uma nova linha ao arquivo Cron para
especificar o agendamento do seu script de backup. A estrutura da linha √© a
seguinte:
* * * * * /caminho/para/seu/script/my-backup.shOs cinco asteriscos representam, na ordem, minutos, horas, dia do m√™s, m√™s e dia da semana. Voc√™ pode configurar esses valores conforme necess√°rio para atender aos seus requisitos de agendamento. Por exemplo, para agendar o backup diariamente √†s 3 da manh√£, voc√™ pode usar:0 3 * * * /caminho/para/seu/script/my-backup.shinfoCertifique-se de substituir /caminho/para/seu/script pelo caminho do script salvo no passo anterior.


Verifique se a execu√ß√£o e agendamento do backup est√° funcional atrav√©s da
listagem dos bucketse
objetos direcionados no
script.


---

Estrutura de Pre√ßos
A estrutura de pre√ßos do Object Storage √© baseada no modelo de cobran√ßa por uso
(pay-as-you-go). Este modelo proporciona flexibilidade e transpar√™ncia, permitindo que
voc√™ pague apenas pelo que utilizar, seja em termos de armazenamento de dados ou
transfer√™ncia de objetos.
Armazenamento de Dados‚Äã
O custo do armazenamento de dados √© calculado com base na quantidade de dados armazenados
em nossos servidores. A cobran√ßa √© feita por gigabyte (GB) de armazenamento por m√™s.
Transfer√™ncia de Objetos‚Äã

Transfer√™ncia de Dados Outbound (Sa√≠da): Cobramos pela transfer√™ncia de dados para
fora do nosso servi√ßo de armazenamento, incluindo transfer√™ncias entre diferentes regi√µes
e para a internet. A taxa √© calculada com base na quantidade de dados transferidos, medida
em gigabytes (GB).
Transfer√™ncia de Dados Inbound (Entrada): A transfer√™ncia de dados para dentro do
servi√ßo de armazenamento n√£o √© cobrada.

Tabela de Pre√ßos‚Äã
Regi√£oCategoriaPre√ßo Padr√£oPre√ßo Armazenamento FrioSudeste 1Armazenamento de DadosR$ 0,10 por GB/m√™s1R$ 0,06 por GB/m√™s1Sudeste 1Transfer√™ncia de Dados Inbound (Entrada)GratuitoR$ 0,01 por GBSudeste 1Transfer√™ncia de Dados Outbound (Sa√≠da)R$ 0,13 por GBR$ 0,22 por GBNordeste 1Armazenamento de DadosR$ 0,10 por GB/m√™s1N√£o dispon√≠velNordeste 1Transfer√™ncia de Dados Inbound (Entrada)GratuitoN√£o dispon√≠velNordeste 1Transfer√™ncia de Dados Outbound (Sa√≠da)R$ 0,13 por GBN√£o dispon√≠vel
1 O armazenamento de dados √© cobrado por hora. O pre√ßo apresentado √© uma
estimativa mensal, calculada com base na m√©dia de horas no m√™s (730 horas).
Os pre√ßos mencionados incluem todos os impostos obrigat√≥rios e est√£o sujeitos a
altera√ß√µes. Quaisquer ajustes ser√£o comunicados com anteced√™ncia.
Exemplo de C√°lculo de Custos‚Äã
Suponha que voc√™ armazene 500 GB de dados no Object Storage por um m√™s e transfira 100 GB
de dados para fora do servi√ßo de armazenamento. O c√°lculo do custo seria:

Armazenamento de Dados: R$ 0,10 por GB/m√™s √ó 500 GB = R$ 50,00
Transfer√™ncia de Dados Outbound (Sa√≠da): R$ 0,13 por GB √ó 100 GB = R$ 13,00

Total: R$ 50,00 + R$ 13,00 = R$ 63,00
Para garantir total transpar√™ncia sobre seus custos e controle sobre seus recursos, voc√™
pode monitorar seus gastos atrav√©s da p√°gina de Faturamento do Console da Magalu Cloud.
Nesta p√°gina, voc√™ ter√° acesso detalhado √†s informa√ß√µes sobre o uso de armazenamento e
transfer√™ncia do Object Storage.

---

Seguran√ßa
A seguran√ßa e a criptografia s√£o fundamentais para qualquer solu√ß√£o de armazenamento
digital. No Magalu Object Storage, implementamos v√°rias camadas de prote√ß√£o para assegurar
que seus dados estejam seguros:
Criptografia em Repouso (At Rest)‚Äã
Utilizamos criptografia em repouso para todos os dados armazenados. Isso √© realizado
atrav√©s de discos criptografados utilizando Full Disk Encryption (FDE) com LUKS2.
Esta abordagem garante que seus dados estejam protegidos contra acessos n√£o autorizados,
mesmo que os discos sejam fisicamente comprometidos.
Criptografia em Tr√¢nsito‚Äã
Para proteger os dados durante a transfer√™ncia entre componentes do cluster, utilizamos o
protocolo TLS (Transport Layer Security) na vers√£o 1.2 ou superior. Este protocolo
assegura que as comunica√ß√µes s√£o seguras, protegendo contra intercepta√ß√µes e ataques
man-in-the-middle.
Suporte a Criptografia do Lado do Servidor (SSE)‚Äã
Atualmente, o Magalu Object Storage n√£o suporta Server-Side Encryption (SSE) com
certificados sob a cust√≥dia do cliente. No entanto, reconhecemos a import√¢ncia desta
funcionalidade e estamos trabalhando para integr√°-la em vers√µes futuras do produto.
Recomenda√ß√µes de Seguran√ßa Adicional‚Äã
Enquanto o suporte a SSE n√£o est√° dispon√≠vel, recomendamos que nossos clientes implementem
criptografia do lado do cliente para garantir uma camada adicional de seguran√ßa. Uma
solu√ß√£o eficaz para isso √© o uso do Restic, uma ferramenta de backup que facilita a
criptografia dos dados antes do envio para o armazenamento. Detalhes sobre como configurar
e utilizar o Restic podem ser encontrados no tutorial detalhado aqui.
Pr√°ticas de Seguran√ßa Recomendadas‚Äã
Al√©m da criptografia, sugerimos adotar as seguintes pr√°ticas de seguran√ßa:


Gest√£o de Acesso: Utilize pol√≠ticas de controle de acesso, ACL e pol√≠ticas de bucket
rigorosas para limitar quem pode acessar e gerenciar os dados.


Monitoramento e Auditoria: Implemente solu√ß√µes de monitoramento para detectar
atividades suspeitas e auditar acessos aos dados.


Backups Automatizados: Automatize backups de dados sens√≠veis para evitar perda de
dados. O uso de ferramentas compat√≠veis com S3 pode ajudar a prevenir problemas
relacionados √† perda de dados. Recomendamos verificar o tutorial sobre backups.


Estamos comprometidos em fornecer uma solu√ß√£o de armazenamento segura e confi√°vel e
continuamos a aprimorar nossos recursos de seguran√ßa para atender √†s necessidades dos
nossos clientes. Para mais informa√ß√µes e suporte, entre em contato com nossa equipe de
atendimento ao cliente.

---

Limita√ß√µes do Produto
O Object Storage da Magalu Cloud possui algumas limita√ß√µes e caracter√≠sticas importantes
que devem ser consideradas ao utilizar o servi√ßo. A seguir, est√£o descritas as principais
restri√ß√µes e detalhes:


Gerenciamento de Objetos: Atualmente, o gerenciamento de objetos √© realizado
exclusivamente por meio da linha de comando (CLI) e ferramentas compat√≠veis com o
protocolo S3, como o RClone GUI. O gerenciamento de objetos n√£o est√° dispon√≠vel
diretamente no Console da Magalu Cloud.


Modelo de Multi-Part: Para objetos com tamanho superior a 8 MB, √© utilizado
automaticamente o modelo de upload e download em m√∫ltiplas partes (multi-part). No
entanto, cada objeto pode ser dividido em no m√°ximo 10.000 partes.


Limite de Buckets por Conta: Cada conta de usu√°rio tem um limite m√°ximo de 100
buckets. Esta restri√ß√£o √© implementada para garantir a organiza√ß√£o e a estrutura adequada
dos dados armazenados. Caso seja necess√°rio aumentar este limite, entre em contato com o
suporte da Magalu Cloud.


Tamanho M√°ximo de Objeto: O tamanho m√°ximo permitido para um √∫nico objeto √© de 5
terabytes (TB). Objetos que excedam esse tamanho n√£o podem ser armazenados no Object
Storage.


Consist√™ncia Eventual: O Object Storage oferece consist√™ncia eventual para opera√ß√µes
de leitura. Isso significa que altera√ß√µes realizadas em um objeto podem levar algum tempo
para se propagar e serem refletidas em todas as opera√ß√µes de leitura.


Consist√™ncia em Opera√ß√µes de Grava√ß√£o: Para novos objetos e opera√ß√µes de grava√ß√£o, o
Object Storage garante forte consist√™ncia em n√≠vel de objeto dentro de uma mesma regi√£o.
No entanto, a consist√™ncia entre regi√µes diferentes √© eventual.


Limites de Taxas de Requisi√ß√£o: Existem limites nas taxas de requisi√ß√£o para
opera√ß√µes como GET, PUT, LIST e DELETE. Esses limites podem variar conforme o tipo de
conta e a regi√£o.


Limites Pr√°ticos de Buckets: Embora n√£o haja um limite espec√≠fico para o tamanho
total de um bucket, existem limites pr√°ticos impostos pela escalabilidade do servi√ßo.
Buckets com um grande n√∫mero de objetos ou solicita√ß√µes simult√¢neas podem enfrentar
limita√ß√µes de desempenho.


Compatibilidade com Ferramentas Terceiras: O produto pode n√£o ser compat√≠vel com
todas as funcionalidades de ferramentas terceiras que possuem altera√ß√µes ou
funcionalidades distintas das oferecidas pelo S3. Para garantir uma integra√ß√£o adequada,
consulte a se√ß√£o Ferramentas Compat√≠veis,
que lista clientes com compatibilidade validada. Se desejar utilizar uma ferramenta n√£o
listada, entre em contato conosco para an√°lise e testes de compatibilidade adicionais


Estas limita√ß√µes ajudam a garantir a performance e a integridade do servi√ßo. Para mais
informa√ß√µes ou esclarecimentos, entre em contato com o suporte da Magalu Cloud.

---

Gloss√°rio
ACL‚Äã
Lista de controle de acesso que permite definir permiss√µes para quem pode acessar um bucket ou objeto. Com ACLs, √© poss√≠vel restringir ou conceder acesso a usu√°rios e servi√ßos conforme necess√°rio.
Bucket‚Äã
Cont√™iner utilizado para armazenar objetos (dados). Ele serve como um reposit√≥rio que organiza e gerencia arquivos e dados na nuvem.
Client S3‚Äã
Client que oferece acesso ao servi√ßo de armazenamento da MagaluCloud. Ele pode ser utilizado atrav√©s de SDKs dispon√≠veis para diferentes linguagens de programa√ß√£o, incluindo Java, Python e .NET.
Multi-Part Upload / Download‚Äã
T√©cnica que divide um objeto de grande tamanho em v√°rias partes menores para realizar o upload ou download. Isso possibilita o envio ou recebimento paralelo ou sequencial das partes, permitindo maior controle e reduzindo a necessidade de retransmiss√£o completa em caso de falhas. O usu√°rio pode se concentrar em corrigir apenas as partes com inconsist√™ncias.
Objeto‚Äã
Qualquer arquivo ou diret√≥rio armazenado dentro de um bucket. Isso pode incluir imagens, m√∫sicas, v√≠deos, arquivos de texto, entre outros tipos de dados.
Pre-signed URL‚Äã
URL tempor√°ria que permite o compartilhamento de arquivos armazenados em um bucket por um per√≠odo determinado. Ela √© √∫til para fornecer acesso tempor√°rio a arquivos sem expor diretamente as credenciais.
S3‚Äã
Protocolo de comunica√ß√£o utilizado para interagir com o armazenamento de objetos. Ele permite opera√ß√µes como leitura, escrita, modifica√ß√£o e exclus√£o de objetos e buckets no armazenamento.

---

Problemas com Upload de ObjetosLentid√£o em Upload de Muitos Arquivos‚Äã

Sintoma

Lentid√£o em upload de muitos arquivos.

Causa

Cada upload de arquivo envolve uma requisi√ß√£o HTTP separada ao S3. Muitas requisi√ß√µes
pequenas podem aumentar o overhead de rede e lat√™ncia.

Solu√ß√£o

Recomendamos paralelizar o upload de arquivos para diminuir o tempo de processamento.
MGC-CLIAWS-CLIRCLONEA MGC-CLI Utiliza o par√¢metro --workers para definir o n√∫mero de threads paralelas.mgc object-storage objects sync --local=/local/path --bucket=path --workers 32A AWS-CLI Permite ajustar a configura√ß√£o max_concurrent_requests no arquivo de
configura√ß√£o para aumentar o n√∫mero de requisi√ß√µes simult√¢neas.Configurando max_concurrent_requests via Arquivo de Configura√ß√£o
A configura√ß√£o max_concurrent_requests pode ser definida no arquivo de
configura√ß√£o do AWS CLI (~/.aws/config). Aqui est√° como voc√™ pode configur√°-lo:
Abra ou crie o arquivo de configura√ß√£o:
nano ~/.aws/config
Adicione ou modifique a configura√ß√£o:
[profile your-profile]s3 =  max_concurrent_requests = 32
Rode o comando sync:
aws s3 sync /local/path s3://bucket-nameSubstitua your-profile pelo nome do perfil AWS que voc√™ est√° usando. Se voc√™ n√£o estiver usando perfis,
pode usar a se√ß√£o [default].O RCLONE Usa o par√¢metro --transfers para controlar o n√∫mero de transfer√™ncias simult√¢neas.rclone copy /local/path remote:path --transfers=32
ImportanteRecomendamos ajustar esses par√¢metros de acordo com a capacidade do seu hardware para encontrar o equil√≠brio
ideal entre a velocidade de upload e o uso de CPU e RAM. Teste diferentes configura√ß√µes para otimizar o
desempenho conforme suas necessidades.
Se surgir alguma d√∫vida ou se precisar de assist√™ncia adicional, nossa equipe de suporte est√° √† disposi√ß√£o.
Abra um chamado de suporte para obter ajuda.

---

Problemas com Exclus√£o de BucketsDele√ß√£o de Bucket Demorando Mais que o Esperado‚Äã

Sintoma

A exclus√£o de um bucket com um grande volume de objetos est√° demorando mais do que o esperado.

Causa

A opera√ß√£o pode estar sendo executada com baixo grau de paralelismo, resultando em um tempo de processamento mais longo.

Solu√ß√£o

Recomenda-se a implementa√ß√£o de um processo de exclus√£o com maior grau de paralelismo, com o objetivo de otimizar o tempo de processamento.
warningO uso de par√¢metros como --workers, max_concurrent-requests e --transfers deve ser feito com
cautela. Valores muito altos podem ocasionar erros ou sobrecarga do sistema. Ajuste esses valores
gradualmente e monitore o desempenho para encontrar a configura√ß√£o ideal para o seu caso.
MGC-CLIAWS-CLIRCLONEA MGC-CLI utiliza a flag --workers para definir o n√∫mero de threads paralelas.Por padr√£o a MGC-CLI utiliza o valor de workers em 4, para aumentar o nivel de paralelismo
considere incrementar conforme o exemplo abaixo:mgc object-storage buckets delete bucket-name --recursive --workers 16noteLembrando que esse comando n√£o deleta as vers√µes do bucket versionado. Para isso, veja
este documento.A AWS-CLI permite ajustar a configura√ß√£o max_concurrent_requests no arquivo de configura√ß√£o para aumentar
o n√∫mero de requisi√ß√µes simult√¢neas.A configura√ß√£o max_concurrent_requests pode ser definida no arquivo de configura√ß√£o do AWS CLI
(~/.aws/config). Aqui est√° como voc√™ pode configur√°-lo:
Abra ou crie o arquivo de configura√ß√£o:
nano ~/.aws/config
Adicione ou modifique a configura√ß√£o:
[profile your-profile]s3 =  max_concurrent_requests = 16
Rode o comando rb com a flag --force para deletar todos os objetos do bucket:
aws s3 rb s3://bucket-name --forceSubstitua your-profile pelo nome do perfil AWS que voc√™ est√° usando. Se voc√™ n√£o estiver usando
perfis, pode usar a se√ß√£o [default].noteLembrando que esse comando n√£o deleta as vers√µes do bucket versionado. Para isso, veja
este documento.Por padr√£o a RCLONE utiliza o valor de transfers em 4, para aumentar o nivel de paralelismo
considere incrementar conforme o exemplo abaixo:O RCLONE usa a flag --transfers para controlar o n√∫mero de transfer√™ncias simult√¢neas.rclone purge remote:path --transfers 16noteEste comando deleta todo o bucket e seus objetos, incluindo vers√µes.
ImportanteRecomendamos ajustar esses par√¢metros de acordo com a capacidade do seu hardware para encontrar o equil√≠brio
ideal entre a velocidade de upload e o uso de CPU e RAM. Teste diferentes configura√ß√µes para otimizar o
desempenho conforme suas necessidades.
Se ainda tiver alguma d√∫vida, n√£o deixe de abrir um
chamado de suporte.

Erro de Bucket not empty‚Äã

Sintoma

Voc√™ pode encontrar o erro The bucket you tried to delete is not empty ou Error: the bucket contains multiple versions of objects.
ao tentar deletar um bucket e seus objetos.

Causa

A opera√ß√£o de exclus√£o recursiva n√£o remove vers√µes antigas dos objetos, apenas a vers√£o atual.

Solu√ß√£o

Para prosseguir com a exclus√£o do bucket, ser√° necess√°rio apagar todas as vers√µes antigas dos objetos.
Siga as instru√ß√µes neste documento para realizar essa tarefa.
Se ainda tiver alguma d√∫vida, n√£o deixe de abrir um
chamado de suporte.

---

Problemas com PermissionamentoObjetos n√£o Ficaram P√∫blicos‚Äã

Sintoma

Mesmo ap√≥s configurar o bucket como "p√∫blico" ou como "privado", os objetos n√£o se comportam no mesmo estado que o bucket.


Causa

A configura√ß√£o a respeito de "p√∫blico" ou "privado" diz respeito ao bucket, mas as regras n√£o s√£o aplic√°veis de forma recursiva, ou seja, n√£o s√£o transmitidas para os objetos contidos no bucket.

Solu√ß√£o

Para aplicar regras de acesso aos objetos, utilize a ACL para Objetos.
Que est√° referenciada no how-to: Configura√ß√£o da Lista de Controle de Acesso (ACL) de um Objeto.
Alterar a Permiss√£o de um Bucket n√£o Funciona‚Äã

Sintoma

Alterar a permiss√£o de um bucket de privado para p√∫blico ou vice-versa n√£o funciona.
Falha com um erro de acesso negado, ou diz que mudou por√©m o bucket continua aparecendo como
privado no console.

item do menu

exemplo de erro no console

exemplo de sucesso falso

bucket ainda privado
NotaNa listagem do console, um bucket com qualquer pol√≠tica continuar√° sendo listado como "privado"

Causa

O bucket em quest√£o pode ter uma pol√≠tica (bucket policy) a ele associada. E regras da pol√≠tica
possuem maior preced√™ncia do que as de ACL. Bucket policy permite a constru√ß√£o de regras de acesso
mais espec√≠ficas que um simples status de "p√∫blico" ou "privado" e estas regras mais espec√≠ficas
sempre sobrescrevem este status simples.

Solu√ß√£o

Existem duas solu√ß√µes poss√≠veis: remover a pol√≠tica do bucket ou incluir uma regra
na pol√≠tica que permita a leitura dos objects por qualquer usu√°rio (Principal).

Remover a pol√≠tica do bucket

AWS-CLI√â poss√≠vel deletar uma pol√≠tica de bucket via terminal utilizando a ferramenta
aws-cli da Amazon:aws --profile "SEU_PROFILE" s3api delete-bucket-policy --bucket "NOME_DO_BUCKET"NotaSubstitua SEU_PROFILE e NOME_DO_BUCKET pelo nome do seu perfil e o nome do seu bucket.


Incluir acesso de leitura a todos nas pol√≠ticas do bucket
Abaixo um exemplo de "Statement" a ser adicionado a uma pol√≠tica existente para tornar todos os
objetos de um bucket publicamente acess√≠veis:


    "Statement": [        {            "Effect": "Allow",            "Principal": "*",            "Action": [                "s3:ListBucket",                "s3:GetObject"            ],            "Resource": [                "nome-do-bucket",                "nome-do-bucket/*"            ]        },        {          ...        }    ]
NotaSubstitua nome-do-bucket pelo nome do bucket.

---

Problemas com Nomenclaturas de BucketsErro de Nomenclatura na Cria√ß√£o de Bucket‚Äã

Sintoma

Ao criar um bucket, √© necess√°rio definir a sua nomenclatura. Esse processo tem regras que precisam ser seguidas, e, caso descumpridas, retornar√° algum dos erros listados abaixo:

Causa


Nome do bucket muito curto:


O nome do bucket deve ter entre 3 e 63 caracteres.

Nome do bucket cont√©m h√≠fen no in√≠cio ou no final:



O h√≠fen pode ser utilizado na nomenclatura do seu bucket, mas n√£o √© permitido utiliz√°-lo no in√≠cio ou no final do nome.

Nome do bucket j√° est√° em uso:


O nome do bucket deve ser √∫nico. N√£o √© permitido criar dois buckets com o mesmo nome.

Exemplo de Nomenclatura Correta

Segue abaixo um exemplo de nomenclatura que atende a todas as regras necess√°rias para a cria√ß√£o do bucket:


Solu√ß√£o

Para um melhor entendimento sobre a nomenclatura de buckets e boas pr√°ticas, consulte a nossa documenta√ß√£o sobre Regras de Nomes de Buckets. Ela est√° referenciada em: Regras de Nomes de Buckets.

---

Problemas com a ferramenta VeleroPlugin velero-plugin-for-aws n√£o consegue fazer o backup‚Äã

Sintoma

Ap√≥s configurar o Velero para utilizar os endpoints de Object Storage da
Magalu Cloud com o plugin velero-plugin-for-aws
o backup falha com um status code 501 e uma mensagem de operation error S3: PutObject, https response error StatusCode: 501
... api error NotImplemented: Transfering payloads in multiple chunks using aws-chunked is not supported.

Causa

A API S3 do Object Storage da Magalu Cloud n√£o suporta a funcionalidade de transferencias "aws-chunked".

Solu√ß√£o

Incluir na configura√ß√£o do plugin, na parte de Backup Storage Location, o atributo checksumAlgorithm: ""
Uma string vazia neste atributo indica que nenhum valor de checksum ser√° calculado e enviado nos headers
das requisi√ß√µes, o que contorna a limita√ß√£o mencionada acima.
noteOutro atributo importante para a compatibilidade com MagaluCloud √© utilizar s3ForcePathStyle: true
Abaixo um exemplo de configura√ß√£o utilizando este atributo e um bucket da regi√£o Sudeste 1 (br-se):
configuration:  restoreOnlyMode: false  backupStorageLocation:  - name: backup-cluster-meu-cluster    provider: aws    bucket: backup-cluster-meu-bucket-123456789    default: true    accessMode: ReadWrite    credential:      name: velero-bucket      key: mgc    config:      s3ForcePathStyle: true      s3Url: https://br-se1.magaluobjects.com      checksumAlgorithm: ""

---

Vis√£o Geral do Block Storage da Magalu Cloud
Este documento oferece uma vis√£o geral abrangente do produto de Block Storage oferecido pela Magalu Cloud. O Block Storage √© um servi√ßo de armazenamento em nuvem altamente perfom√°tico, flex√≠vel e escal√°vel, projetado para atender √†s diversas necessidades de armazenamento de empresas de todos os tamanhos e setores.
Funcionamento‚Äã
O Block Storage da Magalu Cloud funciona atrav√©s de uma infraestrutura avan√ßada de armazenamento NVMe (Non-Volatile Memory Express), que proporciona alta performance e baixa lat√™ncia. Cada volume de armazenamento √© projetado para oferecer desempenho consistente, suportando cargas de trabalho intensivas e garantindo que suas aplica√ß√µes funcionem de maneira eficiente. Os volumes de armazenamento podem ser ajustados para diferentes n√≠veis de IOPS (Input/Output Operations Per Second), permitindo que voc√™ escolha a performance que melhor se adequa √†s suas necessidades espec√≠ficas.
Alta Performance com NVMe‚Äã
Todos os volumes de Block Storage s√£o baseados em NVMe, garantindo alta velocidade de leitura e escrita, essencial para aplica√ß√µes que demandam r√°pida resposta e processamento intensivo de dados.
Diversas Ofertas de IOPS‚Äã
Voc√™ pode escolher entre diferentes tipos de IOPS para seus volumes de armazenamento, garantindo que cada aplica√ß√£o tenha o n√≠vel de performance adequado √†s suas necessidades, desde aplica√ß√µes b√°sicas at√© aquelas que exigem alto desempenho.
Redimensionamento Flex√≠vel‚Äã
Nosso Block Storage permite o redimensionamento dos volumes de armazenamento conforme necess√°rio, oferecendo flexibilidade para aumentar ou diminuir a capacidade e tamb√©m alterar o tipo de volume variando a quantidade de IOPS de acordo com o crescimento e as demandas das suas aplica√ß√µes.
O servi√ßo de Block Storage pode ser resumido nas seguintes etapas:


Crie seu Volume: Provisione e configure seu volume de armazenamento conforme suas necessidades de capacidade e performance.


Anexe √† sua VM: Conecte o volume de armazenamento √† sua m√°quina virtual (VM) para come√ßar a utiliz√°-lo.


Gerencie seu Volume: Utilize o Console e a CLI para redimensionar volumes, alterar tipo de volumes, criar snapshots e configurar backups. A gest√£o simplificada permite que voc√™ mantenha o controle total sobre seus recursos de armazenamento.



---

Listar volumes

Para listar todos os volumes execute o comando abaixo:
üñ•Ô∏è Console>_ CLIPor Block Storage‚Äãüë£ Inicio > Menu > Block StorageAo seguir o caminho acima, ser√£o listadas todos os volumes criados.Por Virtual Machines‚ÄãTamb√©m √© poss√≠vel listar todos os volumes anexados a uma determinada inst√¢ncia. Para isso acesse o Detalhes de Inst√¢ncia atrav√©s do produto de Virtual Machines.üë£ Inicio > Menu > Virtual Machines > Detalhes de Inst√¢ncia > Volumesmgc block-storage volumes list

---

Listar tipos de volumes

Atualmente oferecemos 5 tipos de volumes, s√£o eles:

NVMe com 1.000 IOPS (cloud_nvme)
NVMe com 5.000 IOPS (cloud_nvme5k)
NVMe com 10.000 IOPS (cloud_nvme10k)
NVMe com 15.000 IOPS (cloud_nvme_15k)
NVMe com 20.000 IOPS (cloud_nvme20k)

Para listar os tipos de volumes dispon√≠veis, execute o comando abaixo:
üñ•Ô∏è Console>_ CLIüë£ *Inicio > Menu > Block Storage
Clique em "Criar volumes";
A lista de tipos de volumes  aparecer√° no t√≥pico "Escolha um tipo de volume"
mgc block-storage volume-types list

---

Listar os snapshots de volumes

Para listar as imagens execute o comando abaixo:
üñ•Ô∏è Console>_ CLIüë£*Inicio > Menu > Block Storage > Meus snapshots *Ao seguir o caminho acima, ser√£o listados todos os snapshots dispon√≠veis.MGC-CLI‚Äãmgc block-storage snapshots list

---

Criar um snapshot de volume

Para criar um snapshot do volume execute o comando abaixo:
üñ•Ô∏è Console>_ CLI
Ao final do grid de listagem de Volumes clicar no √≠cone 
No menu, clicar em Criar snapshot
Escolha um nome para o snapshot e clique em criar snapshot
MGC-CLI‚Äãmgc block-storage snapshots create --name "block-snapshot"  --volume.id "0e2dc76-1215-47a7-9fc3-a5b45d5dbedc"

---

Dicas de flags no CLI
Limit‚Äã
√â poss√≠vel o uso de  --control.limit  para controlar a quantidade de resultados que ser√£o impressos:
mgc virtual-machine machine-types list --control.limit 10
Offset‚Äã
√â poss√≠vel o uso de  --control.offset  para controlar o offset de resultados que ser√£o impressos:
mgc virtual-machine machine-types list --control.offset 10
Sort‚Äã
√â poss√≠vel o uso de  --control.sort  para controlar a ordena√ß√£o dos resultados que ser√£o impressos:
mgc virtual-machine machine-types list --control.sort name:asc,end_standard_support_at:desc

---

Regras de nomea√ß√£o de volumes
Este documento define as diretrizes para nomea√ß√£o de volumes para o produto de block storage na Magalu Cloud. Essas regras visam garantir consist√™ncia, organiza√ß√£o e seguran√ßa em nossos servi√ßos.
Regras de nomea√ß√£o‚Äã

O nome do volume deve ser √∫nico na mesma regi√£o
O nome do volume deve conter entre 3 e 50 caracteres.
Os nome do volume deve ser compostos apenas por letras min√∫sculas, n√∫meros, h√≠fens (-) e sublinhados (_).
O nome do volume n√£o pode conter pontos (.) e/ou qualquer caracter especial como caracteres v√°lidos.
O nome do volume n√£o pode conter palavras ilegais, pejorativas ou agressivas.

Boas Pr√°ticas‚Äã

Escolha nomes de volumes que sejam descritivos e identifiquem claramente o conte √∫do ou o prop√≥sito do armazenamento.
Evite incluir informa√ß√µes confidenciais ou sens√≠veis nos nomes de volumes.
Considere utilizar padr√µes de nomenclatura consistentes para facilitar a organiza√ß√£o e a manuten√ß√£o dos volumes ao longo do tempo.
Revise periodicamente os nomes de volumes existentes para garantir que ainda estejam alinhados com as pol√≠ticas e pr√°ticas recomendadas.


---

Pre√ßo
A estrutura de pre√ßos do Block Storage √© baseada no modelo de cobran√ßa por uso (pay-as-you-go), proporcionando flexibilidade e controle sobre os custos. O pre√ßo √© calculado com base no tamanho do volume alocado pelo usu√°rio e pelo tempo de uso desse volume.
Armazenamento de Volumes:‚Äã
O pre√ßo do armazenamento de volumes √© determinado multiplicando o tamanho do volume, em gigabytes (GiB), pelo n√∫mero de horas de exist√™ncia do volume. Existem diferentes tipos de volumes dispon√≠veis, cada um com um pre√ßo, oferecendo op√ß√µes para atender a diferentes necessidades de desempenho e custo.
Pre√ßos‚Äã
Os pre√ßos para cada tipo de volume podem ser consultados diretamente na p√°gina de pre√ßos do website da Magalu Cloud, onde os valores s√£o apresentados de forma clara e atualizada.
Exemplo de C√°lculo de Custos:‚Äã
Suponha que voc√™ solicite um volume de 100 GB do Tipo 1.000 IOPS e o utilize por 730 horas (equivalente a um m√™s). A cobran√ßa seria:

Custo do Armazenamento (em Reais) = 100 GiB x 730 horas x pre√ßo por GB/hora do tipo de volume de 1.000 IOPS

Dessa forma, voc√™ tem controle total sobre seus custos, ajustando o tamanho e o tempo de uso dos volumes conforme a necessidade.
Para acompanhar seus gastos e o uso de volumes, acesse a p√°gina de Faturamento do Console da Magalu Cloud, onde todas as informa√ß√µes sobre o uso do Block Storage estar√£o detalhadas.

---

Vis√£o Geral
O Servi√ßo de Banco de Dados Gerenciado (DBaaS) √© uma solu√ß√£o eficiente em nuvem que permite aos usu√°rios criar, operar e dimensionar bancos de dados de maneira √°gil e simples. Com essa solu√ß√£o, os usu√°rios n√£o precisam se preocupar com a complexidade do gerenciamento da infraestrutura do banco de dados, o que lhes permite concentrar-se em seus aplicativos e servi√ßos principais.
O DBaaS oferece flexibilidade para dimensionar a capacidade do banco de dados conforme necess√°rio, garantindo que a infraestrutura esteja sempre pronta para atender √†s demandas do neg√≥cio, independentemente do tamanho ou da complexidade. Al√©m disso, essa solu√ß√£o oferece recursos integrados de backup, seguran√ßa e recupera√ß√£o de desastres, tornando-se uma op√ß√£o segura e confi√°vel para hospedar e gerenciar dados cr√≠ticos na Magalu Cloud.
O servi√ßo de Database gerenciado oferece uma solu√ß√£o econ√¥mica e eficiente para hospedar e gerenciar bancos de dados na nuvem, com uma estrutura de pre√ßos transparente e flex√≠vel e uma ampla gama de servi√ßos adicionais. Se voc√™ tiver alguma d√∫vida ou precisar de ajuda, entre em contato com nossa equipe de suporte t√©cnico.

---

Criar Inst√¢ncia de banco de dados MySQL

üñ•Ô∏è Console>_ CLIüë£ Inicio > Menu > DBaaS
Abra o portal Magalu Cloud em https://console.magalu.cloud;
No painel inicial, escolha a op√ß√£o Database;
Selecione a op√ß√£o Criar Banco de dados;
Escolha a regi√£o do datacenter onde o database ser√° criado;
Escolha o sistema de gerenciamento do banco de dados;
Selecione a vers√£o desejada;
Escolha um tipo de inst√¢ncia para o banco de dados.
Selecione um valor de armazenamento sugerido ou personalize conforme a sua necessidade.
Em Nome da Inst√¢ncia, informe um identificador √∫nico para sua inst√¢ncia de banco de dados.
Em ID de Login para acesso, informe um nome para seu usu√°rio administrativo do banco de dados.
No campo Senha de acesso, informe uma senha segura para seu usu√°rio administrativo
Em Backup autom√°tico, informe o hor√°rio de realiza√ß√£o do backup di√°rio e o tempo de reten√ß√£o.
Clique em Criar banco de dados.
Pode levar alguns minutos at√© que o banco de dados esteja criado. Aguarde at√© que o status seja "Ligado".
Para criar um nova inst√¢ncia de banco de dados voc√™ pode rodar o comando abaixoMGC-CLI‚Äãmgc dbaas instances create --flavor-id="8bbe8e01-40c8-4d2b-80e8-189debc44b1c" --name="dbaas-name" --password="dbaas-password" --user="dbaas-user" --volume.size=10 --volume.type="CLOUD_NVME_15K" --engine-id="063f3994-b6c2-4c37-96c9-bab8d82d36f7"

---

Como conectar ao DBaaS utilizando uma M√°quina Virtual

üñ•Ô∏è Consoleüë£ Inicio > Menu > DBaaSPara conectar-se ao banco de dados MySQL, √© necess√°rio uma Virtual Machine (m√°quina virtual) provisionada na mesma regi√£o do banco de dados a que deseja-se conectar. Para ilustrar, utilizaremos o exemplo de um banco de dados MySQL e uma VM, como jumphost, utilizando imagem Ubuntu 22.04 LTS.

Abra o portal Magalu Cloud em https://console.magalu.cloud/;


No painel inicial, escolha a op√ß√£o Virtual machines;


Selecione a op√ß√£o Criar Inst√¢ncia;


Em Nome da Inst√¢ncia, informe um identificador √∫nico para sua inst√¢ncia;


Escolha a mesma regi√£o de datacenter selecionada para o database;
a. Ao criar a VM (jumphost), garanta que ela esteja na mesma regi√£o/zona em que voc√™ criou o banco de dados MySQL.


Em Escolha uma Imagem, utilizaremos a imagem Ubuntu 22.04 LTS, a t√≠tulo de exemplo;


Em Escolha um tipo de m√°quina virtual, escolha o perfil de uso para a inst√¢ncia do banco de dados;


Em Chave SSH, gere uma chave p√∫blica SSH para provar sua identidade ao conectar-se a uma inst√¢ncia da Magalu Cloud;


Clique em Criar Inst√¢ncia;


Uma vez que a VM mostrar o status , utilize a chave p√∫blica SSH para se conectar √† VM Ubuntu usando seu IP p√∫blico;
a. No terminal, execute o comando:
ssh usu√°rio@IP_p√∫blico
i. Substitua ‚Äúusu√°rio" pelo seu nome de usu√°rio na VM, que no nosso exemplo ser√° ‚Äúubuntu‚Äù, e ‚ÄúIP p√∫blico" pelo IP p√∫blico da VM.


Uma vez dentro do jumphost (VM Ubuntu), use o cliente de banco de dados MySQL e o IP privado atribu√≠do ao banco de dados na mesma regi√£o da VM jumphost para realizar a conex√£o;
a. No terminal, execute o comando:
sudo apt updatesudo apt install mysql-client
mysql -h ip_privado_do_banco -u usuario -p senha
i. Substitua ‚Äúip_privado_do_banco‚Äù pelo IP privado do banco na mesma regi√£o da VM, e ‚Äòusu√°rio‚Äô e ‚Äòsenha‚Äô pelos dados de login do usu√°rio administrativo do banco de dados MySQL.


Ap√≥s a execu√ß√£o do comando, voc√™ ter√° acesso ao banco de dados MySQL a partir da Virtual Machine jumphost.



---

Alterar configura√ß√µes dos par√¢metros do MySQL
Uma vez conectado ao banco de dados MySQL usando suas credenciais, o MySQL permite configurar uma ampla variedade de par√¢metros que podem ser definidos e persistidos atrav√©s dos comandos SET, SET PERSIST, e SET PERSIST_ONLY. Esses comandos permitem ajustar o comportamento do banco de dados MySQL tanto para a sess√£o atual quanto de forma permanente, garantindo que as altera√ß√µes persistam atrav√©s de reinicializa√ß√µes do banco de dados.
√â importante ressaltar que, embora muitas vari√°veis possam ser alteradas dinamicamente utilizando os comandos acima, algumas vari√°veis requerem que o servi√ßo MySQL seja reiniciado para que as altera√ß√µes entrem em efeito. Portanto, ao ajustar essas vari√°veis, ser√° necess√°rio desligar e ligar a inst√¢ncia do MySQL para que as novas configura√ß√µes sejam aplicadas.
A lista completa de vari√°veis de sistema √© extensa, mas aqui est√£o algumas das mais comuns e √∫teis:
Lista de Par√¢metros Comuns‚Äã
1. Conex√µes e Rede‚Äã

max_connections: Define o n√∫mero m√°ximo de conex√µes simult√¢neas.
connect_timeout: Tempo m√°ximo de espera para uma conex√£o ser estabelecida.
wait_timeout: Tempo de espera para conex√µes inativas antes de serem fechadas.
interactive_timeout: Tempo de espera para conex√µes interativas inativas.
max_allowed_packet: Tamanho m√°ximo de um pacote de comunica√ß√£o.
net_buffer_length: Tamanho inicial do buffer de rede.

2. Configura√ß√µes de Mem√≥ria e Cache‚Äã

query_cache_size: Tamanho da cache de consultas.
query_cache_type: Tipo de cache de consultas.
innodb_buffer_pool_size: Tamanho do pool de buffers do InnoDB.
innodb_log_buffer_size: Tamanho do buffer de log do InnoDB.
key_buffer_size: Tamanho do buffer de √≠ndice.
sort_buffer_size: Tamanho do buffer de ordena√ß√£o.
join_buffer_size: Tamanho do buffer de jun√ß√£o.
read_buffer_size: Tamanho do buffer de leitura.
read_rnd_buffer_size: Tamanho do buffer de leitura aleat√≥ria.
tmp_table_size: Tamanho m√°ximo das tabelas tempor√°rias.
max_heap_table_size: Tamanho m√°ximo das tabelas HEAP.

3. Log e Replica√ß√£o‚Äã

log_queries_not_using_indexes: Loga consultas que n√£o usam √≠ndices.
log_slave_updates: Ativa logs de atualiza√ß√µes em slaves.
sync_binlog: Sincroniza o log bin√°rio.
relay_log_info_repository: Define o reposit√≥rio de informa√ß√µes do relay log.
binlog_cache_size: Tamanho da cache do log bin√°rio.
binlog_checksum: Ativa checksums no log bin√°rio.

4. InnoDB‚Äã

innodb_file_per_table: Cria arquivos individuais por tabela.
innodb_flush_log_at_trx_commit: Define a pol√≠tica de flush do log do InnoDB.
innodb_log_file_size: Tamanho dos arquivos de log do InnoDB.
innodb_log_files_in_group: N√∫mero de arquivos de log no grupo do InnoDB.
innodb_flush_method: M√©todo de flush do InnoDB.
innodb_thread_concurrency: N√∫mero m√°ximo de threads concorrentes no InnoDB.
innodb_lock_wait_timeout: Tempo de espera para lock no InnoDB.

5. Seguran√ßa‚Äã

sql_mode: Define o modo SQL.
secure_file_priv: Restringe opera√ß√µes de arquivos.
skip_name_resolve: Desativa a resolu√ß√£o de nomes de host.
require_secure_transport: Exige transporte seguro para conex√µes.

6. Desempenho‚Äã

table_open_cache: Tamanho da cache de tabelas abertas.
thread_cache_size: Tamanho da cache de threads.
query_cache_limit: Limite de tamanho para a cache de consultas.
innodb_autoinc_lock_mode: Modo de lock para auto incremento no InnoDB.

7. Outros‚Äã

event_scheduler: Ativa o agendador de eventos.
autocommit: Define o comportamento de autocommit.
default_storage_engine: Define o engine de armazenamento padr√£o.
character_set_server: Define o conjunto de caracteres do servidor.
collation_server: Define a collation do servidor.
time_zone: Define o fuso hor√°rio do servidor.
tmpdir: Diret√≥rio para tabelas tempor√°rias.

Exemplos de Comandos‚Äã
Aqui est√£o alguns exemplos de como esses par√¢metros podem ser definidos:
-- Definir o n√∫mero m√°ximo de conex√µesSET PERSIST max_connections = 500;-- Ajustar o tamanho do pool de buffers do InnoDBSET PERSIST innodb_buffer_pool_size = 1073741824;  -- 1 GB-- Ativar log bin√°rioSET PERSIST log_bin = 'ON';-- Definir o modo SQLSET PERSIST sql_mode = 'STRICT_TRANS_TABLES,NO_ENGINE_SUBSTITUTION';-- Definir o tempo de espera para conex√µes inativasSET PERSIST wait_timeout = 300;
Verifica√ß√£o de Vari√°veis‚Äã
Voc√™ pode verificar os valores atuais das vari√°veis com o comando SHOW VARIABLES:
SHOW VARIABLES LIKE 'max_connections';SHOW VARIABLES LIKE 'innodb_buffer_pool_size';
Documenta√ß√£o Completa‚Äã
Para uma lista completa e atualizada de todas as vari√°veis de sistema que podem ser configuradas no MySQL, consulte a documenta√ß√£o oficial do MySQL: MySQL 8.0 Reference Manual - System Variables.
Esta lista cobre apenas uma sele√ß√£o das vari√°veis de sistema mais comumente ajustadas. A documenta√ß√£o oficial oferece uma vis√£o abrangente de todas as vari√°veis configur√°veis, incluindo descri√ß√µes detalhadas e valores poss√≠veis. Verifique sempre a documenta√ß√£o para entender completamente o impacto e os requisitos de cada altera√ß√£o de configura√ß√£o.

---

Gerenciar usu√°rios e permiss√µes
Antes de come√ßar a gerenciar usu√°rios e permiss√µes no MySQL, √© importante garantir que voc√™ tenha acesso a um banco de dados MySQL e a uma Virtual Machine (VM), ambos provisionados na mesma regi√£o das dispon√≠veis na Magalu Cloud. Devido ao fato de o banco de dados MySQL na Magalu Cloud possuir um endere√ßo IPv4 privado, √© necess√°rio utilizar uma VM como um "jump host" para acessar o banco de dados. Utilizar a mesma regi√£o para o banco de dados e a VM minimiza a lat√™ncia e maximiza a efici√™ncia da comunica√ß√£o entre os dois. Al√©m disso, assegurar que ambos est√£o na mesma regi√£o ajuda a evitar custos adicionais de tr√°fego de rede entre regi√µes diferentes e melhora a performance geral do sistema.
1. Criar um novo usu√°rio‚Äã
Para criar um novo usu√°rio no MySQL:


A partir de uma Virtual Machine (VM) criada na Magalu Cloud, conecte-se ao MySQL:
sql
mysql -h ip_privado_do_banco -u usu√°rio -p senha

Substitua ip_privado_do_banco pelo IP privado do banco na mesma regi√£o da VM;
Substitua usu√°rio e senha pelos dados de login do usu√°rio administrativo do banco de dados MySQL.



Crie um novo usu√°rio:
sql
CREATE USER 'newuser'@'host' IDENTIFIED BY 'password';

newuser: o nome de usu√°rio do novo usu√°rio.
host: o host a partir do qual o usu√°rio pode se conectar (por exemplo, localhost ou % para qualquer host).
password: a senha do novo usu√°rio.



Conceder permiss√µes:
sql
GRANT ALL PRIVILEGES ON database_name.* TO 'newuser'@'host';FLUSH PRIVILEGES;

database_name: o banco de dados ao qual o usu√°rio deve ter acesso.



2. Modificar permiss√µes de usu√°rio‚Äã
Para modificar as permiss√µes do usu√°rio:


Conceda privil√©gios adicionais:
sql
GRANT SELECT, INSERT, UPDATE ON database_name.* TO 'username'@'host';FLUSH PRIVILEGES;


Revogar privil√©gios:
sql
REVOKE DELETE ON database_name.* FROM 'username'@'host';FLUSH PRIVILEGES;


3. Excluir um usu√°rio‚Äã
Para excluir um usu√°rio:
sql
DROP USER 'username'@'host';

---

Fazer backup e restaurar banco de dados
Como criar um backup manual‚Äã


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue at√© sua inst√¢ncia: no painel principal, escolha a op√ß√£o database;


Acesse a se√ß√£o Backup: clique no nome da inst√¢ncia na lista de inst√¢ncias. Na guia superior, selecione "Backup";


Crie um backup manual: clique em "Criar backup manual";
noteEsta a√ß√£o pode aumentar o custo mensal aproximado do banco de dados. Revise a documenta√ß√£o de pre√ßos de backup e clique em "Criar".


Aguarde a conclus√£o: pode levar alguns minutos para que o backup seja criado. Aguarde at√© que o status indique "Criado".


Via CLI‚Äã
Para criar um backup manual, voc√™ pode utilizar o comando abaixo:
mgc dbaas instances backups create [instance-id] [flags]
Como excluir um backup manual‚Äã


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue at√© sua inst√¢ncia: no painel principal, escolha a op√ß√£o database;


Acesse a se√ß√£o Backup: clique no nome da inst√¢ncia na lista de inst√¢ncias. Na guia superior, selecione "Backup";


Excluir um backup manual: na lista de backups, selecione o backup manual que deseja excluir. Clique em "Excluir";


Confirmar exclus√£o: para confirmar, digite o nome exato do backup manual na janela de confirma√ß√£o e clique em ‚ÄúExcluir‚Äù;


Aguarde a conclus√£o: pode levar alguns minutos para que o backup seja exclu√≠do.


Via CLI‚Äã
Para excluir um backup manual, voc√™ pode utilizar o comando abaixo:
mgc dbaas backups delete [backup-id] [flags]
Como editar a frequ√™ncia e reten√ß√£o autom√°tica de backup‚Äã


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue at√© sua inst√¢ncia: No painel principal, escolha a op√ß√£o database;


Acesse a se√ß√£o Backup: clique no nome da inst√¢ncia na lista de inst√¢ncias. Na guia superior, selecione "Backup";


Editar configura√ß√µes de backup: clique em "Frequ√™ncia" ou "Per√≠odo de reten√ß√£o";


Definir nova frequ√™ncia e reten√ß√£o: escolha a nova frequ√™ncia e/ou ajuste o per√≠odo de reten√ß√£o. Clique em "Salvar".


Como restaurar um backup‚Äã
O Restore de backups atualmente pode ser realizado via CLI e, em breve, tamb√©m estar√° dispon√≠vel no console.
Via CLI
 mgc dbaas instances restores [instance-id] [backup-id]

---

Solucionar problemas comuns
1. Problemas comuns e solu√ß√µes sugeridas:‚Äã
ProblemaSitua√ß√£oPoss√≠vel Solu√ß√£oN√£o consigo criar/excluir uma inst√¢ncia DBaaSInst√¢ncia em status de ‚ÄúErro‚ÄùAbrir um TicketMinha inst√¢ncia DBaaS est√° demorando muito tempo para criarA inst√¢ncia em status ‚ÄúCriando‚Äù por mais de 15 minutosA cria√ß√£o de uma inst√¢ncia DBaaS pode levar entre 10 e 15 minutos. Se estiver demorando mais, abra um TicketN√£o consigo conectar √† minha inst√¢ncia DBaaS MySQLVia mysql-client ou outro clienteCertifique-se de que: - A inst√¢ncia de DBaaS est√° no status ‚ÄúAtiva‚Äù;  - Est√° tentando o acesso a partir de uma VM na Magalu Cloud na mesma conta e regi√£o do banco de dados;  - Est√° executando o comando de conex√£o corretamente (Tutorial de conex√£o);  - Est√° informando o IP privado da inst√¢ncia corretamente;  - Est√° informando usu√°rio e senha corretamente;  - Se esqueceu o usu√°rio/senha, clique aqui para abrir um Ticket;  - Se ainda n√£o conseguir conex√£o, abra um Ticket para aux√≠lio.Consigo conectar ao MySQL, mas minha aplica√ß√£o n√£o consegueVia mysql-clientCertifique-se de que a configura√ß√£o de rede e firewall da aplica√ß√£o esteja correta e permita conex√µes ao banco de dadosMeu banco de dados est√° lento/com performance degradadaConsultas lentasVeja a se√ß√£o sobre Problemas de desempenho
2. Problemas de desempenho‚Äã
Verifique consultas em execu√ß√£o:
sql
SHOW PROCESSLIST;
Analisar consultas lentas:
sql
SHOW VARIABLES LIKE 'slow_query_log';

Certifique-se de que slow_query_log esteja ativado e verifique slow_query_log_file.


---

Identificar problemas e Melhorar a Performance no MySQL
Caso o seu ambiente apresente algum tipo de lentid√£o ou travamento, √© interessante verificar se existe algum bloqueio no banco de dados com longa dura√ß√£o. Uma forma de voc√™ tentar verificar isso seria executando o comando abaixo:
sql
SELECT    waiting_pid, -- id da query bloqueada    waiting_query, -- comando da query bloqueada    blocking_pid, -- id da query bloqueadora    blocking_query -- comando da query bloqueadoraFROM sys.innodb_lock_waits;
Caso ainda n√£o traga as informa√ß√µes desejadas, voc√™ pode consultar os processos em execu√ß√£o com mais detalhes atrav√©s da consulta abaixo:
sql
SHOW PROCESSLIST;
Ou:
sql
SELECT    pl.id,    pl.user,    pl.host,    pl.db,    pl.command,    pl.time,    pl.state,    SUBSTRING(pl.info, 1, 60) AS info,    it.trx_rows_modifiedFROM information_schema.processlist plLEFT JOIN information_schema.innodb_trx itON pl.id = it.trx_mysql_thread_id;

pl.id: ID da sess√£o.
pl.user: usu√°rio que iniciou a conex√£o.
pl.host: host a partir do qual a execu√ß√£o est√° ocorrendo.
pl.db: nome do banco de dados em uso pela conex√£o.
pl.command: tipo de comando sendo executado (e.g., Query, Sleep).
pl.time: tempo de execu√ß√£o do comando atual, em segundos.
pl.state: estado atual da conex√£o.
SUBSTRING(pl.info, 1, 60) AS info: primeiros 60 caracteres da coluna info, que cont√©m a informa√ß√£o sobre o comando em execu√ß√£o.
it.trx_rows_modified: n√∫mero de linhas modificadas ou inseridas pela transa√ß√£o.

Uma vez identificada uma sess√£o mais demorada e com impacto nas demais sess√µes, √© poss√≠vel checar se o plano de execu√ß√£o est√° adequado. Nesse retorno, √© poss√≠vel verificar se a consulta est√° fazendo uso de √≠ndice e se esse filtro apresenta boa cobertura.
sql
EXPLAIN SELECT * FROM table_name WHERE column_name = 'value';
√â importante sempre considerar a cria√ß√£o de √≠ndices e referenci√°-los na consulta para uma melhor execu√ß√£o. Mais informa√ß√µes podem ser encontradas na documenta√ß√£o oficial do MySQL sobre otimiza√ß√£o de √≠ndices.
1. Indexa√ß√£o‚Äã
Criar √≠ndices:
sql
CREATE INDEX index_name ON table_name(column_name);
Verifique o uso do √≠ndice:
sql
EXPLAIN SELECT * FROM table_name WHERE column_name = 'value';
2. Otimiza√ß√£o de consulta‚Äã
Evite SELECT:
sql
SELECT column1, column2 FROM table_name;

Use JOINs com efici√™ncia: certifique-se de que os √≠ndices adequados estejam em vigor para as colunas usadas em JOINs.

Limitar resultados:
sql
SELECT column1 FROM table_name LIMIT 100;
3. An√°lise e perfil‚Äã
Use o comando EXPLAIN:
sql
EXPLAIN SELECT column1 FROM table_name WHERE column2 = 'value';
Use o comando ANALYZE:
sql
ANALYZE TABLE table_name;

---

Migrar um banco de dados para a nuvem
Preparando-se para a migra√ß√£o‚Äã


Fa√ßa backup do banco de dados no servidor de nuvem: realize o backup do seu banco de dados usando arquivos dump SQL;


Verifique a compatibilidade: certifique-se de que a vers√£o alvo do MySQL na MGC seja compat√≠vel com sua vers√£o atual.


Processo de migra√ß√£o‚Äã
Crie um novo banco de dados na MGC: conecte-se √† sua inst√¢ncia MySQL e crie um novo banco de dados:
sql
CREATE DATABASE new_database_name;

Transferir o arquivo de backup: use ferramentas como scp para transferir o arquivo de backup para a MGC.

Restaure o banco de dados:
sql
mysql -u username -p new_database_name < backup_file.sql
Etapas p√≥s-migra√ß√£o‚Äã


Verifique a integridade dos dados: verifique se todos os dados foram migrados corretamente;


Atualizar cadeias de conex√£o: certifique-se de que seus aplicativos estejam usando as novas cadeias de conex√£o do banco de dados em nuvem;


Monitore o desempenho: fique de olho no desempenho e fa√ßa as otimiza√ß√µes necess√°rias.



---

Redimensionar volume e tipo de m√°quina
Como redimensionar um volume e alterar tipo de m√°quina‚Äã


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue at√© sua inst√¢ncia: no painel principal, escolha a op√ß√£o database;


Acesse as Op√ß√µes da Inst√¢ncia: na lista, selecione o menu de op√ß√µes da inst√¢ncia que deseja redimensionar. Clique em "Configurar banco de dados";


Escolha Nova Configura√ß√£o: selecione o novo tipo de m√°quina e/ou ajuste o tamanho do armazenamento;
noteEsta a√ß√£o pode aumentar o custo mensal aproximado do banco de dados.


Salvar altera√ß√µes: clique em "Salvar altera√ß√µes" para confirmar;


Aguarde a conclus√£o: pode levar alguns minutos para que a opera√ß√£o de redimensionamento seja conclu√≠da. O banco de dados estar√° indispon√≠vel durante esse per√≠odo. Aguarde at√© que o status indique "Online".



---

Criar e gerenciar banco de dados e r√©plicas
Como criar uma r√©plica de banco de dados‚Äã


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue at√© sua inst√¢ncia: no painel principal, escolha a op√ß√£o database;


Acesse os Detalhes do banco de dados: na lista, selecione o menu de op√ß√µes da inst√¢ncia que deseja replicar. Clique em "Detalhes do banco de dados";


Crie uma r√©plica: navegue at√© a aba ‚ÄúReplica√ß√£o‚Äù e clique em "Criar r√©plica";


Escolha Configura√ß√£o da r√©plica: selecione o tipo de m√°quina e nome da r√©plica;
noteEsta a√ß√£o pode aumentar o custo mensal aproximado do banco de dados. Recomenda-se utilizar uma m√°quina com configura√ß√£o igual ou superior √† inst√¢ncia principal para evitar baixo desempenho.


Confirmar e criar: clique em "Criar r√©plica" para confirmar;


Aguarde a conclus√£o: pode levar alguns minutos para que a replica√ß√£o seja conclu√≠da. Aguarde at√© que o status indique "Ligado".


Como excluir uma r√©plica de banco de dados‚Äã


Abra o Console Magalu Cloud: acesse Console Magalu Cloud;


Navegue at√© sua inst√¢ncia: no painel principal, escolha a op√ß√£o database;


Acesse a se√ß√£o Replica√ß√£o: clique no nome da inst√¢ncia na lista de inst√¢ncias. Na guia superior, selecione "Replica√ß√£o";


Excluir uma r√©plica: na lista de r√©plicas, selecione o menu de op√ß√µes da r√©plica que deseja excluir. Clique em "Excluir";


Confirmar exclus√£o: para confirmar, digite o nome exato da r√©plica na janela de confirma√ß√£o e clique em ‚ÄúExcluir‚Äù.


Como excluir uma inst√¢ncia de banco de dados‚Äã


Abra o Portal Magalu Cloud: Console Magalu Cloud;


Navegue at√© sua inst√¢ncia: no painel principal, escolha a op√ß√£o database;


Selecione a inst√¢ncia a ser exclu√≠da: na lista de inst√¢ncias, encontre a inst√¢ncia do banco de dados que deseja excluir. Clique no menu de op√ß√µes dessa inst√¢ncia;


Iniciar exclus√£o: clique em "Excluir";


Confirmar exclus√£o: para confirmar, digite o nome exato da inst√¢ncia do banco de dados na janela de confirma√ß√£o;


Finalizar exclus√£o: clique em "Excluir" na janela de confirma√ß√£o.


noteO processo de exclus√£o pode levar alguns minutos. Aguarde at√© que o status indique que a inst√¢ncia foi exclu√≠da com √™xito.

---

Monitoramento do Banco de Dados MySQL via Prometheus e Grafana
Este documento tem como objetivo guiar o usu√°rio no processo de acesso e coleta de m√©tricas de um banco de dados MySQL, utilizando Prometheus e Grafana, instalados em m√°quina virtual da Magalu Cloud. Certifique-se de seguir cada passo com aten√ß√£o para garantir uma configura√ß√£o adequada e eficiente.
Para exemplificar, utilizaremos o sistema operacional Ubuntu 22.04, a fim de ilustrar cada um dos passos a seguir.
Requisitos:‚Äã

Acesso a um banco de dados MySQL criado na Magalu Cloud.
Acesso a Virtual Machine (VM), criada na mesma regi√£o do banco de dados.
Prometheus instalado e configurado.
Grafana instalado e configurado.

Passo 1: Configura√ß√£o do Banco de Dados MySQL‚Äã

Abra o portal Magalu Cloud em https://portal.magalu.cloud;
No painel inicial, escolha a op√ß√£o database;
Verifique se o banco de dados MySQL est√° acess√≠vel e em funcionamento;
Copie o IP privado do banco de dados.

Passo 2: Configura√ß√£o da Virtual Machine (VM)‚Äã

Certifique-se de que a VM que ser√° utilizada para acessar o banco de dados est√° na mesma regi√£o que o servidor do banco de dados;
Verifique se a VM tem permiss√£o para se comunicar com o banco de dados MySQL atrav√©s de seu IP privado;
Libere as portas TCP/9090 e TCP/3000, na dire√ß√£o Ingress, nas regras dos teus grupos de seguran√ßa da VM.

Passo 3: Instala√ß√£o do Prometheus‚Äã

Adicionar o reposit√≥rio do Prometheus

sudo apt updatesudo apt install -y prometheus

Iniciar Prometheus
Para iniciar o servi√ßo Prometheus, utilize o seguinte comando:

sudo systemctl start prometheus
Este comando inicializa o Prometheus, mas a inicializa√ß√£o n√£o ser√° persistente ap√≥s reinicializa√ß√µes do sistema.
Para configurar o Prometheus para iniciar automaticamente toda vez que o sistema for reiniciado, utilize o comando:
sudo systemctl enable prometheus
O comando enable cria os links simb√≥licos necess√°rios para que o servi√ßo Prometheus seja automaticamente iniciado durante o processo de boot do sistema.
Em resumo:
sudo systemctl start prometheus: Inicia o servi√ßo Prometheus imediatamente.
sudo systemctl enable prometheus: Configura o sistema para iniciar o servi√ßo Prometheus automaticamente em cada boot.
Passo 4: Configura√ß√£o do Prometheus‚Äã

Verifique se o Prometheus est√° instalado e em execu√ß√£o na mesma rede que a VM.
Edite o arquivo de configura√ß√£o do Prometheus (prometheus.yml) para incluir o banco de dados MySQL como um alvo de scraping. O arquivo de configura√ß√£o principal do Prometheus √© prometheus.yml, localizado geralmente em /etc/prometheus/prometheus.yml.

Voc√™ precisar√° edit√°-lo para definir suas configura√ß√µes espec√≠ficas.
sudo vi /etc/prometheus/prometheus.yml
Adicione as seguintes linhas:
scrape_configs:  - job_name: 'mysql'    static_configs:        - targets: ['IP_privado_do_banco_de_dados:8080/mysql', 'IP_privado_do_banco_de_dados:8080/node']

Substitua IP_privado_do_banco_de_dados pelo endere√ßo IP privado do servidor do banco de dados.

Passo 5: Instala√ß√£o do Grafana‚Äã

Adicionar o reposit√≥rio do Grafana

sudo apt-get install -y apt-transport-https software-properties-common wgetwget -q -O - https://packages.grafana.com/gpg.key | sudo apt-key add -sudo add-apt-repository "deb https://packages.grafana.com/oss/deb stable main"sudo apt-get updatesudo apt-get install grafana

Iniciar o Grafana

sudo systemctl enable grafana-serversudo systemctl start grafana-server

Acessar o Grafana: Ap√≥s a instala√ß√£o, voc√™ pode acessar o Grafana atrav√©s de um navegador da web digitando o endere√ßo IP da sua VM seguido da porta padr√£o do Grafana, que √© 3000 (por exemplo, http://seu_endereco_ip:3000). O nome de usu√°rio e senha padr√£o s√£o ambos "admin".

Passo 6: Configura√ß√£o do Grafana‚Äã

Certifique-se de que o Grafana est√° instalado e em execu√ß√£o.
Acesse o painel de administra√ß√£o do Grafana via navegador.
Adicione Prometheus como um data source:


V√° para "Configuration" > "Data Sources".
Clique em "Add data source".
Selecione Prometheus.
Configure o endere√ßo do servidor Prometheus (http://IP_publico_VM:9090).
Clique em "Save & Test" para verificar a conex√£o.


Substitua "IP_publico_VM" pelo endere√ßo IPV4 p√∫blico da sua VM.

Passo 7: Cria√ß√£o de Dashboards no Grafana‚Äã

Crie um novo dashboard no Grafana.
Adicione um novo painel.
Selecione Prometheus como a fonte de dados.
Escreva Queries PromQL para recuperar as m√©tricas desejadas do banco de dados MySQL.
Personalize o painel conforme necess√°rio, adicionando gr√°ficos, tabelas ou outros elementos visuais.
Salve o dashboard para acess√°-lo posteriormente.

Passo 8: Importa√ß√£o de Dashboard no Grafana‚Äã

Acesse o Grafana e fa√ßa login no painel de administra√ß√£o.
No menu lateral esquerdo, clique em "Dashboard" para criar um novo dashboard.
No canto superior direito, clique em "New" e selecione "Import".
Ser√° solicitado que voc√™ insira o ID do dashboard que deseja importar. Para o Node Exporter Full, o ID sugerido do dashboard √© 1860. Para o MySQL Exporter o ID sugerido do dashboard √© 14057 ou 20016.
Digite o ID do dashboard no campo correspondente e clique em "Load".
O Grafana ir√° carregar o modelo do dashboard e exibir√° uma pr√©via do mesmo. Revise as configura√ß√µes e clique em "Import".
Ap√≥s a importa√ß√£o ser conclu√≠da com sucesso, voc√™ ser√° redirecionado para o dashboard rec√©m-importado. Aqui, voc√™ poder√° visualizar as m√©tricas do Node Exporter,por exemplo, de forma detalhada.
Personalize o dashboard conforme necess√°rio, ajustando os intervalos de tempo, adicionando novos pain√©is ou fazendo outras modifica√ß√µes de acordo com suas prefer√™ncias.
Salve o dashboard para acess√°-lo posteriormente e utilizar as m√©tricas de maneira conveniente.

Com este passo adicional, voc√™ poder√° importar o dashboard do Node Exporter Full no Grafana e monitorar as m√©tricas do seu sistema de maneira eficiente e visualmente atraente.
Conclus√£o‚Äã
Ap√≥s seguir esses passos, voc√™ dever√° ser capaz de criar pain√©is e dashboards para visualizar, atrav√©s do Grafana, os dados coletados pelo Prometheus no seu banco de dados MySQL. Certifique-se de manter a configura√ß√£o atualizada e ajustada conforme necess√°rio para garantir um monitoramento eficaz e cont√≠nuo do desempenho do seu banco de dados.

---

Regras de nomenclatura de inst√¢ncias de Databases
Este documento define as diretrizes para nomea√ß√£o de Databases. Essas regras visam garantir consist√™ncia, organiza√ß√£o e seguran√ßa.
Regras de nomea√ß√£o‚Äã

Os nomes de databases devem ser √∫nicos em todo o nosso ambiente de nuvem.
Os nomes de databases devem conter entre 3 e 63 caracteres.
Os nomes de databases devem ser compostos apenas por letras min√∫sculas, n√∫meros, h√≠fens (-) e n√£o podem come√ßar ou terminar com um h√≠fen.
Os nomes de databases n√£o podem conter pontos (.), sublinhados (_) e/ou qualquer caracter especial como caracteres v√°lidos.
Os nomes dos databases n√£o podem conter palavras ilegais, pejorativas ou agressivas.

Boas Pr√°ticas‚Äã

Escolha nomes de databases que sejam descritivos e identifiquem claramente o conte√∫do ou o prop√≥sito do armazenamento.
Evite incluir informa√ß√µes confidenciais ou sens√≠veis nos nomes de databases.
Considere utilizar padr√µes de nomenclatura consistentes para facilitar a organiza√ß√£o e a manuten√ß√£o dos databases ao longo do tempo.
Revise periodicamente os nomes de databases existentes para garantir que ainda estejam alinhados com as pol√≠ticas e pr√°ticas recomendadas.


---

Vis√£o geral
Kubernetes √© um plataforma de c√≥digo aberto, port√°vel e extensiva para o gerenciamento de cargas de trabalho e servi√ßos distribu√≠dos em cont√™ineres, que facilita tanto a configura√ß√£o declarativa quanto a automa√ß√£o.
Magalu Kubernetes Engine √© o Produto da Magalu Cloud de  orquestra√ß√£o de cont√™ineres de forma aut√¥noma, incluindo todo o seu ciclo de vida e possibilitando dividir a carga de trabalho automaticamente e de forma balanceada entre v√°rias r√©plicas de um mesmo ambiente dentro da Magalu Cloud.

---

Pr√©-requisitos

Ter uma conta criada no Console Magalu Cloud.

Opcional‚Äã

Realizar o download e a configura√ß√£o do CLI da Magalu.
Utilizar o kubectl.


---

Criar um Cluster

üñ•Ô∏è Console>_ CLIüë£ Inicio > Menu > KubernetesNa p√°gina de Kubernetes, clique no bot√£o para Criar Cluster.

Escolha um nome √∫nico para o seu Cluster. O nome do Cluster digitado ser√° validado e caso o nome desejado n√£o esteja mais dispon√≠vel, n√£o ser√° permitido criar o Cluster.


Escolha a vers√£o de Kubernetes deseja:

√â recomendado a escolha da vers√£o da mais recente;
Todas as vers√µes suportadas ser√£o exibidas abaixo.



√â necess√°rio escolher a regi√£o do datacenter convenientemente.


Escolha um nome √∫nico para o primeiro node pool do Cluster. O nome do node pool digitado ser√° validado e caso o nome desejado n√£o esteja mais dispon√≠vel, n√£o ser√° permitido criar o Cluster.

Para criar um novo Cluster voc√™ pode rodar o comando abaixo especificando um nome √∫nico de sua prefer√™ncia (sem espa√ßos), seguindo as regras de nomea√ß√£o dos buckets.MGC-CLI‚Äãmgc kubernetes cluster create --description="This is an example cluster." --name="cluster-example" --node-pools='[{"flavor":"cloud-k8s.gp1.small","name":"nodepool-example","replicas":1}]' --param.version="v1.28.5"

---

Utilizar o recurso de Autoscaling

Atualmente o recurso de Autoscaling est√° dispon√≠vel apenas via CLI da Magalu Cloud
Criando cluster com AutoscalingAlterando Node PoolPara criar um cluster com o recurso de autoscaling, utilize o seguinte comando na CLI da Magalu Cloud:mgc kubernetes cluster create --description="This is an example cluster." --name="cluster-example" --node-pools='[{"auto_scale":{"min_replicas":1,"max_replicas":3},"flavor":"cloud-k8s.gp1.small","name":"nodepool-example","replicas":1}]' --param.version="v1.28.5"Par√¢metros‚Äã--description
Descri√ß√£o: Descri√ß√£o do cluster.
Uso: --description="This is an example cluster."
Tipo: String
--name
Descri√ß√£o: Nome do cluster.
Uso: --name="cluster-example"
Tipo: String
--node-pools
Descri√ß√£o: Configura√ß√£o dos pools de n√≥s do cluster. Deve ser fornecido no formato JSON.
Uso: --node-pools='[{"auto_scale":{"min_replicas":1,"max_replicas":3},"flavor":"cloud-k8s.gp1.small","name":"nodepool-example","replicas":1}]'
Tipo: String (JSON) -auto_scale: Configura√ß√µes de autoescala para o pool de n√≥s.

min_replicas: N√∫mero m√≠nimo de r√©plicas.
max_replicas: N√∫mero m√°ximo de r√©plicas.
flavor: Tipo de m√°quina usada no pool de n√≥s.
name: Nome do pool de n√≥s.
replicas: N√∫mero inicial de r√©plicas no pool de n√≥s.


--param.version
Descri√ß√£o: Vers√£o do Kubernetes a ser usada no cluster.
Uso: --param.version="v1.28.5"
Tipo: String
Voc√™ pode alterar um nodePool habilitando o recurso de autoscaling a um cluster existente da seguinte maneira:
Liste os clusters j√° criados com seguinte comando na CLI da Magalu Cloud:
mgc kubernetes cluster list
Liste os nodePools de um cluster atrav√©s do seguinte comando:
mgc kubernetes nodepool list --cluster-id="<Digite aqui o 'id' do cluster obtido no passo anterior>"
Execute o seginte comando de exemplo para habilitar o autoscale em um _nodePool:
mgc kubernetes nodepool update \  --auto-scale.min-replicas=int \  --auto-scale.max-replicas=int \  --node-pool-id="<Digite aqui o 'id' do nodepool obtido no passo anterior>" \  --cluster-id="<Digite aqui o 'id' do cluster obtido no passo n¬∫ 1>"Par√¢metros‚Äã--auto-scale.min-replicas
Descri√ß√£o: Define o n√∫mero m√≠nimo de r√©plicas para o autoescalador do pool de n√≥s.
Uso: --auto-scale.min-replicas=(int)
Tipo: Inteiro
--auto-scale.max-replicas
Descri√ß√£o: Define o n√∫mero m√°ximo de r√©plicas para o autoescalador do pool de n√≥s.
Uso: --auto-scale.max-replicas=(int)
Tipo: Inteiro
--node-pool-id
Descri√ß√£o: Identificador √∫nico do pool de n√≥s a ser atualizado.
Uso: --node-pool-id="<UUID nodePool>"
Tipo: String (UUID)
--cluster-id
Descri√ß√£o: Identificador √∫nico do cluster ao qual o pool de n√≥s pertence.
Uso: --cluster-id="<UUID cluster>"
Tipo: String (UUID)


---

Criar volumes persistentes
1. Criando o StorageClass‚Äã
Um StorageClass define as propriedades dos volumes de armazenamento din√¢mico provisionados. Aqui est√° um exemplo de como criar um StorageClass do Cinder:
  apiVersion: storage.k8s.io/v1  kind: StorageClass  metadata:    name: cinder-storageclass-5k  parameters:    availability: nova    type: cloud_nvme5k  provisioner: cinder.csi.openstack.org  reclaimPolicy: Delete  volumeBindingMode: Immediate

name: O nome do StorageClass, neste exemplo, √© cinder-storageclass-5k.
parameters: Define os par√¢metros espec√≠ficos do Cinder, como availability e type.
provisioner: Especifica o provisionador que deve ser usado para provisionar volumes de armazenamento din√¢mico.

warningA anotation storageclass.kubernetes.io/is-default-class: "true" N√ÉO deve ser utilizada em mais de uma StorageClass para evitar que o Admission Controller se confunda hora de provisionar o volume. Caso seja usada, √© necess√°rio especificar o storageClassName no PVC
1.1 Listando os Diferentes Tipos de Volumes
Para listar os diferentes tipos de StorageClass dispon√≠veis no ambiente, voc√™ pode usar o seguinte comando na CLI MGC
  mgc block-storage volume-types list
Este comando exibir√° os tipos de volume suportados pelo seu provedor de armazenamento.
O resultado mostrar√° uma lista dos tipos de volume dispon√≠veis, que voc√™ pode usar para configurar o seu  StorageClass. O nome do volume type deve ser o valor a ser preenchido na propriedade parameters.type do StorageClass.
infoCada volume-type possui diferentes precifica√ß√µes, que podem ser consultadas em Tipos de volumes

2. Criando o Persistent Volume Claim (PVC) utilizando o StorageClass‚Äã
Agora que o StorageClass foi criado, podemos usar esse StorageClass para provisionar um PV e um PVC. Exemplo de Persistent Volume Claim (PVC):
apiVersion: v1kind: PersistentVolumeClaimmetadata:  name: my-pvcspec:  accessModes:    - ReadWriteOnce  storageClassName: cinder-storageclass-5k  resources:    requests:      storage: 1Gi

accessModes: Define os modos de acesso ao volume. Neste exemplo, √© definido como ReadWriteOnce.
storageClassName: Especifica o nome do StorageClass a ser usado para provisionar o volume.
resources.requests.storage: Define o tamanho do volume a ser provisionado.

dangerSempre exclua os volumes persistentes antes de excluir um cluster. Siga os procedimentos descritos em Excluindo volumes persistentes

3. Criando o POD‚Äã
  apiVersion: v1  kind: Pod  metadata:    name: my-pod  spec:    containers:    - name: my-container      image: nginx      volumeMounts:      - mountPath: "/data"        name: my-volume    volumes:    - name: my-volume      persistentVolumeClaim:        claimName: my-pvc


metadata.name: Especifica o nome do Pod.


spec.containers: Define os containers no Pod.


spec.containers.volumeMounts: Define o ponto de montagem do volume no container.


spec.volumes: Define os volumes a serem montados no Pod.


spec.volumes.persistentVolumeClaim.claimName: Especifica o nome do PVC a ser montado no volume.
noteEste YAML cria um Pod chamado my-pod que usa o PVC my-pvc criado anteriormente. Certifique-se de ajustar o nome do Pod e outros detalhes conforme necess√°rio para o seu caso de uso espec√≠fico.



---

Como implantar, dimensionar e expor um aplicativo simples no Magalu Cloud Kubernetes

Crie um novo deployment - No Kubernetes, um Deployment √© um objeto que pode definir um estado desejado para o seu aplicativo, incluindo o n√∫mero de r√©plicas (cont√™ineres) que voc√™ deseja que estejam em execu√ß√£o

kubectl create deployment nginx --image=nginx

Verifique o status do deployment

kubectl get deployments

Tamb√©m √© poss√≠vel verificar no formato yaml. Este formato pode ser pode ser utilizado para criar novamente este deployment.

kubectl get deployment nginx -o yaml

Execute novamente o comando e redirecione a sa√≠da para um arquivo. Em seguida, edite o arquivo ‚Äúfirst.yaml‚Äù.

kubectl get deployment nginx -o yaml > first.yamlvim first.yaml {sugest√£o de editor de texto vim}


Remova do arquivo ‚Äúfirst.yaml‚Äù, as linhas creationTimestamp, resourceVersion e uid. Remova tamb√©m todas as linhas incluindo e ap√≥s status, que devem estar por volta da linha 120, se as outras j√° tiverem sido removidas.


Delete o deployment existente.


kubectl delete deployment nginx

Edite novamente o arquivo first.yaml e adicione as tr√™s linhas seguintes ap√≥s a linha name: nginx dentro do objeto Spec:

ports:containerPort: 80protocol: TCP

Crie novamente o deployment utilizando o seguinte comando:

kubectl create -f first.yaml

Verifique o Pod e o Deployment

kubectl get deploy.pod

Delete o servi√ßo criado anteriormente

kubectl delete svc nginx

Crie novamente o  servi√ßo e passe agora o tipo LoadBalancer

kubectl expose deployment nginx --type=LoadBalance

Verifique o status e observe as portas externas mencionadas. A sa√≠da mostrar√° o External-IP como pendente. A menos que um provedor responda com um load balancer, continuar√° a exibir como pendente. O provisionamento do IP externo pode levar alguns minutos.

kubectl get svc

Depois de criar o Deployment, use o seguinte comando para verificar se ele est√° funcionando corretamente.

kubectl get deployments

Escale seu deployment para duas r√©plicas

kubectl scale deployment nginx --replicas=2

Verifique a cria√ß√£o das r√©plicas

kubectl get pods

Utilize novamente o comando

kubectl get pods
Copie e cole o IP externo no seu navegador. Se todas as etapas anteriores foram seguidas corretamente, voc√™ dever√° ser capaz de visualizar a p√°gina ‚ÄúWelcome to nginx!‚Äù

Ap√≥s o teste, se desejar excluir o deployment para recuperar recursos do sistema, execute os seguintes comandos:

kubectl delete deployments nginxkubectl delete ep nginxkubectl delete svc nginx
Note que a exclus√£o de um deployment n√£o exclui os endpoints ou servi√ßos.

---

Como restringir acesso a um LoadBalancer de servi√ßo pelo IP de origem
Para restringir o acesso a aplica√ß√µes expostas por Load Balancers de servi√ßo em um cluster Kubernetes de workload, com base no IP de origem da requisi√ß√£o, foram realizados testes utilizando um echoserver (dispon√≠vel no DockerHub da Cilium), um Service do tipo LoadBalancer configurado para testes, e uma especifica√ß√£o do OpenStack Cloud Controller Manager para a implementa√ß√£o da restri√ß√£o.
A funcionalidade loadBalancerSourceRanges permite especificar uma lista de CIDRs autorizados, limitando quais IPs podem acessar o Service do tipo Load Balancer.
Com essa funcionalidade conseguimos definir quais os CIDRs (ranges de IPs) que poder√£o enviar requisi√ß√µes para o IP deste Load Balancer. Se um IP, que n√£o se encaixa em nenhum CIDR da lista, tentar enviar uma requisi√ß√£o ao IP do LoadBalancer, receber√° timeout, pois seu acesso a esse recurso n√£o est√° permitido.
Recursos necess√°rios‚Äã

Namespace e Deployment:

  apiVersion: v1  kind: Namespace  metadata:    name: echoserver  ---  apiVersion: apps/v1  kind: Deployment  metadata:    name: echoserver    namespace: echoserver    labels:      app: echoserver  spec:    replicas: 1    selector:      matchLabels:        app: echoserver    template:      metadata:        labels:          app: echoserver      spec:        containers:        - name: echoserver          image: cilium/echoserver          ports:          - containerPort: 80

Service - Tipo LoadBalancer:

  apiVersion: v1  kind: Service  metadata:    labels:      app: echoserver    name: echoserver    namespace: echoserver  spec:    ports:    - port: 80      protocol: TCP      targetPort: 80    selector:      app: echoserver    type: LoadBalancer    loadBalancerSourceRanges:      - IP
Passo a passo:‚Äã


Crie um cluster pelo portal da Magalu Cloud ou CLI


Fa√ßa download do kubeconfig do cluster e se conecte via kubectl


Fa√ßa deploy do Namespace e do Deployment


Identifique seu IP p√∫blico atrav√©s do seguinte comando (Windows ou Linux):
curl ip.me


Na declara√ß√£o do Service do tipo LoadBalancer, em spec ‚Üí loadBalancerSourceRanges √© onde s√£o definidos os CIDRs (ranges de IPs) que ser√£o permitidos a acessar. Para cada range deve colocar o caracter ‚Äú-‚Äù antes, para definir como mais um item de uma lista segundo a declara√ß√£o do Yaml. A especifica√ß√£o ‚ÄúloadBalancerSourceRanges‚Äú √© uma funcionalidade nativa da api do Kubernetes, ou seja, est√° inclusa por padr√£o na ferramenta, por√©m √© opcional do Cloud Provider se far√° uso dela ou n√£o. No caso o OpenStack Cloud Controler Manager, que √© o Cloud Provider, faz uso. Nesse exemplo usaremos o IP que obtemos com o passo acima (passo 4).
Exemplo de como ficaria:
 apiVersion: v1 kind: Service metadata:   labels:     app: echoserver   name: echoserver   namespace: echoserver spec:   ports:   - port: 80     protocol: TCP     targetPort: 80   selector:     app: echoserver   type: LoadBalancer   loadBalancerSourceRanges:     - 163.116.224.120/32


Fazer deploy do Service do tipo LoadBalancer


Obter o IP externo do LoadBalancer, atrav√©s do comando kubectl get service echoserver -n echoserver onde o Ip externo ser√° exibido no campo EXTERNAL-IP


Acessar o IP externo gerado pelo LoadBalancer por um IP que est√° incluso em um CIDR permitido na lista, atrav√©s do comando curl <enderecoIpExterno>
O retorno do comando ser√° semelhante a este:


  Hostname: echoserver-54f69dcbb4-9v455  Pod Information:      -no pod information available-  Server values:      server_version-nginx: 1.13.3 - lua: 10008  Request Information:      client_address=::ffff:192.168.1.127      method=GET      real path=/      query=      request_version=1.1      request_scheme=http      request_uri=http://213.163.247.41:80/  Request Headers:      accept=*/*      host=213.163.247.41      user-agent-curl/7.81.0      x-forwarded-for-177.130.233.12        Request Body:      -no body in request-
Conclus√£o‚Äã
Fazendo uso da funcionalidade nativa do Kubernetes chamada ‚ÄúloadBalancerSourceRanges‚Äù, √© poss√≠vel restringir o acesso ao LoadBalancer de servi√ßo se baseando no IP de origem da requisi√ß√£o.

Refer√™ncias

Documenta√ß√£o do OpenStack Cloud Controller Manager sobre a op√ß√£o loadBalancerSourceRanges: https://github.com/kubernetes/cloud-provider-openstack/blob/master/docs/openstack-cloud-controller-manager/expose-applications-using-loadbalancer-type-service.md

---

Regras de nomenclatura de clusters
Este documento define as diretrizes para nomea√ß√£o de clusters e nodepools para o produto de Kubernetes na Magalu Cloud. Essas regras visam garantir consist√™ncia, organiza√ß√£o e seguran√ßa.
Regras de nomea√ß√£o‚Äã

Os nomes de clusters e nodepools devem ser √∫nicos em cada regi√£o de nosso ambiente de nuvem.
Os nomes de clusters e nodepools devem conter entre 3 e 63 caracteres.
Os nomes de clusters e nodepools devem ser compostos apenas por letras min√∫sculas, n√∫meros, h√≠fens (-) e n√£o podem come√ßar ou terminar com um h√≠fen.
Os nomes de clusters e nodepools n√£o podem conter pontos (.), sublinhados (_) e/ou qualquer caracter especial como caracteres v√°lidos.
Os nomes dos clusters e nodepools n√£o podem conter palavras ilegais, pejorativas ou agressivas.

Boas Pr√°ticas‚Äã

Escolha nomes de clusters e nodepools que sejam descritivos e identifiquem claramente o conte√∫do ou o prop√≥sito do armazenamento.
Evite incluir informa√ß√µes confidenciais ou sens√≠veis nos nomes de clusters e nodepools.
Considere utilizar padr√µes de nomenclatura consistentes para facilitar a organiza√ß√£o e a manuten√ß√£o dos clusters e nodepools ao longo do tempo.
Revise periodicamente os nomes de cluclusters e nodepoolssters existentes para garantir que ainda estejam alinhados com as pol√≠ticas e pr√°ticas recomendadas.


---

Vis√£o geral
Um CLI (Command Line Interface) √© uma interface de linha de comando que permite aos usu√°rios interagirem com um sistema ou software por meio de comandos digitados em um prompt de comando. Em vez de utilizar uma interface gr√°fica, os usu√°rios interagem com o sistema ou software inserindo comandos de texto.
O MGC CLI (Command Line Interface) √© uma ferramenta que permite aos usu√°rios interagirem com os servi√ßos da Magalu Cloud (MGC) por meio de linha de comando.

---

Pr√©-requisitos
Para utilizar a CLI voc√™ precisa j√° ter criado uma conta na Magalu Cloud atrav√©s do Console Magalu Cloud.
Uma vez tendo criado a sua conta, basta seguir o procedimento de download e instala√ß√£o.

---

Download e instala√ß√£o

macOSLinuxWindowsMacOS‚ÄãPara instalar a CLI no seu sistema macOS, voc√™ pode escolher entre a instala√ß√£o via Homebrew ou baixar o arquivo tar.gz. Recomendamos a instala√ß√£o atrav√©s da ferramenta Homebrew, pois ela facilita a atualiza√ß√£o da CLI e garante que todas as depend√™ncias necess√°rias estejam instaladas e ser√° mais f√°cil manter a CLI atualizada.Homebrew‚ÄãPara instalar a CLI utilizar a ferramenta brew, voc√™ precisa ter certeza de que ela est√° corretamente instalada no seu sistema. Visite o site oficial: HomebrewDepois abra um terminal e execute o comando de instala√ß√£o:brew install magalucloud/mgc/mgccliArquivo tar.gz‚ÄãA CLI possui arquivos de instala√ß√£o separados para cada arquitetura. Baixe o arquivo correspondente a sua arquitetura no reposit√≥rio oficial.https://github.com/MagaluCloud/mgccli/releases/Tenha certeza de que seu usu√°rio possui permiss√£o sudo.Abra um terminal e execute o seguinte comando para criar um diret√≥rio dedicado a CLI na sua home de usu√°rio.mkdir ~/mgc_cliExecute o comando abaixo no mesmo diret√≥rio onde est√° o arquivo .tar.gz. Atualize o nome do arquivo de acordo com aquele que voc√™ baixou.tar -xvf mgc_0.18.3_linux_amd64.tar.gz -C ~/mgc_cli Para melhor experi√™ncia com a CLI, recomendamos que o diret√≥rio de instala√ß√£o seja adicionado na vari√°vel PATH. Rode o comando abaixo e depois adicione essa linha ao arquivo ~/.bashrc ou ~/.zshrc dependendo do seu shell.export PATH=$HOME/mgc_cli:$PATHATEN√á√ÉO: Ser√° necess√°rio dar permiss√£o de execu√ß√£o ao bin√°rio. Na primeira vez que voc√™ execut√°-lo no terminal, o macOS
exibir√° um alerta. Ignore o alerta e v√° at√© "Configura√ß√µes do Sistema", na aba "Privacidade e Seguran√ßa". L√° voc√™ dever√° confirmar que aceita a execu√ß√£o do bin√°rio "mgc".Linux‚ÄãDisponibilizamos pacotes .deb e .rpm para instala√ß√£o em sistemas baseados em Debian e Red Hat, al√©m do arquivo tar.gz para instala√ß√£o manual.Debian / Ubuntu‚ÄãPara instalar a CLI apartir do pacote deb, basta executar o comando abaixo em um terminal dentro do diret√≥rio onde est√° o pacote. Atualize o nome do arquivo .deb de acordo com aquele que voc√™ baixou.sudo dpkg -i mgc_x.xx.x_linux_amd64.debFedora / CentOS‚ÄãPara instalar a CLI apartir do pacote rpm, basta executar o comando abaixo no mesmo diret√≥rio onde est√° o pacote. Atualize o nome do arquivo .rpm de acordo com aquele que voc√™ baixou.sudo rpm -i mgc_x.xx.x_linux_amd64.rpmArquivo tar.gz‚ÄãA CLI possui arquivos de instala√ß√£o separados para cada arquitetura. Baixe o arquivo correspondente a sua arquitetura no reposit√≥rio oficial.https://github.com/MagaluCloud/mgccli/releases/Tenha certeza de que seu usu√°rio possui permiss√£o sudo.Abra um terminal e execute o seguinte comando para criar um diret√≥rio dedicado a CLI na sua home de usu√°rio.mkdir ~/mgc_cliExecute o comando abaixo no mesmo diret√≥rio onde est√° o arquivo .tar.gz. Atualize o nome do arquivo de acordo com aquele que voc√™ baixou.tar -xvf mgc_0.18.3_linux_amd64.tar.gz -C ~/mgc_cli Para melhor experi√™ncia com a CLI, recomendamos que o diret√≥rio de instala√ß√£o seja adicionado na vari√°vel PATH. Rode o comando abaixo e depois adicione essa linha ao arquivo ~/.bashrc ou ~/.zshrc dependendo do seu shell.export PATH=$HOME/mgc_cli:$PATHWindows‚ÄãA CLI possui arquivos de instala√ß√£o separados para cada arquitetura. Baixe o arquivo correspondente a sua arquitetura (amd64 / arm) no reposit√≥rio oficial.https://github.com/MagaluCloud/mgccli/releases/Para instalar a CLI no seu sistema Windows 10/11 siga os passos abaixo.
Extraia o conte√∫do do arquivo ZIP para uma pasta de sua prefer√™ncia.
Abra um Prompt de Comando ou terminal Powershell na pasta onde voc√™ extraiu os arquivos.
Rode o comando abaixo para confirmar a instala√ß√£o:
mgc --version
Adicione a CLI na vari√°vel de ambiente PATH para melhor experi√™ncia. Atualize o caminho para o diret√≥rio onde voc√™ extraiu a CLI e execute o comando abaixo.
$env:Path += ";C:\Users\your-user\mgc-cli"

---

Autentica√ß√£o
Autentica√ß√£o Padr√£o‚Äã
Para fazer a autentica√ß√£o na CLI e ter sua credencial armazenada no arquivo de configura√ß√£o, utilize o seguinte comando:
mgc auth login
Este comando abrir√° uma janela do seu navegador padr√£o diretamente no site do ID Magalu, onde voc√™ dever√° fazer seu login. Ao
terminar o procedimento e fechar o navegador, a CLI exibir√° a confirma√ß√£o e seu token de acesso ser√° salvo no arquivo $HOME/.config/mgc/<PERFIL>/auth.yaml
Onde PERFIL √© o nome do perfil que voc√™ deseja configurar.
Caso precise do token de acesso para usar com a API da Magalu Cloud, digite o comando abaixo:
mgc auth access-token
Autentica√ß√£o com API Key‚Äã
infoA autentica√ß√£o com API Key √© indicada para cria√ß√£o de automa√ß√µes ou scripts.
Para utilizar a API Key, o primeiro passo √© criar uma.
N√≥s oferecemos duas formas de utiliza√ß√£o:
1. API Key como vari√°vel de ambiente‚Äã
Para utilizar a API Key como vari√°vel de ambiente, basta configurar as vari√°veis
Desta forma, ao utilizar a CLI, automaticamente j√° usar√° a API Key como forma de autentica√ß√£o.
warningCaso n√£o queira mais utilizar a API Key como forma de autenta√ß√£o, √© necess√°rio remover a vari√°vel de ambiente.
2. API Key diretamente no comando‚Äã
Para utilizar a API Key na execu√ß√£o dos comandos, √© necess√°rio adicionar a flag --api-key="api-key-value"
mgc vm instances list --api-key="api-key-value"
Autentica√ß√£o Headless‚Äã
A autentica√ß√£o Headless poder√° ser √∫til caso esteja realizando o processo em uma m√°quina virtual onde n√£o possui um browser.
Siga o passo a passo:

Na m√°quina virtual, com a CLI j√° instalada execute o comando no terminal

mgc auth login --headless


Copie a URL gerada para uma m√°quina com browser.


Realize o Login no ID Magalu.


Voc√™ ser√° redirecionado para uma URL localhost, copie essa URL inteira.


Cole esta URL no terminal da m√°quina virtual.



---

Administrar Workspaces
A CLI possui uma ferramenta muito √∫til para agrupar configura√ß√µes semelhantes e permitir que voc√™ alterne entre elas quando necess√°rio: os workspaces.
Com os workspaces voc√™ pode, por exemplo, ter uma configura√ß√£o diferente para cada regi√£o ou para cada tenant que deseja usar. Dessa forma, voc√™ n√£o precisa alterar todas as configura√ß√µes sempre que alternar entre regi√µes ou tenants, basta trocar o workspace.
mgc workspace
Os comandos dispon√≠veis para gest√£o de workspaces s√£o: create, delete, current, list, set-current e select-current.
Para criar um workspace novo, basta rodar o comando abaixo, fornecendo o nome do novo workspace.
mgc workspace create "meu-workspace"
Voc√™ pode agora listar todos os workspaces dispon√≠veis na sua configura√ß√£o local com o comando abaixo.
mgc workspace list
E para definir o novo workspace como ativo, voc√™ pode usar os comandos set-current ou select-current, como mostrado nos exemplos abaixo.
mgc workspace set-current "meu-workspace"
O comando select permite a sele√ß√£o interativa, facilitada.
mgc workspace select-current
Se desejar apagar um workspace existente, basta executar o comando delete.
mgc workspace delete "meu-workspace"
IMPORTANTE: os workspaces s√£o armazenados localmente nos arquivos de configura√ß√£o da CLI. Se voc√™ instalar a CLI em outro sistema, os workspaces n√£o ser√£o automaticamente disponibilizados na nova instala√ß√£o.

---

Administrar Tenants
A CLI permite selecionar sobre qual tenant os comandos ser√£o executados. Para isso h√° uma area de gest√£o de tenants na op√ß√£o auth tenant.
mgc auth tenant
Aqui voc√™ pode listar os tenant dispon√≠veis com o comando abaixo.
mgc auth tenant list
Verificar qual o tenant ativo no momento (current):
mgc auth tenant current
E alterar o tenant ativo, dentre os dispon√≠veis. Para isso existem duas formas.
Usando o comando set e informando qual o tenant desejado explicitamente apontando para seu UUID.
mgc auth tenant set ad468668-4cd4-4336-905e-90a390502e97
Ou ent√£o usando o comando select, que torna esse processo muito mais f√°cil, porque exibir√° na tela a lista de tenants dispon√≠veis em modo de sele√ß√£o interativo.
mgc auth tenant select

---

Configurando a CLI
√â poss√≠vel definir configura√ß√µes padr√£o a serem utilizadas em todos os comandos, entregando uma experi√™nciua mais fluida no uso da CLI. Vamos ver algumas das op√ß√µes.
Definir padr√£o de formato de sa√≠da‚Äã
O comando abaixo executa a altera√ß√£o permanente do tipo de sa√≠da da CLI para JSON, ou seja, todos os comandos executados ap√≥s este ter√£o suas sa√≠das nesse formato se n√£o houver um outro formato especificado na linha do comando.
mgc config set --key defaultOutput --value json
Outros valores poss√≠veis para essa configura√ß√£o seriam: jsonpath-file, table, table-file, template, template-file, yaml, json, jsonpath.
Para mais detalhes de como utilizar cada um dos formatos, execute o comando de ajuda abaixo.
mgc --cli.output help
Neste guia vamos utilizar como padr√£o a sa√≠da do tipo json.
Se voc√™ desejar alterar o formato de sa√≠da para um comando espec√≠fico, basta adicionar a flag -o seguida do formato desejado. Abaixo segue um exemplo:
mgc virtual-machines instances list -o table
Definir regi√£o‚Äã
Ao definir uma regi√£o padr√£o para a CLI todos os comandos executados far√£o refer√™ncia a ela,
salvo se outra regi√£o for informada na linha de comando. Para definir a regi√£o padr√£o como
sendo br-ne1 execute o comando abaixo.
mgc config set --key region --value br-ne1
H√° outros valores poss√≠veis para essa vari√°vel de configura√ß√£o, como por exemplo br-se1 .
Consulte a lista de regi√µes dispon√≠veis rodando o comando abaixo.
mgc config get-schema region -o jsonpath=$.enum
Remover highlights para scripts‚Äã
Caso esteja utilizando a CLI em scripts, √© comum querer remover os highlights (cores, loading...) das opera√ß√µes, para isso, baste utilizar a flag --raw ao final dos comandos, exemplo:
mgc vm instances list --raw
Outras configura√ß√µes‚Äã
Existem outras op√ß√µes de configura√ß√£o dispon√≠veis:

Chunk Size: tamanho do chunk em requisi√ß√µes multipart de Object Storage.
Workers: n√∫mero de processos paralelos em opera√ß√µes do Object Storage.

Voc√™ pode listar todas as configura√ß√µes dispon√≠veis com o comando abaixo.
mgc config list
E se desejar alterar qualquer uma delas, basta executar o comando config set com o nome da configura√ß√£o (key) e do valor (value) a ser aplicado.
mgc config set --key nome_da_config --value valor_a_aplicar
Arquivo local de configura√ß√µes‚Äã
As configura√ß√µes alteradas pela CLI ser√£o armazenadas em um arquivo local dentro da sua pasta de usu√°rio: $HOME/.config/mgc/<PERFIL>/cli.yaml
No Windows essa pasta se localiza em: $env:APPDATA\mgc\<PERFIL>\
Onde <PERFIL> √© o nome do perfil que voc√™ deseja configurar.

---

Commands-reference
This CLI is a dynamic processor of OpenAPI files that
can generate a command line on-demand for Rest manipulation
Usage:‚Äã
Usage:  ./mgc [flags]  ./mgc [command]
Product catalog:‚Äã

Product catalog:
auth               Actions with ID Magalu to log in, refresh tokens, change tenants and others
block-storage      Block Storage API Product Documentation
config             Manage Configuration values
container-registry Magalu Container Registry product API.
dbaas              DBaaS API Product.
kubernetes         APIs related to the Kubernetes product.
network            APIs referentes ao produto de VPC
object-storage     Operations for Object Storage API
profile            Profile related commands
virtual-machine    Virtual Machine Api Product

Other commands:‚Äã

Other commands:
completion         Generate the autocompletion script for the specified shell
dump-tree          Print command tree
help               Help about any command

Flags:‚Äã
Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text  -h, --help                   help for ./mgc  -v, --version                version for ./mgc

---

Auth
The authentication credentials set here will be used as a basis for a variety
of HTTP requests using the MgcSDK. Authentication is done via Magalu Cloud account
(Object Storage requires special keys, refer to it for more info)
Usage:‚Äã
Usage:  ./mgc auth [flags]  ./mgc auth [command]
Product catalog:‚Äã

Commands:
access-token Retrieve the access token used in the APIs
clients      Manage Clients (Oauth Applications) to use ID Magalu
login        Authenticate with Magalu Cloud
tenant       Manage Tenants

Other commands:‚Äã

Flags:
-h, --help   help for auth

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Login
Log in to your Magalu Cloud account. When you login with this command,
the current Tenant will always be set to the default one. To see more details
about a successful login, use the '--show' flag when logging in
Usage:‚Äã
Usage:  ./mgc auth login [flags]
Product catalog:‚Äã

Flags:
--headless               Generate URL for the login at local environment
-h, --help                   help for login
--qrcode                 Generate a qrcode for the login URL
--scopes array(string)   All desired scopes for the resulting access token
--show                   Show the access token after the login completes

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Access_token
Retrieve the access token used in the APIs
Usage:‚Äã
Usage:  ./mgc auth access-token [flags]
Product catalog:‚Äã

Aliases:
access-token, access_token

Other commands:‚Äã

Flags:
-h, --help       help for access-token
--validate   Validate the token, refreshing if needed

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Clients
Manage Clients (Oauth Applications) to use ID Magalu
Usage:‚Äã
Usage:  ./mgc auth clients [flags]  ./mgc auth clients [command]
Product catalog:‚Äã

Commands:
create      Create new client (Oauth Application)
list        List user clients
update      Update a client (Oauth Application)

Other commands:‚Äã

Flags:
-h, --help   help for clients

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List user clients
Usage:‚Äã
Usage:  ./mgc auth clients list [flags]
Product catalog:‚Äã

Flags:
-h, --help   help for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Create
Create new client (Oauth Application)
Usage:‚Äã
Usage:  ./mgc auth clients create [name] [description] [redirect-uris] [icon] [access-token-expiration] [always-require-login] [client-privacy-term-url] [terms-of-use] [audiences] [backchannel-logout-session-enabled] [backchannel-logout-uri] [oidc-audiences] [refresh-token-custom-expires-enabled] [refresh-token-expiration] [reason] [flags]
Product catalog:‚Äã

Examples:

./mgc auth clients create --access-token-expiration=7200 --audiences="public" --description="Client description" --name="Client Name" --refresh-token-expiration=15778476
Other commands:‚Äã

Flags:
--access-token-expiration integer        Access token expiration (in seconds)
--always-require-login                   Must ignore active Magalu ID session and always require login
--audiences string                       Client audiences (separated by space)
--backchannel-logout-session-enabled     Client requires backchannel logout session
--backchannel-logout-uri string          Backchannel logout URI
--client-privacy-term-url string         URL to privacy term (required)
--description string                     Description of new client (required)
-h, --help                                   help for create
--icon string                            URL for client icon
--name string                            Name of new client (required)
--oidc-audiences string                  Audiences for ID token
--reason string                          Note to inform the reason for creating the client. Will help with the application approval process (required)
--redirect-uris string                   Redirect URIs (separated by space) (required)
--refresh-token-custom-expires-enabled   Use custom value for refresh token expiration
--refresh-token-expiration integer       Custom refresh token expiration value (in seconds)
--terms-of-use string                    URL to terms of use (required)

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Update
Update a client (Oauth Application)
Usage:‚Äã
Usage:  ./mgc auth clients update [id] [name] [description] [redirect-uris] [icon] [access-token-expiration] [always-require-login] [client-privacy-term-url] [terms-of-use] [audiences] [backchannel-logout-session-enabled] [backchannel-logout-uri] [oidc-audiences] [refresh-token-custom-expires-enabled] [refresh-token-expiration] [reason] [flags]
Product catalog:‚Äã

Examples:

./mgc auth clients update --access-token-expiration=7200 --audiences="public" --description="Client description" --name="Client Name" --refresh-token-expiration=15778476
Other commands:‚Äã

Flags:
--access-token-expiration integer        Access token expiration (in seconds)
--always-require-login                   Must ignore active Magalu ID session and always require login
--audiences string                       Client audiences (separated by space)
--backchannel-logout-session-enabled     Client requires backchannel logout session
--backchannel-logout-uri string          Backchannel logout URI
--client-privacy-term-url string         URL to privacy term
--description string                     Description of new client
-h, --help                                   help for update
--icon string                            URL for client icon
--id string                              UUID of client (required)
--name string                            Name of new client
--oidc-audiences string                  Audiences for ID token
--reason string                          Note to inform the reason for creating the client. Will help with the application approval process
--redirect-uris string                   Redirect URIs (separated by space)
--refresh-token-custom-expires-enabled   Use custom value for refresh token expiration
--refresh-token-expiration integer       Custom refresh token expiration value (in seconds)
--terms-of-use string                    URL to terms of use

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Tenant
Tenants work like sub-accounts. You may have more than one Tenant under your
Magalu Cloud account and they each store their data separately, but are billed
under the same account
Usage:‚Äã
Usage:  ./mgc auth tenant [flags]  ./mgc auth tenant [command]
Product catalog:‚Äã

Commands:
current     Get the currently active Tenant
list        List all available tenants for current login
set         Set the active Tenant to be used for all subsequent requests

Other commands:‚Äã

Additional Commands:
select      call "list", prompt selection and then "set"

Flags:‚Äã
Flags:  -h, --help   help for tenant

---

List
List all available tenants for current login
Usage:‚Äã
Usage:  ./mgc auth tenant list [flags]
Product catalog:‚Äã

Flags:
-h, --help   help for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Current
The current Tenant is used for all Magalu HTTP requests
Usage:‚Äã
Usage:  ./mgc auth tenant current [flags]
Product catalog:‚Äã

Flags:
-h, --help   help for current

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Set
Set the active Tenant to be used for all subsequent requests
Usage:‚Äã
Usage:  ./mgc auth tenant set [uuid] [flags]
Product catalog:‚Äã

Flags:
-h, --help          help for set
--uuid string   The UUID of the desired Tenant. To list all possible IDs, run auth tenant list (required)

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã
** If you have an API Key set, changing the tenant will unset it.

---

Block-storage
Block Storage API Product Documentation
Usage:‚Äã
Usage:  ./mgc block-storage [flags]  ./mgc block-storage [command]
Product catalog:‚Äã

Aliases:
block-storage, bs, blocks, blst

Other commands:‚Äã

Commands:
snapshots    Operations with snapshots for volumes.
volume-types Operations with volume types for volumes.
volumes      Operations with volumes, including create, delete, extend, retype, list and other actions.

Flags:‚Äã
Flags:  -h, --help      help for block-storage  -v, --version   version for block-storage

---

Snapshots
Operations with snapshots for volumes.
Usage:‚Äã
Usage:  ./mgc block-storage snapshots [flags]  ./mgc block-storage snapshots [command]
Product catalog:‚Äã

Commands:
create      Create a snapshot
delete      Delete a snapshot
get         Retrieve the details of a snapshot
list        List snapshots in the current tenant
rename      Rename a snapshot
restore     Restore a snapshot to a new volume

Other commands:‚Äã

Flags:
-h, --help      help for snapshots
-v, --version   version for snapshots

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Retrieve a list of Snapshots for the currently authenticated tenant.
Usage:‚Äã
#### Notes- Use the expand argument to obtain additional details about the Volume used to create each Snapshot.
Product catalog:‚Äã

Usage:

./mgc block-storage snapshots list [flags]
Other commands:‚Äã

Flags:
--control.limit integer     Limit (default 50)
--control.offset integer    Offset
--control.sort string       Sort (pattern: ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "created_at:asc")
--expand array(enum)       Expand (default [])
-h, --help                     help for list
-v, --version                  version for list

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Create
Create a Snapshot for the currently authenticated tenant.
Usage:‚Äã
The Snapshot can be used when it reaches the "available" state and the "completed" status.
Product catalog:‚Äã


Rules‚Äã



The Snapshot name must be unique; otherwise, the creation will be disallowed.




Creating Snapshots from restored Volumes may lead to future conflicts as


you can't delete a Volume with an Snapshot and can't delete a Snapshot with a
restored Volume, so we recommend avoiding it.

Other commands:‚Äã


Notes‚Äã



Use the block-storage volume list command to retrieve a list of all


Volumes and obtain the ID of the Volume that will be used to create the
Snapshot.

Flags:‚Äã
Usage:  ./mgc block-storage snapshots create [flags]

---

Delete
Delete a Snapshot for the currently authenticated tenant.
Usage:‚Äã
#### Rules- The Snapshot's status must be "completed".- The Snapshot's state must be "available".- Deleting a Snapshot that has been restored is not possible. If necessary, delete the restored Volume first and then proceed to delete the Snapshot.
Product catalog:‚Äã


Notes‚Äã



Utilize the block-storage snapshots list command to retrieve a list of


all Snapshots and obtain the ID of the Snapshot you wish to delete.


If needed, you can use the block-storage volume list command to retrieve


a list of all Volumes and obtain the ID of the restored Volume.

Other commands:‚Äã

Usage:

./mgc block-storage snapshots delete [id] [flags]
Flags:‚Äã
Flags:  -h, --help      help for delete      --id uuid   Id (required)  -v, --version   version for delete

---

Get
Retrieve details of a Snapshot for the currently authenticated tenant.
Usage:‚Äã
#### Notes- Use the **expand** argument to obtain additional details about the Volume used to create the Snapshot.- Utilize the **block-storage snapshots list** command to retrieve a list of all Snapshots and obtain the ID of the Snapshot for which you want to retrieve details.
Product catalog:‚Äã

Usage:

./mgc block-storage snapshots get [id] [flags]
Other commands:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--expand array(enum)            Expand (default [])
-h, --help                          help for get
--id uuid                       Id (required)
-v, --version                       version for get

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Rename
Rename a Snapshot for the currently authenticated tenant.
Usage:‚Äã
#### Rules- The Snapshot name must be unique; otherwise, renaming will not be allowed.
Product catalog:‚Äã


Notes‚Äã



Utilize the block-storage snapshots list command to retrieve a list of


all Snapshots and obtain the ID of the Snapshot you wish to rename.

Other commands:‚Äã

Usage:

./mgc block-storage snapshots rename [id] [flags]
Flags:‚Äã
Flags:      --cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")      --cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'  -h, --help                          help for rename      --id uuid                       Id (required)      --name string                   Name (between 1 and 255 characters) (required)  -v, --version                       version for rename

---

Restore
Restore a Snapshot on a new Volume to the currently
authenticated tenant.
Usage:‚Äã
The restored Volume can be used when it reaches the "available" state and the "completed" status.
Product catalog:‚Äã


Notes‚Äã



To obtain the ID of the Snapshot you wish to restore, you can use the


block-storage snapshots list command to list all Snapshots.


Check the state and status of your Volume using the


block-storage volume get --id [uuid] command.

Other commands:‚Äã

Usage:

./mgc block-storage snapshots restore [snapshot-id] [flags]
Flags:‚Äã
Flags:      --cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")      --cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'  -h, --help                          help for restore      --name string                   Name (min character count: 1) (required)      --snapshot-id uuid              Snapshot Id (required)  -v, --version                       version for restore

---

Volume-attachment
Block Storage Volume Attachment
Usage:‚Äã
Usage:  ./mgc block-storage volume-attachment [flags]  ./mgc block-storage volume-attachment [command]
Product catalog:‚Äã

Commands:
create      Attach a volume to a virtual machine instance
delete      Detach a volume from a virtual machine instance
get         Check if a volume is attached to a virtual machine instance

Other commands:‚Äã

Flags:
-h, --help   help for volume-attachment

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Attach a volume to a virtual machine instance
Usage:‚Äã
Usage:  ./mgc block-storage volume-attachment create [flags]
Product catalog:‚Äã

Flags:
--block-storage-id uuid         Id
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'
-h, --help                          help for create
--virtual-machine-id uuid       Virtual Machine Id

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Delete
Detach a volume from a virtual machine instance
Usage:‚Äã
Usage:  ./mgc block-storage volume-attachment delete [flags]
Product catalog:‚Äã

Flags:
--block-storage-id uuid     Id
-h, --help                      help for delete
--virtual-machine-id uuid   Virtual Machine Id

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Get
Check if a volume is attached to a virtual machine instance
Usage:‚Äã
Usage:  ./mgc block-storage volume-attachment get [flags]
Product catalog:‚Äã

Flags:
--block-storage-id uuid     Id
-h, --help                      help for get
--virtual-machine-id uuid   Virtual Machine Id

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Volume-types
Operations with volume types for volumes.
Usage:‚Äã
Usage:  ./mgc block-storage volume-types [flags]  ./mgc block-storage volume-types [command]
Product catalog:‚Äã

Commands:
list        List volume types

Other commands:‚Äã

Flags:
-h, --help      help for volume-types
-v, --version   version for volume-types

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List Volume Types allowed in the current region.
Usage:‚Äã
#### Notes
Product catalog:‚Äã



Volume types are managed internally. If you wish to use a Volume Type that


is not yet available, please contact our support team for assistance.

Other commands:‚Äã

Usage:

./mgc block-storage volume-types list [flags]
Flags:‚Äã
Flags:  -h, --help      help for list  -v, --version   version for list

---

Volumes
Operations with volumes, including create, delete, extend, retype, list and other actions.
Usage:‚Äã
Usage:  ./mgc block-storage volumes [flags]  ./mgc block-storage volumes [command]
Product catalog:‚Äã

Commands:
attach      Attach a Volume
create      Create a new Volume
delete      Delete a Volume
detach      Detach a Volume
extend      Extend a Volume
get         Retrieve the details of a volume
list        List all Volumes
rename      Rename a volume
retype      Retype a Volume

Other commands:‚Äã

Flags:
-h, --help      help for volumes
-v, --version   version for volumes

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Config
Configuration values are available to be set so that they persist between
different executions of the MgcSDK. They reside in a YAML file when set.
Config values may also be loaded via Environment Variables. Any Config available
(see 'list') may be exported as an env variable in uppercase with the 'MGC_' prefix
Usage:‚Äã
Usage:  ./mgc config [flags]  ./mgc config [command]
Product catalog:‚Äã

Aliases:
config, conf

Other commands:‚Äã

Commands:
delete      Delete/unset a Config value that had been previously set
get         Get a specific Config value that has been previously set
get-schema  Get the JSON Schema for the specified Config
list        List all available Configs
set         Set a specific Config value in the configuration file

Flags:‚Äã
Flags:  -h, --help   help for config

---

List
List all available Configs
Usage:‚Äã
Usage:  ./mgc config list [flags]
Product catalog:‚Äã

Flags:
-h, --help   help for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Delete
Delete/unset a Config value that had been previously set. This does not
affect the environment variables
Usage:‚Äã
Usage:  ./mgc config delete [key] [flags]
Product catalog:‚Äã

Flags:
-h, --help         help for delete
--key string   Name of the config to be deleted (required)

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Get-schema
Get the JSON Schema for the specified Config. The Schema has
information about the accepted values for the Config, constraints, type, description, etc.
Usage:‚Äã
Usage:  ./mgc config get-schema [key] [flags]
Product catalog:‚Äã

Flags:
-h, --help         help for get-schema
--key string    (required)

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Get
Get a specific Config value that has been previously set. If there's an env variable
matching the key (in uppercase and with the 'MGC_' prefix), it'll be retreived.
Otherwise, the value will be searched for in the YAML file
Usage:‚Äã
Usage:  ./mgc config get [key] [flags]
Product catalog:‚Äã

Flags:
-h, --help         help for get
--key string   Name of the desired config (required)

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Set
Set a specific Config value in the configuration file
Usage:‚Äã
Usage:  ./mgc config set [key] [value] [flags]
Product catalog:‚Äã

Flags:
-h, --help             help for set
--key string       Name of the desired config (required)
--value anyValue   New flag value
Use --value=help for more details (required)

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text

Flags:‚Äã


---

Container-registry
Magalu Container Registry product API.
Usage:‚Äã
Usage:  ./mgc container-registry [flags]  ./mgc container-registry [command]
Product catalog:‚Äã

Commands:
credentials  Routes related to credentials to login to Docker.
images       Routes related to listing and deletion of images.
registries   Routes related to creation, listing and deletion of registries.
repositories Routes related to listing and deletion of repositories.

Other commands:‚Äã

Flags:
-h, --help      help for container-registry
-v, --version   version for container-registry

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Credentials
Routes related to credentials to login to Docker.
Usage:‚Äã
Usage:  ./mgc container-registry credentials [flags]  ./mgc container-registry credentials [command]
Product catalog:‚Äã

Commands:
list        Get credentials for container registry

Other commands:‚Äã

Flags:
-h, --help      help for credentials
-v, --version   version for credentials

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Return container registry user's authentication credentials.
Usage: ‚Äã
Usage:  ./mgc container-registry credentials list [flags]
Product catalog:‚Äã

Flags:
-h, --help      help for list
-v, --version   version for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Images
Routes related to listing and deletion of images.
Usage:‚Äã
Usage:  ./mgc container-registry images [flags]  ./mgc container-registry images [command]
Product catalog:‚Äã

Commands:
delete      Delete image by digest or tag
get         Get image details
list        List images in container registry repository

Other commands:‚Äã

Flags:
-h, --help      help for images
-v, --version   version for images

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List all images in container registry repository
Usage:‚Äã
Usage:  ./mgc container-registry images list [registry-id] [repository-name] [flags]
Product catalog:‚Äã

Flags:
--control.limit integer    Limit (min: 1)
--control.offset integer   Offset (min: 0)
--control.sort string      Fields to use as reference to sort. (pattern: (^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "pushed_at:desc")
--expand array(string)     You can get more detailed info about: ['tags_details', 'extra_attr', 'manifest_media_type', 'media_type']
-h, --help                     help for list
--registry-id uuid         Container Registry's UUID. (required)
--repository-name string   Repository's name. (required)
-v, --version                  version for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Delete
Delete repository image by digest or tag
Usage:‚Äã
Usage:  ./mgc container-registry images delete [registry-id] [repository-name] [digest-or-tag] [flags]
Product catalog:‚Äã

Flags:
--digest-or-tag string     Digest or tag of an image (required)
-h, --help                     help for delete
--registry-id uuid         Container Registry's UUID. (required)
--repository-name string   Repository's name. (required)
-v, --version                  version for delete

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Get
Show detailed information about the image.
Usage:‚Äã
Usage:  ./mgc container-registry images get [registry-id] [repository-name] [digest-or-tag] [flags]
Product catalog:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--digest-or-tag string          Digest or tag of an image. (required)
-h, --help                          help for get
--registry-id uuid              Container Registry's UUID. (required)
--repository-name string        Repository's name. (required)
-v, --version                       version for get

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Registries
Routes related to creation, listing and deletion of registries.
Usage:‚Äã
Usage:  ./mgc container-registry registries [flags]  ./mgc container-registry registries [command]
Product catalog:‚Äã

Commands:
create      Create a container registry
delete      Delete a container registry by registry_id
get         Get registry information
list        List all container registries

Other commands:‚Äã

Flags:
-h, --help      help for registries
-v, --version   version for registries

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List user's container registries.
Usage:‚Äã
Usage:  ./mgc container-registry registries list [flags]
Product catalog:‚Äã

Flags:
--control.limit integer    Limit (min: 1)
--control.offset integer   Offset (min: 0)
--control.sort string      Fields to use as reference to sort. (pattern: (^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "created_at:asc")
-h, --help                     help for list
-v, --version                  version for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Create
Creates a container registry in Magalu Cloud.
Usage:‚Äã
Usage:  ./mgc container-registry registries create [flags]
Product catalog:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'
-h, --help                          help for create
--name string                   A unique, global name for the container registry. It must be written in lowercase letters and consists only of numbers and letters, up to a limit of 63 characters. (required)
-v, --version                       version for create

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Delete
Delete a container registry by uuid.
Usage:‚Äã
Usage:  ./mgc container-registry registries delete [registry-id] [flags]
Product catalog:‚Äã

Flags:
-h, --help               help for delete
--registry-id uuid   Container Registry's UUID. (required)
-v, --version            version for delete

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Get
Show detailed information about the user's container registry.
Usage:‚Äã
Usage:  ./mgc container-registry registries get [registry-id] [flags]
Product catalog:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
-h, --help                          help for get
--registry-id uuid              Container Registry's UUID. (required)
-v, --version                       version for get

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Repositories
Routes related to listing and deletion of repositories.
Usage:‚Äã
Usage:  ./mgc container-registry repositories [flags]  ./mgc container-registry repositories [command]
Product catalog:‚Äã

Commands:
delete      Delete a container registry repository by repository_name.
get         Get a container registry repository by repository_name
list        List all container registry repositories

Other commands:‚Äã

Flags:
-h, --help      help for repositories
-v, --version   version for repositories

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
List all user's repositories in the container registry.
Usage:‚Äã
Usage:  ./mgc container-registry repositories list [registry-id] [flags]
Product catalog:‚Äã

Flags:
--control.limit integer    Limit (min: 1)
--control.offset integer   Offset (min: 0)
--control.sort string      Fields to use as reference to sort. (pattern: (^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "created_at:desc")
-h, --help                     help for list
--registry-id uuid         Container Registry's UUID. (required)
-v, --version                  version for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Delete
Delete a repository by name.
Usage:‚Äã
Usage:  ./mgc container-registry repositories delete [registry-id] [repository-name] [flags]
Product catalog:‚Äã

Flags:
-h, --help                     help for delete
--registry-id uuid         Container Registry's UUID. (required)
--repository-name string   Repository's name. (required)
-v, --version                  version for delete

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Get
Return detailed repository's information filtered by name.
Usage:‚Äã
Usage:  ./mgc container-registry repositories get [registry-id] [repository-name] [flags]
Product catalog:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
-h, --help                          help for get
--registry-id uuid              Container Registry's UUID. (required)
--repository-name string        Repository's name. (required)
-v, --version                       version for get

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Dbaas
DBaaS API Product.
Usage:‚Äã
Usage:  ./mgc dbaas [flags]  ./mgc dbaas [command]
Product catalog:‚Äã

Aliases:
dbaas, database, db

Other commands:‚Äã

Commands:
backups     Database backups management.
datastores  Datastores available for database instances.
engines     Engines available for database instances.
flavors     Flavors available for database instances.
instances   Database instances management.
replicas    Database replicas management.

Flags:‚Äã
Flags:  -h, --help      help for dbaas  -v, --version   version for dbaas

---

Backups
Database backups management.
Usage:‚Äã
Usage:  ./mgc dbaas backups [flags]  ./mgc dbaas backups [command]
Product catalog:‚Äã

Commands:
delete      Delete Backup.
get         Backup Detail.
list        Backups List.

Other commands:‚Äã

Flags:
-h, --help      help for backups
-v, --version   version for backups

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Datastores
Datastores available for database instances.
Usage:‚Äã
Usage:  ./mgc dbaas datastores [flags]  ./mgc dbaas datastores [command]
Product catalog:‚Äã

Commands:
get         Datastore detail (Deprecated).
list        List available datastores (Deprecated).

Other commands:‚Äã

Flags:
-h, --help      help for datastores
-v, --version   version for datastores

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Deprecated: This endpoint is being phased out. Please use the /v1/engines endpoint to retrieve the list of available engines instead.
Usage:‚Äã
Returns a list of available datastores. It is recommended to update your integration to use the newer `/v1/engines` endpoint for improved functionality and future compatibility.
Product catalog:‚Äã

Usage:

./mgc dbaas datastores list [flags]
Other commands:‚Äã

Flags:
--control.limit integer    The maximum number of items per page. (range: 1 - 50) (default 10)
--control.offset integer   The number of items to skip before starting to collect the result set. (min: 0)
-h, --help                     help for list
--status enum              Value referring to engine status. (one of "ACTIVE" or "DEPRECATED")
-v, --version                  version for list

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Engines
Engines available for database instances.
Usage:‚Äã
Usage:  ./mgc dbaas engines [flags]  ./mgc dbaas engines [command]
Product catalog:‚Äã

Commands:
get         Engine detail.
list        List available engines.

Other commands:‚Äã

Flags:
-h, --help      help for engines
-v, --version   version for engines

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Get
Returns a engine detail.
Usage:‚Äã
Usage:  ./mgc dbaas engines get [engine-id] [flags]
Product catalog:‚Äã

Flags:
--engine-id uuid   Datastore Id (Deprecated): Value referring to datastore Id. (required)
-h, --help             help for get
-v, --version          version for get

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Flavors
Flavors available for database instances.
Usage:‚Äã
Usage:  ./mgc dbaas flavors [flags]  ./mgc dbaas flavors [command]
Product catalog:‚Äã

Commands:
get         Flavor detail.
list        List available flavors.

Other commands:‚Äã

Flags:
-h, --help      help for flavors
-v, --version   version for flavors

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Instances
Database instances management.
Usage:‚Äã
Usage:  ./mgc dbaas instances [flags]  ./mgc dbaas instances [command]
Product catalog:‚Äã

Commands:
backups     backups
create      Creates a new database instance.
delete      Deletes a database instance.
get         Database instance details.
list        List all database instances.
resize      Resizes a database instance.
restores    Backup restore.
start       Starts a database instance.
stop        Stops a database instance.
update      Database instance update.

Other commands:‚Äã

Flags:
-h, --help      help for instances
-v, --version   version for instances

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Creates a new database instance asynchronously for a tenant.
Usage:‚Äã
Usage:  ./mgc dbaas instances create [flags]
Product catalog:‚Äã

Examples:

./mgc dbaas instances create --volume.size=30
Other commands:‚Äã

Flags:
--backup-retention-days integer   Backup Retention Days: The number of days that a particular backup is kept until its deletion. (default 7)
--backup-start-at time            Backup Start At: Start time (UTC timezone) which is allowed to start the automated backup process. (default "04:00:00")
--cli.list-links enum[=table]     List all available links for this command (one of "json", "table" or "yaml")
--datastore-id uuid               Datastore Id (Deprecated): Deprecated: This property is being deprecated in favor of 'engine_id'. Please update your requests to use 'engine_id' for improved functionality and future compatibility.

--engine-id uuid                  Engine Id
--flavor-id uuid                  Flavor Id (required)
-h, --help                            help for create
--name string                     Name (max character count: 100) (required)
--parameters array(object)        Use --parameters=help for more details (default [])
--password string                 Password (max character count: 50) (required)
--user string                     User (max character count: 25) (required)
-v, --version                         version for create
--volume object                   Instance Volume Request (properties: size and type)
Use --volume=help for more details (required)
--volume.size integer             Instance Volume Request: The size of the volume (in GiB). (range: 10 - 50000)
This is the same as '--volume=size:integer'.
--volume.type enum                Instance Volume Request: The type of the volume. (one of "CLOUD_HDD", "CLOUD_NVME" or "CLOUD_NVME_15K")
This is the same as '--volume=type:enum'. (default "CLOUD_NVME_15K")

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text      --env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")      --region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")      --server-url uri         Manually specify the server to use

---

Backups
Database instances management. | backups
Usage:‚Äã
Usage:  ./mgc dbaas instances backups [flags]  ./mgc dbaas instances backups [command]
Product catalog:‚Äã

Commands:
create      Backup Create.
delete      Delete Backup.
get         Backup Detail.
list        Backups List.

Other commands:‚Äã

Flags:
-h, --help      help for backups
-v, --version   version for backups

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Creates a new backup asynchronously.
Usage:‚Äã
Usage:  ./mgc dbaas instances backups create [instance-id] [flags]
Product catalog:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--cli.watch                     Wait until the operation is completed by calling the 'get' link and waiting until termination. Akin to '! get -w'
-h, --help                          help for create
--instance-id uuid              Value referring to instance Id. (required)
--mode enum                     Backup Mode Request: An enumeration. (must be "FULL") (required)
-v, --version                       version for create

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Replicas
Database replicas management.
Usage:‚Äã
Usage:  ./mgc dbaas replicas [flags]  ./mgc dbaas replicas [command]
Product catalog:‚Äã

Commands:
create      Replica Create.
delete      Deletes a replica instance.
get         Replica Detail.
list        Replicas List.
resize      Replica Resize.
start       Replica Start.
stop        Replica Stop.

Other commands:‚Äã

Flags:
-h, --help      help for replicas
-v, --version   version for replicas

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Creates a new replica for an instance asynchronously.
Usage:‚Äã
Usage:  ./mgc dbaas replicas create [flags]
Product catalog:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--flavor-id uuid                Flavor Id
-h, --help                          help for create
--name string                   Name (max character count: 255) (required)
--source-id uuid                Source Id (required)
-v, --version                       version for create

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Start
Start an instance replica.
Usage:‚Äã
Usage:  ./mgc dbaas replicas start [replica-id] [flags]
Product catalog:‚Äã

Flags:
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
-h, --help                          help for start
--replica-id uuid               Value referring to replica Id. (required)
-v, --version                       version for start

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Http
HTTP access
Usage:‚Äã
Usage:  ./mgc http [flags]  ./mgc http [command]
Product catalog:‚Äã

Commands:
do          Execute generic http request
json        JSON HTTP access

Other commands:‚Äã

Flags:
-h, --help   help for http

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Do
Execute generic http request
Usage:‚Äã
Usage:  ./mgc http do [flags]
Product catalog:‚Äã

Flags:
--body string
--headers object           Use --headers=help for more details
-h, --help                     help for do
--method enum              (one of "DELETE", "GET", "HEAD", "OPTIONS", "PATCH", "POST", "PUT" or "TRACE") (required)
--security array(object)   Use --security=help for more details
--url string               Golang template with the URL (required)

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--region enum            Region to reach the service (one of "br-mgl-1", "br-ne-1" or "br-se-1") (default "br-ne-1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Json
JSON HTTP access
Usage:‚Äã
Usage:  ./mgc http json [flags]  ./mgc http json [command]
Product catalog:‚Äã

Commands:
delete      Call using HTTP DELETE
get         Call using HTTP GET
head        Call using HTTP HEAD
options     Call using HTTP OPTIONS
patch       Call using HTTP PATCH
post        Call using HTTP POST
put         Call using HTTP PUT
trace       Call using HTTP TRACE

Other commands:‚Äã

Flags:
-h, --help   help for json

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Kubernetes
APIs related to the Kubernetes product.
Usage:‚Äã
Usage:  ./mgc kubernetes [flags]  ./mgc kubernetes [command]
Product catalog:‚Äã

Aliases:
kubernetes, k8s, kube, kub

Other commands:‚Äã

Commands:
cluster     Endpoints related to the creation, listing, deletion, and retrieval of the kubeconfig for a Kubernetes cluster.
flavor      Endpoints related to listing available flavors for a Kubernetes cluster.
info        Endpoints related to listing available flavors (resource configurations) and Kubernetes versions for a Kubernetes cluster.
nodepool    Endpoints related to the creation, listing of nodepools and nodes, updating, and deletion of nodepools for a Kubernetes cluster.
version     Endpoints related to listing available Kubernetes versions for a Kubernetes cluster.

Flags:‚Äã
Flags:  -h, --help      help for kubernetes  -v, --version   version for kubernetes

---

Network
APIs referentes ao produto de VPC
Usage:‚Äã
Usage:  ./mgc network [flags]  ./mgc network [command]
Product catalog:‚Äã

Commands:
ports           VPC Port
public-ips      VPC Public IPs
rules           VPC Rules
security-groups VPC Security Groups
subnets         VPC Subnets
vpcs            Virtual Private Cloud (VPC)

Other commands:‚Äã

Flags:
-h, --help      help for network
-v, --version   version for network

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Object-storage
Create and manage Buckets and Objects via the Object Storage API
Usage:‚Äã
Usage:  ./mgc object-storage [flags]  ./mgc object-storage [command]
Product catalog:‚Äã

Aliases:
object-storage, object, objs

Other commands:‚Äã

Commands:
buckets     Bucket operations for Object Storage API
key-pair    Manage credentials to use Object Storage
objects     Object operations for Object Storage API

Flags:‚Äã
Flags:  -h, --help   help for object-storage

---

Buckets
Bucket operations for Object Storage API
Usage:‚Äã
Usage:  ./mgc object-storage buckets [flags]  ./mgc object-storage buckets [command]
Product catalog:‚Äã

Commands:
acl         ACL-related commands
create      Create a new Bucket
delete      Delete an existing Bucket
list        List all existing Buckets
public-url  Get bucket public url
versioning  Manage bucket versioning

Other commands:‚Äã

Flags:
-h, --help   help for buckets

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Create
Buckets are "containers" that are able to store various Objects inside
Usage:‚Äã
Usage:  ./mgc object-storage buckets create [bucket] [flags]
Product catalog:‚Äã

Flags:
--bucket string                 Name of the bucket to be created (required)
--cli.list-links enum[=table]   List all available links for this command (one of "json", "table" or "yaml")
--enable-versioning             Enable versioning for this bucket (default true)
--grant-write array(object)     Allows grantees to create objects in the bucket
Use --grant-write=help for more details
-h, --help                          help for create
--private                       Owner gets FULL_CONTROL. Delegated users have access. No one else has access rights
--public-read                   Owner gets FULL_CONTROL. Everyone else has READ rights

Other commands:‚Äã

Global Flags:
--chunk-size integer     Chunk size to consider when doing multipart requests. Specified in Mb (range: 8 - 5120) (default 8)
--cli.show-cli-globals   Show all CLI global flags on usage text
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use
--workers integer        Number of routines that spawn to do parallel operations within object_storage (min: 1) (default 5)

Flags:‚Äã


---

Acl
ACL-related commands
Usage:‚Äã
Usage:  ./mgc object-storage buckets acl [flags]  ./mgc object-storage buckets acl [command]
Product catalog:‚Äã

Commands:
get         Get the ACL for the specified bucket
set         set permission information for the specified bucket

Other commands:‚Äã

Flags:
-h, --help   help for acl

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Versioning
Manage bucket versioning
Usage:‚Äã
Usage:  ./mgc object-storage buckets versioning [flags]  ./mgc object-storage buckets versioning [command]
Product catalog:‚Äã

Commands:
enable      Enable versioning for a Bucket
get         Get versioning info for a Bucket
suspend     Suspend versioning for a Bucket

Other commands:‚Äã

Flags:
-h, --help   help for versioning

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Key-pair
Manage credentials to use Object Storage
Usage:‚Äã
Usage:  ./mgc object-storage key-pair [flags]  ./mgc object-storage key-pair [command]
Product catalog:‚Äã

Commands:
create      Create new credentials used for Object Storage requests
current     Get the current Object Storage credentials
get         Get details about a specific key
list        List valid Object Storage credentials
revoke      Revoke credentials used in Object Storage requests
set         Change current Object Storage credential to selected

Other commands:‚Äã

Additional Commands:
select      call "list", prompt selection and then "set"

Flags:‚Äã
Flags:  -h, --help   help for key-pair

---

Objects
Object operations for Object Storage API
Usage:‚Äã
Usage:  ./mgc object-storage objects [flags]  ./mgc object-storage objects [command]
Product catalog:‚Äã

Commands:
acl          ACL related operations
copy         Copy an object from a bucket to another bucket
copy-all     Copy all objects from a bucket to another bucket
delete       Delete an object from a bucket
delete-all   Delete all objects from a bucket
download     Download an object from a bucket
download-all Download all objects from a bucket
head         Get object metadata
list         List all objects from a bucket
move         Moves one object from source to destination
move-dir     Moves objects from source to destination
presign      Generate a pre-signed URL for accessing an object
public-url   Get object public url
sync         Synchronizes a local path with a bucket
upload       Upload a file to a bucket
upload-dir   Upload a directory to a bucket
versions     Retrieve all versions of an object

Other commands:‚Äã

Flags:
-h, --help   help for objects

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Profile
Profiles hold auth and runtime configuration for the MgcSDK, like tokens and log filter settings.
Users can create as many profiles as they choose to. Auth and config operations will affect only the
current profile, so users can alter and switch between profiles without loosing the previous configuration
Usage:‚Äã
Usage:  ./mgc profile [flags]  ./mgc profile [command]
Product catalog:‚Äã

Commands:
create      Creates a new profile
delete      Deletes the profile with the specified name
get         Get current profile.
list        List all available profiles
set         Sets profile to be used

Other commands:‚Äã

Additional Commands:
select      call "list", prompt selection and then "set"

Flags:‚Äã
Flags:  -h, --help   help for profile

---

Virtual-machine
Virtual Machine Api Product
Usage:‚Äã
Usage:  ./mgc virtual-machine [flags]  ./mgc virtual-machine [command]
Product catalog:‚Äã

Aliases:
virtual-machine, vms, vm, virtual-machines, machines, vmachine

Other commands:‚Äã

Commands:
images        Operations with images for instances.
instances     Operations with instances, including create, delete, start, stop, reboot and other actions.
machine-types Operations with machine types for instances.
snapshots     Operations with snapshots for instances.

Flags:‚Äã
Flags:  -h, --help      help for virtual-machine  -v, --version   version for virtual-machine

---

Images
Operations with images for instances.
Usage:‚Äã
Usage:  ./mgc virtual-machine images [flags]  ./mgc virtual-machine images [command]
Product catalog:‚Äã

Commands:
list        Retrieves all images available in the region.

Other commands:‚Äã

Flags:
-h, --help      help for images
-v, --version   version for images

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

List
Retrieve a list of images allowed for the current tenant which is logged in.
Usage:‚Äã
Usage:  ./mgc virtual-machine images list [flags]
Product catalog:‚Äã

Flags:
--control.limit integer     Limit (max: 2147483647) (default 50)
--control.offset integer    Offset (max: 2147483647)
--control.sort string       Sort (pattern: ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$) (default "platform:asc,end_life_at:desc")
-h, --help                     help for list
-v, --version                  version for list

Other commands:‚Äã

Global Flags:
--cli.show-cli-globals   Show all CLI global flags on usage text
--env enum               Environment to use (one of "pre-prod" or "prod") (default "prod")
--region enum            Region to reach the service (one of "br-mgl1", "br-ne1" or "br-se1") (default "br-se1")
--server-url uri         Manually specify the server to use

Flags:‚Äã


---

Instances
Operations with instances, including create, delete, start, stop, reboot and other actions.
Usage:‚Äã
Usage:  ./mgc virtual-machine instances [flags]  ./mgc virtual-machine instances [command]
Product catalog:‚Äã

Commands:
create      Create an instance asynchronously.
delete      Delete a instance asynchronously
get         Retrieve the details of an instance.
list        Lists all instances in the current tenant.
port        port
reboot      Reboot a running or suspended instance.
rename      Renames an instance.
retype      Changes a running or stopped instance machine type for another one.
start       Starts a running or suspended instance.
stop        Stops a running instance.
suspend     Suspends a running instance.

Other commands:‚Äã

Flags:
-h, --help      help for instances
-v, --version   version for instances

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Machine-types
Operations with machine types for instances.
Usage:‚Äã
Usage:  ./mgc virtual-machine machine-types [flags]  ./mgc virtual-machine machine-types [command]
Product catalog:‚Äã

Commands:
list        Retrieves all machine-types available in the region.

Other commands:‚Äã

Flags:
-h, --help      help for machine-types
-v, --version   version for machine-types

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Snapshots
Operations with snapshots for instances.
Usage:‚Äã
Usage:  ./mgc virtual-machine snapshots [flags]  ./mgc virtual-machine snapshots [command]
Product catalog:‚Äã

Commands:
create      Create a snapshot of a virtual machine asynchronously.
delete      Delete a Snapshot asynchronously
get         Retrieve the details of an snapshot.
list        Lists all snapshots in the current tenant.
rename      Renames a snapshot
restore     Restore a snapshot to a virtual machine

Other commands:‚Äã

Flags:
-h, --help      help for snapshots
-v, --version   version for snapshots

Flags:‚Äã
Global Flags:      --cli.show-cli-globals   Show all CLI global flags on usage text

---

Vis√£o geral
As API Keys s√£o essenciais para autenticar na Magalu Cloud, elas s√£o vers√°teis e podem ser usadas em v√°rias plataformas:

Interface de Linha de Comando (CLI)
Kit de Desenvolvimento de Software (SDK)
Terraform
Solicita√ß√µes diretas de API

Componentes de uma Chave de API‚Äã
Uma chave de API consiste em tr√™s partes:

API Key: Usada para autentica√ß√£o com a API Magalu, CLI, SDK e Terraform.
Key Pair ID: Parte do processo de autentica√ß√£o para Objetos Magalu.
Key Pair Secret: Funciona em conjunto com o ID do Par de Chaves para autentica√ß√£o de Objetos Magalu.

Uso‚Äã

A API Key autentica solicita√ß√µes √† API principal do Magalu e ferramentas associadas (CLI, SDK, Terraform).
O  Key Pair ID e Key Pair Secret juntos autenticam solicita√ß√µes especificamente para Object Storage da Magalu.

Ao usar esses componentes adequadamente, voc√™ pode interagir de forma segura com v√°rios servi√ßos e recursos do Magalu.

---

Criar API Keys

üñ•Ô∏è ConsoleCLI MGCüë£ Inicio > Object Storage > API Key > Criar API Key
Na p√°gina de Produto de Object Storage
Clique na aba ‚ÄúAPI Keys‚Äù
Clique em ‚Äú+ Criar API Key‚Äú
Insira um nome e validades para a chave
Clique em ‚ÄúCriar API Key‚Äù
infoAo configurar a API Key com fim de validade, ao expirar o per√≠odo a chave ser√° revogada, deixando a chave inv√°lida para a autentica√ß√£o de qualquer requisi√ß√£o. Chaves revogadas n√£o poder√£o ser ativadas ou deletadas.warningAPI Key dar√° acesso total a Object Storage, permitindo que todas as a√ß√µes dispon√≠veis possam ser executadaswarningCaso queira criar sua Api Key com permiss√µes personalizadas, siga o procedimento abaixo:
Acesse o ID Magalu (lembre-se de estar autenticado com a conta que possui os acessos necess√°rios.)
Clique em Criar API Key
Defina um nome para a API Key
Selecione o per√≠odo de expira√ß√£o
Selecione Object Storage
Selecione as permiss√µes que deseja liberar com sua Key (apenas ler / apenas criar / ambos)

Aqui est√° sua API Key

Ap√≥s realizar a autentica√ß√£o crie uma nova api-key, executando o comando abaixo alterando o campo <api-key-name> :mgc object-storage api-key create <api-key-name>Ap√≥s rodar o comando anterior, retornara um UUID, voc√™ pode usar no seguinte comando para definir as chaves que usar√°:mgc object-storage api-key set <api-key-uuid>

---

Consultar API Keys

üñ•Ô∏è ConsoleCLI MGCüë£ Inicio > Object Storage > API Key
Na p√°gina de Produto de Object Storage
Clique na aba ‚ÄúAPI Keys‚Äù
Para consultar as API Keys via CLI execute o comandomgc object-storage api-key list

---

Como criar API Key

üñ•Ô∏è Console>_ CLIComo criar‚ÄãwarningMantenha sua API Key em sigilo para evitar acessos n√£o autorizados.A autentica√ß√£o com API Key √© ideal para quando voc√™ n√£o tem a CLI instalada. Siga estas etapas simples para se autenticar:
Acesse o ID Magalu (lembre-se de estar autenticado com a conta que possui os acessos necess√°rios.)
Clique em Criar API Key
Defina um nome para a API Key
Selecione o per√≠odo de expira√ß√£o
Selecione as aplica√ß√µes da Magalu Cloud que deseja dar permiss√£o

Copie a API Key

Para criar API Keys pela CLI, siga os seguintes passos:
Execute o comando:
mgc auth api-key create --name="api-key-name"
Em seguida √© poss√≠vel selecionar quais escopos a API Key ter√° acesso, selecione apertando enter nos scopes desejados.

Para finalizar, basta clicar tab, e a API Key ser√° criada, o retorno ser√° parecido com este:
Select scopes:   > Virtual Machine [Read]uuid: f4b2345c-fue1-4176-a525-fasdfaaa
Como o retorno s√≥ traz o UUID, √© necess√°rio consultar para obter a API Key:
mgc auth api-key get f4b2345c-fue1-4176-a525-fasdfaaaPronto, sua API Key ser√° retornada e j√° poder√° ser utilizada.

---

Autentica√ß√£o nas APIs
Para se autenticar nas APIs da Magalu Cloud voc√™ precisar√° criar API Keys com os escopos que deseja dar acesso.
Para se autenticar nas APIs basta passar a API Key no header x-api-keynas requisi√ß√µes.
Exemplo:
curl --location 'https://api.magalu.cloud/br-ne-1/compute/v1/instances' \--header 'x-api-key: YOUR_API_KEY' \--header 'Accept: application/json'

---

Pagina√ß√£o e Ordena√ß√£o
Pagina√ß√£o‚Äã
Par√¢metroDescri√ß√£oValor Padr√£oExemplo_limitDetermina a quantidade de registros a serem retornados50GET /v1/intances?_limit=50_offsetPosi√ß√£o do registro de refer√™ncia, a partir dele ser√£o retornados os pr√≥ximos N registros0GET /v1/intances?_offset=0
Ordena√ß√£o‚Äã
OrdemPar√¢metroExemplo?_sort=campo:ascOrdena de forma AscendenteGET /v1/intances?_sort=shipping.date:asc?_sort=campo:descOrdena de forma DescendenteGET /v1/intances?_sort=shipping.date:desc

---

Tenant ID
O Tenant ID √© o idenficador da conta. Nas APIs ele tem o nome de x-tenant-id.
Para saber seu tenant ID basta utilizar o seguinte comando na CLI:
mgc auth tenant current
No retorno haver√° o campo uuid
uuid: afd0199e-0ff10-4a10-at80-4134131
Utilize este valor no x-tenant-id.

---

Virtual Machines

instancesgetList all instances.postCreate an instance.postAttach network interface to an instance.postDetach a non primary network interface from an instance.delDelete an instance.getRetrieve the details of a specific instance.postReboot an instance.patchRenames an instance.postChanges an instance machine-type.postStarts an instance.postStops an instance.postSuspends instance.imagesgetRetrieves all images.machine-typesgetRetrieves all machine-types.snapshotsgetLists all snapshots.postCreate a snapshot of an instance.delDelete a Snapshot.getRetrieve the details of an snapshot.postRestore a snapshot to an instance.patchRenames a snapshot.backupsgetLists all backups in the current tenant.postCreate a backup of a virtual machine asynchronously.delDelete a backup of a virtual machine asynchronously.getRetrieve the details of a backup.postCopy a backup of a virtual machine asynchronously.patchRenames a backuppostRestore a backup to a virtual machineAPI docs by RedoclyVirtual Machine Api Product - v1 (v1)Virtual Machine Api Product
instancesOperations with instances, including create, delete, start, stop, reboot and other actions.
List all instances. List Virtual Machine instances in the current tenant which is logged in.
Notes

You can use the extend argument to get more details from the inner objects
like image or type.

query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
expandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type', 'machine-types', 'network'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
get/v1/instancesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instancesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"instances": [{"availability_zone": "br-regiao-1a","created_at": "2022-06-10T18:33:12Z","error": {"message": "An error occurred while creating your instance. Please contact our support for assistance.","slug": "create_instance.keypair.not_found"},"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","image": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"name": "instance name","network": {"ports": [{"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}]},"ssh_key_name": "keypair_name_here","state": "running","status": "completed","updated_at": "2022-06-11T18:33:12Z","user_data": "base64_data"}]}Create an instance. Creates a Virtual Machine instance in the current tenant which is logged in.
An instance is ready for you to use when it's in the running state.
Notes

For the image data, you can use the virtual-machine images list command
  to list all available images.
For the machine type data, you can use the virtual-machine machine-types
  list command to list all available machine types.
You can verify the state of your instance using the virtual-machine get
command.

Rules

If you don't specify a VPC, the default VPC will be used. When the
default VPC is not available, the command will fail.
If you don't specify an network interface, an default network interface
will be created.
You can either specify an image id or an image name. If you specify
both, the image id will be used.
You can either specify a machine type id or a machine type name. If
you specify both, the machine type id will be used.
You can either specify an VPC id or an VPC name. If you specify both,
the VPC id will be used.
The user data must be a Base64 encoded string.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  machine_typerequiredID (object) or Name (object) (Machine Type)  ssh_key_namerequiredstring (Ssh key Name)   >= 0 characters  imagerequiredID (object) or Name (object) (Image)  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  networkInstanceCreateRequestV1NetworkDefault (object) or null Default:  {"vpc":{"name":"default"},"associate_public_ip":true} user_dataUsed to perform automated configuration tasks. (string) or Used to perform automated configuration tasks. (null) (Used to perform automated configuration tasks.)  Responses201 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instancesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instancesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","image": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"name": "instance name","network": {"associate_public_ip": true,"interface": {"security_groups": [{"id": "f273fbde-2ddf-4dcd-8c41-342671ac0d17"},{"id": "02a2acf3-d6db-4424-ac97-0254cb9c329e"}]},"vpc": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}},"ssh_key_name": "keypair_name_here","user_data": "some_base64_script"} Response samples 201400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Attach network interface to an instance. Attach network interface to an instance for a default project.
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredinstancerequiredID (object) or Name (object) (Instance)  networkrequiredobject (NICRequestInterfaceField)  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instances/network-interface/attachServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/network-interface/attachServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/network-interface/attach Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "c47e974f-8002-46e9-8a63-d66505be2aa1"},"network": {"interface": {"id": "31dcb3ea-9320-4122-8fea-3a3b06114ca1"}}} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Detach a non primary network interface from an instance. Detach a non primary network interface from an instance for a default project
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredinstancerequiredID (object) or Name (object) (Instance)  networkrequiredobject (NICRequestInterfaceField)  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instances/network-interface/detachServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/network-interface/detachServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/network-interface/detach Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "c47e974f-8002-46e9-8a63-d66505be2aa1"},"network": {"interface": {"id": "31dcb3ea-9320-4122-8fea-3a3b06114ca1"}}} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Delete an instance. Deletes permanently an instance with the id provided in the current tenant
which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so
you can get the id of the instance that you want to delete.

Result

The attached ports will be deleted as well.
The attached volumes will be detached.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
query Parametersdelete_public_ipboolean (Delete Public Ip)  Default:  false Flag default value false.
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
delete/v1/instances/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Retrieve the details of a specific instance. Get an instance details for the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances,
so you can get the id of the instance that you want to get details.

You can use the expand argument to get more details from the inner objects
like image or type.


path Parametersidrequiredstring (Id)  Instance id - for help use ./mgc virtual-machines instances list .
query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type', 'machine-types', 'network'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
get/v1/instances/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id} Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","created_at": "2022-06-10T18:33:12Z","error": {"message": "An error occurred while creating your instance. Please contact our support for assistance.","slug": "create_instance.keypair.not_found"},"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","image": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"},"name": "instance name","network": {"ports": [{"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}]},"ssh_key_name": "keypair_name_here","state": "running","status": "completed","updated_at": "2022-06-11T18:33:12Z","user_data": "some_base_64_str"}Reboot an instance. Reboots a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id
of the instance that you want to reboot.

Rules

The instance must be in the running or suspend state.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/rebootServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/rebootServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/reboot Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Renames an instance. Renames a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id of
the instance that you want to rename.

path Parametersidrequiredstring (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  New name
Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
patch/v1/instances/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "new instance name"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Changes an instance machine-type. Changes a Virtual Machine instance machine type with the id provided in the current tenant
which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get
the id of the instance that you want to change the machine type.

Rules

The instance must be in the running or stopped state.
The new machine type must be compatible with the current machine type.
The new machine type must be available in the same region as the current machine type.
You must provide either the machine type id or the machine type name, if you provide both,
the machine type id will be used.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredmachine_typerequiredID (object) or Name (object) (Machine Type)   Any of IDNameidrequiredstring (Id)   [ 1 .. 255 ] characters  Responses204 Successful Response
400 Instance Not Allowed Exception
404 Instance Not Found Exception
409 Instance Validation Exception
422 Validation Error
500 Internal Exception
post/v1/instances/{id}/retypeServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/retypeServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/retype Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"machine_type": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Starts an instance. Starts a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances,
so you can get the id of the instance that you want to start.

Rules

The instance must be in the stopped or suspended states.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/startServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/startServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/start Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Stops an instance. Stops a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id of
the instance that you want to stop.

Rules

The instance must be in the running state.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/stopServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/stopServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/stop Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Suspends instance. Suspends a Virtual Machine instance with the id provided in the current tenant which is logged in.
Notes

You can use the virtual-machine list command to retrieve all instances, so you can get the id of
the instance that you want to suspend.

Rules

The instance must be in the running state.

path Parametersidrequiredstring <uuid>  (Id)  Instance id - for help use ./mgc virtual-machines instances list .
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
422 Validation Error
post/v1/instances/{id}/suspendServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/instances/{id}/suspendServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/instances/{id}/suspend Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}imagesOperations with images for instances.
Retrieves all images. Retrieve a list of images allowed for the current region.
query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 _offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "platform:asc,end_life_at:desc" Responses200 Successful Response
422 Validation Error
get/v1/imagesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/imagesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/images Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"images": [{"end_life_at": "2022-06-10T18:33:12Z","end_standard_support_at": "2022-06-10T18:33:12Z","id": "c47e974f-8002-46e9-8a63-d66505be2aa1","minimum_requirements": {"disk": 2,"ram": 1,"vcpu": 1},"name": "ubuntu 22.10","platform": "linux","release_at": "2022-06-10T18:33:12Z","status": "active","version": "22.10"}]}machine-typesOperations with machine types for instances.
Retrieves all machine-types. Retrieves a list of machine types allowed for the current tenant which is logged in.
query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
Responses200 Successful Response
422 Validation Error
get/v1/machine-typesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/machine-typesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/machine-types Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"machine_types": [{"disk": 10,"gpu": 1,"id": "3a4dc05b-eb10-42ec-8c0c-848e06f7aded","name": "abc.small","ram": 2,"sku": "some_sku","status": "active","vcpus": 2}]}snapshotsOperations with snapshots for instances.
Lists all snapshots. List all snapshots in the current tenant which is logged in.
Notes

You can use the expand argument to get more details from the inner objects
like image and machine types.

query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
expandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
get/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"snapshots": [{"created_at": "2022-06-10T18:33:12Z","id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","image": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"}},"name": "snapshot name","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}]}Create a snapshot of an instance. Create a snapshot of a Virtual Machine in the current tenant which is logged in. 
A Snapshot is ready for restore when it's in available state.
Notes

You can verify the state of snapshot using the snapshot get command,
To create a snapshot it's mandatory inform a valid and unique name.

Rules

It's only possible to create a snapshot of a valid virtual machine.
It's not possible to create 2 snapshots with the same name.
You can inform ID or Name from a Virtual Machine if both informed the priority will be ID.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  instancerequiredID (object) or Name (object) (Instance)  Responses202 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
post/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "snapshot name"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Delete a Snapshot. Deletes an snapshot with the id provided in the current tenant
which is logged in.
Notes

You can use the Snapshots list command to retrieve all snapshots, so
you can get the id of the snapshot that you want to delete.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
delete/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Retrieve the details of an snapshot. Get an snapshot details for the current tenant which is logged in.
Notes

You can use the snapshots list command to retrieve all snapshots,
so you can get the id of the snapshot that you want to get details.

You can use the expand argument to get more details from the inner objects
like image or type.


path Parametersidrequiredstring (Id)  query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['image', 'machine-type'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
get/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id} Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-06-10T18:33:12Z","id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a","image": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"}},"name": "snapshot name","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}Restore a snapshot to an instance. Restore a snapshot of an instance with the current tenant which is logged in. 
Notes

You can check the snapshot state using snapshot list command.
Use "machine-types list" to see all machine types available.

Rules

A Snapshot is ready to restore when it's in available state.
To restore a snapshot you have to inform the new instance settings.
You must choose a machine-type that has a disk equal or larger
than the original instance.

path Parametersidrequiredstring (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  machine_typerequiredID (object) or Name (object) (Machine Type)  ssh_key_namerequiredstring (Ssh Key Name)   >= 0 characters  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  networkInstanceCreateRequestV1NetworkDefault (object) or null Default:  {"vpc":{"name":"default"},"associate_public_ip":true} user_dataUser Data (string) or User Data (null) (User Data)  Responses202 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
post/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id} Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "instance name","network": {"associate_public_ip": true,"interface": {"security_groups": [{"id": "f273fbde-2ddf-4dcd-8c41-342671ac0d17"},{"id": "02a2acf3-d6db-4424-ac97-0254cb9c329e"}]},"vpc": {"id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6"}},"ssh_key_name": "keypair_name_here","user_data": "some_base64_script"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Renames a snapshot. Renames a Snapshot with the id provided in the current tenant which is logged in.
Notes

You can use the snapshots list command to retrieve all snapshots, so you can get the id of
the snapshot that you want to rename.

path Parametersidrequiredstring (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  Responses204 Successful Response
400 Snapshot Not Allowed Exception
404 Instance Not Found Exception
409 Snapshot Validation Exception
422 Validation Error
500 Internal Exception
patch/v1/snapshots/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/snapshots/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/snapshots/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "new snapshot name"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}backupsLists all backups in the current tenant. List Virtual Machine backups in the current tenant which is logged in.
Notes

You can use the extend argument to get more details from the inner objects
like image or type.

query Parameters_limitinteger ( Limit)   <= 2147483647  Default:  50 limit the number of the results
_offsetinteger ( Offset)   [ 0 .. 2147483647 ]  Default:  0 pagination for the results limited
_sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" order of the results using informed fields
expandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['instance'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
get/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"backups": [{"backup_type": "daily","created_at": "2022-06-10T18:33:12Z","id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"min_disk": 10,"name": "backup name ffff","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}]}Create a backup of a virtual machine asynchronously. Create a backup of a Virtual Machine with the current tenant which is logged in.
A Backup is ready for restore when it's in completed status.
Rules

It's possible to create a maximum of 100 backups per virtual machine.
In case quota reached, choose a backup to remove.
You can inform ID or Name from a Virtual Machine if both informed the priority will be ID.
It's only possible to create a backup of a valid virtual machine.
Each backup must have a unique name. It's not possible to create backups with the same name.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  instancerequiredID (object) or Name (object) (Instance)  Responses202 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
post/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "backup name"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}Delete a backup of a virtual machine asynchronously. delete a backup from instance
path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
delete/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Retrieve the details of a backup. Get a backup details for the current tenant which is logged in.
Notes

You can use the backup list command to retrieve all backups,
so you can get the id of the backup that you want to get details.

You can use the expand argument to get more details from the object
like instance.


path Parametersidrequiredstring (Id)  query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['instance'] 
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
get/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id} Response samples 200400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"backup_type": "daily","created_at": "2022-06-10T18:33:12Z","id": "2ae0b896-855c-456c-b4a5-c8f4e6d2f4f6","instance": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"min_disk": 10,"name": "backup name","size": 1000,"state": "available","status": "completed","updated_at": "2022-06-11T18:33:12Z"}Copy a backup of a virtual machine asynchronously. Copy a backup region
path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredregionrequiredstring (Regions)  Enum: "br-se1" "br-se-1" "br-ne-1"  Responses204 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
post/v1/backups/{id}/copyServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}/copyServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id}/copy Request samples PayloadContent typeapplication/jsonCopy{"region": "br-ne-1"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Renames a backup Renames a backup with the id provided in the current tenant which is logged in.
Rules

You can use the backup list command to retrieve all backups, so you can get the id of
the backup that you want to rename.
A Backup can only renamed when it's in completed status.
Each backup must have a unique name.

path Parametersidrequiredstring (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  Responses204 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
patch/v1/backups/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "new backup name"} Response samples 400404409422500Content typeapplication/jsonCopy Expand all  Collapse all {"slug": "string","message": "string","details": { }}Restore a backup to a virtual machine Restore a backup of a Virtual Machine with the current tenant which is logged in. 
A Backup is ready for restore when it's in completed status.
Notes

You can verify the status of backup using the backup list command.
Use machine-types list to see all machine types available.

Rules

To restore a backup you have to inform the new virtual machine information.
You can choose a machine-type that has a disk equal or larger
than the minimum disk of the backup.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 1 .. 255 ] characters  machine_typerequiredID (object) or Name (object) (Machine Type)  ssh_key_namerequiredstring (Ssh Key Name)  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  networkrequiredobject (InstanceCreateRequestV1NetworkDefault)  user_dataUser Data (string) or User Data (null) (User Data)  Responses202 Successful Response
400 Backup Not Allowed Exception
404 Instance Not Found Exception
409 Backup Validation Exception
422 Validation Error
500 Internal Exception
post/v1/backups/{id}/restoreServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/compute/v1/backups/{id}/restoreServer for br-se-1 region
https://api.magalu.cloud/br-se-1/compute/v1/backups/{id}/restore Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-regiao-1a","machine_type": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"},"name": "instance name","network": {"associate_public_ip": true,"interface": {"security_groups": [{"id": "f273fbde-2ddf-4dcd-8c41-342671ac0d17"},{"id": "02a2acf3-d6db-4424-ac97-0254cb9c329e"}]},"vpc": {"id": "4830bfbe-0362-4ebb-a8ba-f36be4b4bc6a"}},"ssh_key_name": "keypair_name_here","user_data": "some_base64_script"} Response samples 202400404409422500Content typeapplication/jsonCopy{"id": "9ec75090-2872-4f51-8111-53d05d96d2c6"}

---

Auditoria

eventsgetLists all events.event-typesgetLists all event types.API docs by RedoclyCloud Events Consult API (v1)Cloud Events API Product.
eventsEndpoints related to listing events emitted by other products.
Lists all events. Lists all events emitted by other products.
Authorizations:OAuth2query Parameters_limitinteger (Limit)   [ 0 .. 2147483647 ]  Default:  50 Number of items per page
_offsetinteger (Offset)   [ 0 .. 2147483647 ]  Default:  0 Offset for pagination
idID (string) (ID)  Identification of the event
source__likeSource (string) (Source)  Context in which the event occurred ('like' operation)
timeTime (string) (Time)  Timestamp of when the occurrence happened
type__likeType (string) (Type)  Type of event related to the originating occurrence ('like' operation)
product__likeProduct (string) (Product)  In which producer product an event occurred ('like' operation)
authidAuth ID (string) (Auth ID)  Identification of the principal that triggered the occurrence
dataobject (Raw Data)  Default:  ""  Example:  data.tenant_id=00000000-0000-0000-0000-000000000000&data.machine_type.name=cloud-bs1.xsmallThe raw data event
header ParametersX-Tenant-IDany (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
500 Internal Server Error
get/v0/eventsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/audit/v0/eventsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/audit/v0/eventsServer for br-se1 region
https://api.magalu.cloud/br-se1/audit/v0/events Response samples 200422500Content typeapplication/jsonCopy Expand all  Collapse all {"meta": {"limit": 0,"offset": 0,"count": 0,"total": 0},"results": [{"id": "00000000-00000000-00000000-00000000","source": "https://api.com/v1/instances/00000000-00000000-00000000-00000000","type": "cloud.magalu.compute.instance.create","specversion": "1.0","subject": "instance/00000000-00000000-00000000-00000000","time": "2024-07-16T22:50:00","authid": "00000000-00000000-00000000-00000000","authtype": "tenant","product": "default","region": "string","tenantid": "00000000-00000000-00000000-00000000","data": { }}]}event-typesEndpoints related to listing types of events emitted by other products.
Lists all event types. Lists all types of events emitted by other products.
Authorizations:OAuth2query Parameters_limitinteger (Limit)   [ 0 .. 2147483647 ]  Default:  50 Number of items per page
_offsetinteger (Offset)   [ 0 .. 2147483647 ]  Default:  0 Offset for pagination
header ParametersX-Tenant-IDany (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
500 Internal Server Error
get/v0/event-typesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/audit/v0/event-typesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/audit/v0/event-typesServer for br-se1 region
https://api.magalu.cloud/br-se1/audit/v0/event-types Response samples 200422500Content typeapplication/jsonCopy Expand all  Collapse all {"meta": {"limit": 0,"offset": 0,"count": 0,"total": 0},"results": [{"type": "string"}]}

---

Network

portsgetDetails of a Port listdelDelete PortgetPort DetailspostAttach Security GrouppostDetach Security Grouppublic_ipsgetTenant's public IP listdelDelete Public IPgetPublic IP DetailspostAttach Public IPpostDetach Public IPrulesdelDelete a RulegetRule Detailssecurity_groupsgetList Security Groups by TenantpostCreate Security GroupdelDelete a security groupgetSecurity Group DetailsgetList RulespostCreate RulesubnetpoolsgetList Subnet Pools by TenantpostCreate a Subnet Pool in a tenantdelDelete Subnet Pool by IDgetGet Subnet Pool by IDpostBook SubnetpoolpostUnbook SubnetpoolsubnetsdelDelete a SubnetgetSubnet DetailspatchUpdate SubnetvpcspostV1 Create VPCgetList VPCpostCreate VPCdelDelete VPCgetVPC DetailsgetList PortspostCreate PortgetList Public IPspostCreate Public IPgetList Security GroupspostCreate Security GroupgetList SubnetspostCreate SubnetpostV1 Create VPCAPI docs by RedoclyVPC API Product (1.137.1) URL: https://github.com/luizalabs  VPC Api Product
portsOperations related to Ports
Details of a Port list Return a detailed list of ports from the provided tenant_id
Authorizations:OAuth2query Parametersport_id_listArray of any (Port Id List)  Default:  "" header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/portsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/portsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all [{"created_at": "2022-01-01 00:00:00","description": "port description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_address": [{"ip_address": "172.20.0.2","subnet_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"is_admin_state_up": true,"is_port_security_enabled": true,"name": "port_name","public_ip": [{"public_ip": "100.94.5.31","public_ip_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]Delete Port Delete a port from the provided tenant_id
Authorizations:OAuth2path Parametersport_idrequiredany (port_id)  ID of the Port to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/ports/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Port Details Return a port details from the provided tenant_id
Authorizations:OAuth2path Parametersport_idrequiredany (Port Id)  header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/ports/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01 00:00:00","description": "port description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_address": [{"ip_address": "172.20.0.2","subnet_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"is_admin_state_up": true,"is_port_security_enabled": true,"name": "port_name","public_ip": [{"public_ip": "100.94.5.31","public_ip_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}],"security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Attach Security Group Attach a Security Group to a Port with provided port_id, security_group_id, x-tenant-id of an specific project type
Authorizations:OAuth2path Parametersport_idrequiredany (port_id)  ID of the Port to attach security group
security_group_idrequiredany (security_group_id)  ID of the Security Group to attach
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/ports/{port_id}/attach/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}/attach/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id}/attach/{security_group_id} Response samples 200422Content typeapplication/jsonCopynullDetach Security Group Detach a Security Group to a Port with provided port_id, security_group_id, x-tenant-id of an specific project type
Authorizations:OAuth2path Parametersport_idrequiredany (port_id)  ID of the Port to detach security group
security_group_idrequiredany (security_group_id)  ID of the Security Group to detach
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/ports/{port_id}/detach/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/ports/{port_id}/detach/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/ports/{port_id}/detach/{security_group_id} Response samples 200422Content typeapplication/jsonCopynullpublic_ipsOperations related to Public IPs
Tenant's public IP list Return a tenant's public ip list
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/public_ipsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ipsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"public_ips": [{"created_at": "2022-01-01 00:00:00","description": "port description","error": "error","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","public_ip": "100.94.5.31","status": "created","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Delete Public IP Delete a Public IP from the provided tenant_id
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/public_ips/{public_ip_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Public IP Details Return a Public IP details
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to retrieve
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/public_ips/{public_ip_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id} Response samples 200422Content typeapplication/jsonCopy{"created_at": "2022-01-01 00:00:00","description": "port description","error": "error","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_ip": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","public_ip": "100.94.5.31","status": "created","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Attach Public IP Attach a Public IP to a Port
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to attach port to
port_idrequiredany (Port ID)  Id of the Port to attach the Public IP
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/public_ips/{public_ip_id}/attach/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}/attach/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id}/attach/{port_id} Response samples 200422Content typeapplication/jsonCopynullDetach Public IP Detach a Public IP to a Port
Authorizations:OAuth2path Parameterspublic_ip_idrequiredany (Public IP ID)  Id of the Public IP to detach port to
port_idrequiredany (Port ID)  Id of the Port to detach the Public IP
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
post/v0/public_ips/{public_ip_id}/detach/{port_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/public_ips/{public_ip_id}/detach/{port_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/public_ips/{public_ip_id}/detach/{port_id} Response samples 200422Content typeapplication/jsonCopynullrulesOperations related to Rules
Delete a Rule Delete a rule from the provided tenant_id
Authorizations:OAuth2path Parametersrule_idrequiredany (Rule ID)  Id of the Rule
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/rules/{rule_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/rules/{rule_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/rules/{rule_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Rule Details Return a rule details
Authorizations:OAuth2path Parametersrule_idrequiredany (Rule ID)  Id of the Rule
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/rules/{rule_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/rules/{rule_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/rules/{rule_id} Response samples 200422Content typeapplication/jsonCopy{"created_at": "2022-01-01 00:00:00","description": "Some rule description","direction": "egress","ethertype": "IPv4","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24","security_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "created"}security_groupsOperations related to Security Groups
List Security Groups by Tenant Returns a list of security groups for a provided tenant_id
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"security_groups": [{"created_at": "2022-01-01 00:00:00","description": "security group description","error": "null","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "security_group_name","project_type": "default","status": "created","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create Security Group Create a Security Group
Authorizations:OAuth2query Parametersvalidate_quotaboolean (validateQuota)  Default:  true Validate the quota before creating Security Group
waitboolean (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutinteger (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
skip_default_rulesboolean (Skip Default Rules)  Default:  false Skip creation of default security group rules
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  Default:  "" namerequiredName (string) or Name (any) (Name)  Responses200 Successful Response
422 Validation Error
post/v0/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups Request samples PayloadContent typeapplication/jsonCopy{"description": "security group description","name": "security_group_name"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete a security group Delete a security group from the provided tenant_id
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the security group to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/security_groups/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Security Group Details Return a security group details
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the security group to detail
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/security_groups/{security_group_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01 00:00:00","description": "security group description","error": "null","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "security_group_name","project_type": "default","rules": [{"created_at": "2022-01-01 00:00:00","direction": "egress","error": "null","ethertype": "IPv4","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24","security_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "created"}],"status": "created","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Rules Returns a list of rules for a provided security_group_id
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the Security Group
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/security_groups/{security_group_id}/rulesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}/rulesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id}/rules Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"rules": [{"created_at": "2022-01-01 00:00:00","direction": "egress","ethertype": "IPv4","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24","security_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "created"}]}Create Rule Create a Rule async, returning its ID. To monitor the creation progress, please check the status in the service message or implement polling.Either a remote_ip_prefix or a remote_group_id can be specified.With remote_ip_prefix, all IPs that match the criteria will be allowed.With remote_group_id, only the specified security group is allowed to communicatefollowing the specified protocol, direction and port_range_min/max
Authorizations:OAuth2path Parameterssecurity_group_idrequiredany (Security Group ID)  Id of the Security Group
query Parametersvalidate_quotaboolean (validateQuota)  Default:  true Validate the quota before creating Rule
waitwait (boolean) or wait (any) (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutwaitTimeout (integer) or waitTimeout (any) (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  directionDirection (string) or Direction (any) (Direction)  ethertyperequiredstring (Ethertype)  port_range_maxPort Range Max (integer) or Port Range Max (any) (Port Range Max)  port_range_minPort Range Min (integer) or Port Range Min (any) (Port Range Min)  protocolProtocol (string) or Protocol (any) (Protocol)  remote_group_idRemote Group Id (string) or Remote Group Id (any) (Remote Group Id)  remote_ip_prefixRemote Ip Prefix (string) or Remote Ip Prefix (any) (Remote Ip Prefix)  Responses200 Successful Response
422 Validation Error
post/v0/security_groups/{security_group_id}/rulesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/security_groups/{security_group_id}/rulesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/security_groups/{security_group_id}/rules Request samples PayloadContent typeapplication/jsonCopy{"description": "Some rule description","direction": "egress","ethertype": "IPv4","port_range_max": 8028,"port_range_min": 8028,"protocol": "tcp","remote_group_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","remote_ip_prefix": "100.94.0.0/24"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}subnetpoolsOperations related to Subnet Pools
List Subnet Pools by Tenant Returns a list of Subnet Pools for the current tenant's project
Authorizations:OAuth2query Parameters_offsetinteger (Items Offset)   >= 0  Default:  0 Start item for pagination
_limitinteger (Pagination)   >= 1  Default:  20 Number of items per page
_sortstring ( Sort)  Default:  "created_at:desc"  Examples: _sort=created_at:asc - created_at:asc_sort=created_at:desc - created_at:descName of the field wich the list must be ordered by ending with :asc or :desc
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/subnetpoolsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpoolsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"meta": {"links": {"next": "?_offset=30&_limit=10","previous": "?_offset=10&_limit=10","self": "?_offset=30&_limit=10"},"page": {"count": 10,"limit": 10,"offset": 20,"total": 112}},"results": [{"cidr": "172.20.0.0/16","description": "subnet pool description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "subnet_pool_name","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create a Subnet Pool in a tenant Create a Subnet Pool
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequiredcidrstring (Cidr)  Default:  "172.26.0.0/16" The CIDR notation for the subnet pool.
descriptionrequiredstring (Description)  The description for the subnet pool
namerequiredstring (Name)  The name of the subnet pool.
typestring (Type) ^(pip|default)$ Default:  "default" The type of subnetpool, pip or default.
Responses201 Successful Response
422 Validation Error
post/v0/subnetpoolsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpoolsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools Request samples PayloadContent typeapplication/jsonCopy{"cidr": "172.26.0.0/16","description": "some description","name": "some_subnet_pool"} Response samples 201422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete Subnet Pool by ID Delete one Subnet Pool by ID
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/subnetpools/{subnetpool_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Get Subnet Pool by ID Get details of a specific Subnet Pool
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to get details
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/subnetpools/{subnetpool_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id} Response samples 200422Content typeapplication/jsonCopy{"cidr": "172.26.0.0/16","created_at": "2022-01-01T00:00:00.000000Z","description": "some description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_version": 4,"name": "some_subnet_pool","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Book Subnetpool Booking a CIDR range from a subnetpool
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to get details
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequiredcidrCidr (string) or Cidr (any) (Cidr)  maskMask (integer) or Mask (any) (Mask)  Responses201 Successful Response
422 Validation Error
post/v0/subnetpools/{subnetpool_id}/book_cidrServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}/book_cidrServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id}/book_cidr Request samples PayloadContent typeapplication/jsonExampleExample with CIDRExample with MaskExample with CIDRCopy{"cidr": "172.26.0.0/16"} Response samples 201422Content typeapplication/jsonCopy{"cidr": "172.26.0.0/16"}Unbook Subnetpool Unbooking a CIDR range from a subnetpool
Authorizations:OAuth2path Parameterssubnetpool_idrequiredany (subnetpoolId)  Id of the Subnet Pool to get details
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequiredcidrstring (Cidr)  Default:  "172.26.0.0/16" The CIDR notation for the subnet pool.
Responses204 Successful Response
422 Validation Error
post/v0/subnetpools/{subnetpool_id}/unbook_cidrServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnetpools/{subnetpool_id}/unbook_cidrServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnetpools/{subnetpool_id}/unbook_cidr Request samples PayloadContent typeapplication/jsonCopy{"cidr": "172.26.0.0/16"} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}subnetsOperations related to Subnets
Delete a Subnet Delete a subnet from the provided tenant_id
Authorizations:OAuth2path Parameterssubnet_idrequiredany (Subnet Id)  Id of the Subnet to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/subnets/{subnet_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnets/{subnet_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnets/{subnet_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}Subnet Details Returns a subnet details
Authorizations:OAuth2path Parameterssubnet_idrequiredany (Subnet Id)  Id of the Subnet to detail
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/subnets/{subnet_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnets/{subnet_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnets/{subnet_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"cidr_block": "172.20.0.0/24","created_at": "2022-01-01 00:00:00","description": "vpc description","dhcp_pools": [{"end": "172.50.0.254","start": "172.50.0.2"}],"dns_nameservers": ["8.8.8.8"],"gateway_ip": "172.50.0.1","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_version": "4","name": "vpc_name","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","zone": "a"}Update Subnet Update a subnet from the provided tenant_id
Authorizations:OAuth2path Parameterssubnet_idrequiredstring (Subnet Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddns_nameserversArray of strings <ipvanyaddress>  (Dns Nameservers) [ items <ipvanyaddress > ] Default:  [] Responses200 Successful Response
422 Validation Error
patch/v0/subnets/{subnet_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/subnets/{subnet_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/subnets/{subnet_id} Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"dns_nameservers": ["8.8.8.8"]} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}vpcsOperations related to VPCs
V1 Create VPC V1 Create a VPC
Authorizations:OAuth2header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  namerequiredstring (Name)  Responses202 Accepted
400 Bad Request
409 Conflict
422 Validation Error
500 Internal Exception
504 Gateway Timeout
post/latest/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/latest/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/latest/vpcs Request samples PayloadContent typeapplication/jsonCopy{"description": "Description","name": "VPC Name"} Response samples 202400409422500504Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "pending"}List VPC Returns a list of VPCs for a provided tenant_id
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"vpcs": [{"created_at": "2022-01-01 00:00:00","description": "DESCRIPTION","external_network": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "vpc_name","network_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","router_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"subnets": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00"}]}Create VPC Create a VPC
Authorizations:OAuth2header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  namerequiredstring (Name)  Responses200 Successful Response
422 Validation Error
post/v0/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs Request samples PayloadContent typeapplication/jsonCopy{"description": "Description","name": "vpc_name"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete VPC Delete a VPC from the provided tenant_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (VPC Id)  ID of the VPC to delete
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses204 Successful Response
422 Validation Error
delete/v0/vpcs/{vpc_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id} Response samples 422Content typeapplication/jsonCopy Expand all  Collapse all {"detail": [{"loc": ["string"],"msg": "string","type": "string"}]}VPC Details Return a VPC details
Authorizations:OAuth2path Parametersvpc_idrequiredany (VPC Id)  ID of the VPC to detail
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id} Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01 00:00:00","description": "DESCRIPTION","external_network": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "vpc_name","network_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","router_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","security_groups": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"subnets": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00"}List Ports Returns a list of ports for a provided vpc_id and x-tenant-id. The list will be paginated, it means you can easily find what you need just setting the page number(_offset) and the quantity of items per page(_limit). The level of detail can also be set
Authorizations:OAuth2path Parametersvpc_idrequiredany (vpc_id)  ID of VPC to list ports
query Parametersdetailedboolean (Detailed)  Default:  true _offsetinteger (Page Number)   >= 1  Default:  1 Page Number
_limitinteger (Items Per Page)   >= 1  Default:  10 Items Per Page
port_id_listArray of any (Port Id List)  Default:  "" header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/portsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/portsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/ports Response samples 200422Content typeapplication/jsonExamplePortsListSimplifiedPortsListPortsListSimplifiedCopy Expand all  Collapse all {"ports_simplified": [{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_address": [{"ip_address": "172.20.0.2","subnet_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}]}Create Port Create a Port with provided vpc_id and x-tenant-id. You can provide a list of security_groups_id or subnets
Authorizations:OAuth2path Parametersvpc_idrequiredany (vpc_id)  ID of the VPC to create port
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
x-zoneX-Zone (string) or X-Zone (any) (X-Zone)  Request Body schema: application/jsonrequiredhas_pipHas Pip (boolean) or Has Pip (any) (Has Pip)  Default:  true has_sgHas Sg (boolean) or Has Sg (any) (Has Sg)  Default:  true namerequiredstring (Name)   [ 5 .. 100 ] characters  security_groups_idArray of Security Groups Id (strings) or Security Groups Id (any) (Security Groups Id)  Default:  [] subnetsArray of Subnets (strings) or Subnets (any) (Subnets)  Default:  [] Responses200 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/portsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/portsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/ports Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"has_pip": true,"has_sg": true,"name": "port_name","security_groups_id": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"],"subnets": ["xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"]} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Public IPs Returns a list of Public IPs for a provided vpc_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc ID)  Id of the VPC to list the Public IPs in
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/public_ipsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/public_ipsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/public_ips Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"public_ips": [{"created_at": "2022-01-01 00:00:00","description": "port description","error": "error","external_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","port_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","public_ip": "100.94.5.31","status": "created","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create Public IP Create async Public IP in a VPC with provided vpc_id and x_tenant_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc ID)  Id of the VPC to create the Public IP in
query Parametersvalidate_quotaboolean (validateQuota)  Default:  true Validate the quota before creating the Public IP
waitboolean (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutwaitTimeout (integer) or waitTimeout (any) (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  Default:  ""  Any of DescriptionDescriptionstring (Description)  Default:  "" Responses200 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/public_ipsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/public_ipsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/public_ips Request samples PayloadContent typeapplication/jsonCopy{"description": "public_ip_description"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Security Groups Returns a list of security groups for a provided vpc_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc ID)  Id of the VPC to create the Security Group in
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/security_groups Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"security_groups": [{"created_at": "2022-01-01 00:00:00","description": "security group description","error": "null","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","is_default": true,"name": "security_group_name","project_type": "default","status": "created","tenant_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}]}Create Security Group  Deprecated Create a Security Group
Authorizations:OAuth2path Parametersvpc_idrequiredVPC Id (string) or VPC Id (any) (VPC Id)  Id of the vpc to create the security group in
query Parameterswaitwait (boolean) or wait (any) (wait)  Default:  true The request will be asynchronous. The wait parameter tells the API that you want the request to simulate synchronous behavior (to maintain endpoint compatibility). You can set an approximate timeout with the waitTimeout parameter
wait_timeoutwaitTimeout (integer) or waitTimeout (any) (waitTimeout)  Default:  120 the approximate time in seconds you want to wait when simulating the request as synchronous (only works with wait=true)
skip_default_rulesboolean (Skip Default Rules)  Default:  false Skip creation of default security group rules
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  Default:  "" namerequiredName (string) or Name (any) (Name)  Responses200 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/security_groupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/security_groupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/security_groups Request samples PayloadContent typeapplication/jsonCopy{"description": "security group description","name": "security_group_name"} Response samples 200422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}List Subnets Returns a list of subnets for a provided vpc_id
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc Id)  Id of the VPC to list Subnets
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
Responses200 Successful Response
422 Validation Error
get/v0/vpcs/{vpc_id}/subnetsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/subnetsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/subnets Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"subnets": [{"cidr_block": "172.20.0.0/24","created_at": "2022-01-01 00:00:00","description": "vpc description","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","ip_version": "4","name": "vpc_name","updated": "2022-01-01 00:00:00","vpc_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","zone": "a"}]}Create Subnet Create a Subnet
Authorizations:OAuth2path Parametersvpc_idrequiredany (Vpc Id)  Id of the VPC to create Subnet
header Parametersx-tenant-idrequiredany (X-Tenant-Id)  Tenant id of the project
x-zoneX-Zone (string) or X-Zone (any) (X-Zone)  Request Body schema: application/jsonrequiredcidr_blockrequiredstring (Cidr Block)  descriptionDescription (string) or Description (any) (Description)  dns_nameserversArray of strings <ipvanyaddress>  (Dns Nameservers) [ items <ipvanyaddress > ] Default:  [] ip_versionrequiredinteger (Ip Version)  namerequiredstring (Name)  subnetpool_idrequiredstring (Subnetpool Id)  Responses201 Successful Response
422 Validation Error
post/v0/vpcs/{vpc_id}/subnetsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v0/vpcs/{vpc_id}/subnetsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v0/vpcs/{vpc_id}/subnets Request samples PayloadContent typeapplication/jsonExampleExample with CIDRExample with MaskExample with CIDRCopy Expand all  Collapse all {"cidr_block": "172.50.0.0/24","description": "some_description","dns_nameservers": ["8.8.8.8"],"ip_version": 4,"name": "subnet_name","subnetpool_id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"} Response samples 201422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}V1 Create VPC V1 Create a VPC
Authorizations:OAuth2header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Tenant id of the project
Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (any) (Description)  namerequiredstring (Name)  Responses202 Accepted
400 Bad Request
409 Conflict
422 Validation Error
500 Internal Exception
504 Gateway Timeout
post/v1/vpcsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/network/v1/vpcsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/network/v1/vpcs Request samples PayloadContent typeapplication/jsonCopy{"description": "Description","name": "VPC Name"} Response samples 202400409422500504Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","status": "pending"}

---

Block Storage

volumesgetList all volumes.postCreate a new volume.delDelete a volume.getRetrieve the details of a specific volume.postAttach the volume to an instance.postDetach the volume from an instance.postExtend the size of a volume.patchRename a volume.postChange the type of a volume.volume-typesgetList all volume types.snapshotsgetList all snapshots.postCreate a snapshot.delDelete a snapshot.getRetrieve the details of a specific snapshot.patchRename a snapshot.usagegetGet UsageattachmentspostAttach a volume to an instance.delDelete an attachment.backupsgetList all backups.postCreate a backup.postCopy backup cross region.delDelete a backup.getRetrieve the details of a specific backup.patchRename a backup.healthchecksgetHealth CheckgetLivenessAPI docs by RedoclyBlock Storage API Product (1.171.0)Block Storage API Product
volumesOperations with volumes, including create, delete, extend, retype, list and other actions.
List all volumes. Retrieve a list of Volumes for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume Type.

query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['volume_type', 'attachment']
_limitinteger ( Limit)   > 0  Default:  50 _offsetinteger ( Offset)   >= 0  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" nameName (string) or Name (null) (Name)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Validation Error
get/v1/volumesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"volumes": [{"attachment": {"attached_at": "2022-01-01T00:00:10Z","device": "/dev/vdb","instance": {"created_at": "2022-01-01T00:00:10Z","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "machine name","state": "running","status": "completed","updated_at": "2022-01-01T00:00:10Z"}},"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","error": {"message": "You have reached the limit of allowed disks. Please, remove unused disks or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "volume name","size": 10,"state": "in-use","status": "completed","type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},"updated_at": "2022-01-01T00:00:10Z"}]}Create a new volume. Create a Volume for the currently authenticated tenant.
The Volume can be used when it reaches the "available" state and "completed"
 status.
Rules

The Volume name must be unique; otherwise, the creation will be disallowed.
The Volume type must be available to use.

Notes

Utilize the block-storage volume-types list command to retrieve a list
 of all available Volume Types.
Verify the state and status of your Volume using the
block-storage volume get --id [uuid] command".

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  sizerequiredinteger (Size)   [ 10 .. 2147483648 ]  Gibibytes (GiB)
typerequiredIdRequest (object) or Name (object) (Type)  backupIdRequest (object) or Name (object) or Backup (null) (Backup)  snapshotIdRequest (object) or Name (object) or Snapshot (null) (Snapshot)  availability_zoneAvailability Zone (string) or Availability Zone (null) (Availability Zone)  Responses202 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/volumesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"availability_zone": "br-se1-a","backup": {"name": "my_backup_name"},"name": "volume-name","size": 10,"snapshot": {"name": "my_snapshot_name"},"type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 202404409422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete a volume. Delete a Volume for the currently authenticated tenant.
Rules

The Volume cannot be attached to a Virtual Machine, i.e., its state cannot
 be "in-use". If necessary, detach the Volume from the Virtual Machine before
 proceeding with deletion.
The Volume must not have any snapshots. If necessary, delete the Volume's
snapshots before proceeding with deletion.
The Volume must have the status "completed", i.e., must not have any
actions in progress.

Notes

Check the state and status of your Volume using the
block-storage volume get --id [uuid] command".

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/volumes/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Retrieve the details of a specific volume. Retrieve details of a Volume for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume
 Type.
Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume for which you want to retrieve
 details.

path Parametersidrequiredstring <uuid>  (Id)  query ParametersexpandArray of strings (Expand)  Default:  "" You can get more detailed info about: ['volume_type', 'attachment']
header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Validation Error
get/v1/volumes/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id} Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"attachment": {"attached_at": "2022-01-01T00:00:10Z","device": "/dev/vdb","instance": {"created_at": "2022-01-01T00:00:10Z","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "machine name","state": "running","status": "completed","updated_at": "2022-01-01T00:00:10Z"}},"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","error": {"message": "You have reached the limit of allowed disks. Please, remove unused disks or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "volume name","size": 10,"state": "in-use","status": "completed","type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},"updated_at": "2022-01-01T00:00:10Z"}Attach the volume to an instance. Attach a Volume to a Virtual Machine instance for the currently
 authenticated tenant.
The Volume attachment will be completed when the Volume status returns to
"completed", and the state becomes "in-use".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "available".
The Virtual Machine's state must be "stopped" or "running".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
virtual-machine instances get --id [uuid] command".

path Parametersidrequiredstring <uuid>  (Id)  virtual_machine_idrequiredstring <uuid>  (Virtual Machine Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/volumes/{id}/attach/{virtual_machine_id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/attach/{virtual_machine_id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/attach/{virtual_machine_id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Detach the volume from an instance. Detach a Volume from a Virtual Machine instance for the
 currently authenticated tenant.
The Volume detachment will be completed when the Volume state returns to
 "available," and the status becomes "completed".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "in-use".
The Virtual Machine's state must be "stopped".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
 virtual-machine instances get --id [uuid] command.
Ensure that any file systems on the device within your operating system are
 unmounted before detaching the Volume.

Troubleshooting

A failure during detachment can result in the Volume becoming stuck in the
 busy state. If this occurs, detachment may be delayed indefinitely until you
 unmount the Volume, force detachment, reboot the instance, or perform all
 three.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/volumes/{id}/detachServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/detachServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/detach Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Extend the size of a volume. Extend the size of an existing Volume for the currently
 authenticated tenant.
The Volume extension will be completed when the Volume status returns to
 "completed".
Rules

The Volume state must be "available".
The Volume status must be "completed" or "extend_error".
The new Volume size must be larger than the current size.

Notes

Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume you want to extend.
Storage quotas are managed internally. If the operation fails due to quota
 restrictions, please contact our support team for assistance.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredsizerequiredinteger (Size)   > 0  New volume size in GB
Responses204 Successful Response
404 Not Found
422 Unprocessable Entity
post/v1/volumes/{id}/extendServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/extendServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/extend Request samples PayloadContent typeapplication/jsonCopy{"size": 20} Response samples 404422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Rename a volume. Rename a Volume for the currently authenticated tenant.
Rules

The Volume name must be unique; otherwise, renaming will not be allowed.

Notes

Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume you wish to rename.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
patch/v1/volumes/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "volume-name"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Change the type of a volume. Change the Volume Type of an existing Volume for the currently
 authenticated tenant.
The Volume retype will be completed when the Volume status returns to
 "completed".
Rules

The Volume state must be "available".
The Volume status must be "completed" or "retype_error".
The new Volume Type must belong to the same region as the Volume.

Notes

Utilize the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume you want to retype.
Utilize the block-storage volume-types list command to retrieve a list of
 all Volume Types and obtain the ID of the Volume Type you want to use.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednew_typerequiredIdRequest (object) or Name (object) (New Type)   Any of IdRequestNameidrequiredstring (Id)   non-empty  Responses204 Successful Response
404 Not Found
422 Unprocessable Entity
post/v1/volumes/{id}/retypeServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volumes/{id}/retypeServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volumes/{id}/retype Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"new_type": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 404422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]volume-typesOperations with volume types for volumes.
List all volume types. List Volume Types allowed in the current region.
Notes

Volume types are managed internally. If you wish to use a Volume Type that
 is not yet available, please contact our support team for assistance.

query Parametersavailability-zoneAvailability-Zone (string) or Availability-Zone (null) (Availability-Zone)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
get/v1/volume-typesServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/volume-typesServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/volume-types Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"types": [{"availability_zones": ["a"],"disk_type": "nvme","id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","iops": {"read": 1000,"total": 1000,"write": 1000},"name": "my_volume_type","status": "active"}]}snapshotsOperations with snapshots for volumes.
List all snapshots. Retrieve a list of Snapshots for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume used to
 create each Snapshot.

query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  _limitinteger ( Limit)   > 0  Default:  50 _offsetinteger ( Offset)   >= 0  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" nameName (string) or Name (null) (Name)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"snapshots": [{"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","description": "my snapshot for testing","error": {"message": "You have reached the limit of allowed snapshots. Please, remove unused snapshots or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "My snapshot","size": 10,"state": "available","status": "completed","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}}]}Create a snapshot. Create a Snapshot for the currently authenticated tenant.
The Snapshot can be used when it reaches the "available" state and the
 "completed" status.
Rules

The Snapshot name must be unique; otherwise, the creation will be disallowed.
Creating Snapshots from restored Volumes may lead to future conflicts as
 you can't delete a Volume with an Snapshot and can't delete a Snapshot with a
 restored Volume, so we recommend avoiding it.

Notes

Use the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume that will be used to create the
 Snapshot.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  volumerequiredIdRequest (object) or Name (object) (Volume)  descriptionrequiredDescription (string) or Description (null) (Description)  Responses202 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/snapshotsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshotsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"description": "my-snapshot","name": "snapshot-name","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 202404409422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Delete a snapshot. Delete a Snapshot for the currently authenticated tenant.
Rules

The Snapshot's status must be "completed".
The Snapshot's state must be "available".
Deleting a Snapshot that has been restored is not possible. If necessary,
 delete the restored Volume first and then proceed to delete the Snapshot.

Notes

Utilize the block-storage snapshots list command to retrieve a list of
 all Snapshots and obtain the ID of the Snapshot you wish to delete.
If needed, you can use the block-storage volume list command to retrieve
 a list of all Volumes and obtain the ID of the restored Volume.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Retrieve the details of a specific snapshot. Retrieve details of a Snapshot for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume
 used to create the Snapshot.
Utilize the block-storage snapshots list command to retrieve a list of
 all Snapshots and obtain the ID of the Snapshot for which you want to retrieve
 details.

path Parametersidrequiredstring <uuid>  (Id)  query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/snapshots/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshots/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots/{id} Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"availability_zones": ["br-ne1-a"],"created_at": "2022-01-01T00:00:10Z","description": "my snapshot for testing","error": {"message": "You have reached the limit of allowed snapshots. Please, remove unused snapshots or contact support to increase your quota.","slug": "creating_error_quota"},"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx","name": "My snapshot","size": 10,"state": "available","status": "completed","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}}Rename a snapshot. Rename a Snapshot for the currently authenticated tenant.
Rules

The Snapshot name must be unique; otherwise, renaming will not be allowed.

Notes

Utilize the block-storage snapshots list command to retrieve a list of
 all Snapshots and obtain the ID of the Snapshot you wish to rename.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednamerequiredstring (Name)   [ 3 .. 50 ] characters  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
patch/v1/snapshots/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/snapshots/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/snapshots/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"name": "snapshot-name"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]usageGet Usage Retrieve usage for specific quota_slug (disk & volumes)
query Parametersquota_slugQuota Slug (string) or Quota Slug (null) (Quota Slug)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
422 Validation Error
get/v0/usageServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v0/usageServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v0/usage Response samples 200422Content typeapplication/jsonCopy Expand all  Collapse all {"results": [{"quota_slug": "disk","used": 10}]}attachmentsAttach a volume to an instance. Attach a Volume to a Virtual Machine instance for the currently
 authenticated tenant.
The Volume attachment will be completed when the Volume status returns to
"completed", and the state becomes "in-use".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "available".
The Virtual Machine's state must be "stopped" or "running".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
virtual-machine instances get --id [uuid] command".

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequiredvolumerequiredobject (IdRequest)  instancerequiredobject (IdRequest)  deviceDevice (string) or Device (null) (Device)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/attachmentsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/attachmentsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/attachments Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"device": "/dev/vdc","instance": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},"volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Delete an attachment. Detach a Volume from a Virtual Machine instance for the
 currently authenticated tenant.
The Volume detachment will be completed when the Volume state returns to
 "available," and the status becomes "completed".
Rules

The Volume and the Virtual Machine must belong to the same tenant.
Both the Volume and Virtual Machine must have the status "completed".
The Volume's state must be "in-use".
The Virtual Machine's state must be "stopped".

Notes

Verify the state and status of your Volume using the
 block-storage volume get --id [uuid] command.
Verify the state and status of your Virtual Machine using the
 virtual-machine instances get --id [uuid] command.
Ensure that any file systems on the device within your operating system are
 unmounted before detaching the Volume.

Troubleshooting

A failure during detachment can result in the Volume becoming stuck in the
 busy state. If this occurs, detachment may be delayed indefinitely until you
 unmount the Volume, force detachment, reboot the instance, or perform all
 three.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/attachments/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/attachments/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/attachments/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]backupsList all backups. Retrieve a list of Backups for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the
 Volume used to create each Backup.

query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  _limitinteger ( Limit)   > 0  Default:  50 _offsetinteger ( Offset)   >= 0  Default:  0 _sortstring ( Sort) ^(^[\w-]+:(asc|desc)(,[\w-]+:(asc|desc))*)?$ Default:  "created_at:asc" nameName (string) or Name (null) (Name)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"backups": [{"created_at": "2022-01-01T00:00:10Z","description": "my backup for testing","error": {"message": "You have reached the limit of allowed backups. Please, remove unused backups or contact support to increase your quota.","slug": "creating_error_quota"},"id": "c2ea3568-0298-43ea-986a-f27ce3cf182b","name": "My backup","size": 10,"source_backup": {"id": "c9bb8b62-87d3-4c2a-864a-945d242f10ac"},"state": "available","status": "completed","type": "incremental","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "351d14b4-0ea4-49fb-bc93-18e9966149c7"}}]}Create a backup. Create a backup for the currently authenticated tenant.
The Backup can be used when it reaches the "available" state and the
 "completed" status.
Rules

The Backup name must be unique; otherwise, the creation will be disallowed.
The Volume can be either in in-use or available states.
The Volume must not have an operation in execution.

Notes

Use the block-storage volume list command to retrieve a list of all
 Volumes and obtain the ID of the Volume that will be used to create the
 Backup.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequireddescriptionDescription (string) or Description (null) (Description)  volumerequiredIdRequest (object) or Name (object) (Volume)  namerequiredstring (Name)  typestring (BackupType)  Default:  "full" Enum: "full" "incremental"  Responses202 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/backupsServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backupsServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"description": "my-backup","name": "backup name","type": "full","volume": {"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}} Response samples 202404409422Content typeapplication/jsonCopy{"id": "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"}Copy backup cross region. Copy a backup cross region for the currently authenticated tenant.
Rules

The copy only be accepted when the destiny region is different from origin region.
The copy only be accepted if the backup's name in destiny region is different from input name.
The copy only be accepted if the user has access to destiny region.

Notes

Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup you wish to copy across different region.

header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequireddestiny_regionrequiredstring (Destiny Region)   [ 1 .. 255 ] characters  backuprequiredobject (BackupIdRequest)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
post/v1/backups/copyServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/copyServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/copy Request samples PayloadContent typeapplication/jsonCopy Expand all  Collapse all {"backup": {"name": "backup-tomato"},"destiny_region": "br-ne1"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Delete a backup. Delete a Backup for the currently authenticated tenant.
Rules

The Backup's status must be "completed".
The Backup's state must be "available".

Notes

Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup you wish to delete.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
delete/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/{id} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]Retrieve the details of a specific backup. Retrieve details of a Backup for the currently authenticated tenant.
Notes

Use the expand argument to obtain additional details about the Volume
 used to create the Backup.
Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup for which you want to retrieve
 details.

path Parametersidrequiredstring <uuid>  (Id)  query ParametersexpandArray of strings (Expand)  Default:  ""Items Value: "volume"  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Responses200 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
get/v1/backups/{id}Server for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/{id}Server for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/{id} Response samples 200404409422Content typeapplication/jsonCopy Expand all  Collapse all {"created_at": "2022-01-01T00:00:10Z","description": "my backup for testing","error": {"message": "You have reached the limit of allowed backups. Please, remove unused backups or contact support to increase your quota.","slug": "creating_error_quota"},"id": "c2ea3568-0298-43ea-986a-f27ce3cf182b","name": "My backup","size": 10,"source_backup": {"id": "c9bb8b62-87d3-4c2a-864a-945d242f10ac"},"state": "available","status": "completed","type": "incremental","updated_at": "2022-01-01T00:00:10Z","volume": {"id": "351d14b4-0ea4-49fb-bc93-18e9966149c7"}}Rename a backup. Patches a Backup for the currently authenticated tenant.
Rules

The Backup name must be unique; otherwise, renaming will not be allowed.
The Backup's state must be available.

Notes

Utilize the block-storage backups list command to retrieve a list of
 all Backups and obtain the ID of the Backup you wish to rename.

path Parametersidrequiredstring <uuid>  (Id)  header Parametersx-tenant-idrequiredstring (X-Tenant-Id)  Request Body schema: application/jsonrequirednameName (string) or Name (null) (Name)  descriptionDescription (string) or Description (null) (Description)  Responses204 Successful Response
404 Not Found
409 Conflict
422 Unprocessable Entity
patch/v1/backups/{id}/renameServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/v1/backups/{id}/renameServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/v1/backups/{id}/rename Request samples PayloadContent typeapplication/jsonCopy{"description": "new description to my resource","name": "new name to my resource"} Response samples 404409422Content typeapplication/jsonCopy Expand all  Collapse all [{"detail": { },"message": "Something went wrong","slug": "generic"}]healthchecksHealth Check Check api status
Responses200 Successful Response
get/healthcheckServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/healthcheckServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/healthcheck Response samples 200Content typeapplication/jsonCopy{"status": "OK"}Liveness Liveness probe
Responses204 Successful Response
get/livenessServer for br-ne-1 region
https://api.magalu.cloud/br-ne-1/block-storage/livenessServer for br-se-1 region
https://api.magalu.cloud/br-se-1/block-storage/liveness

---

Vis√£o Geral
Este guia fornece instru√ß√µes passo a passo sobre como configurar e usar o provedor (provider) MGC no seu projeto Terraform (ou OpenTofu) e gerenciar seus recursos na nuvem Magalu.
Voc√™ pode tamb√©m acessar o registro da MGC no site da Hashicorp, onde h√° tamb√©m a documenta√ß√£o refer√™ncia do nosso provider.
Siga estes passos cuidadosamente para garantir uma integra√ß√£o bem-sucedida.

---

Exemplos de uso do Terraform
Disponibilizamos este reposit√≥rio onde cont√©m exemplos pr√°ticos de como usar o Terraform para provisionar e gerenciar recursos na Magalu Cloud. Os exemplos est√£o divididos em dois sub-reposit√≥rios:

Simples: Estes exemplos demonstram o uso b√°sico para recursos individuais. (exemplo: Criar uma VM)
Avan√ßado: Estes exemplos cobrem casos de uso que envolvem m√∫ltiplos recursos. (exemplo: Criar uma VM com armazenamento em bloco anexado)

Sempre estaremos atualizando este reposit√≥rio para garantir que os exemplos estar√£o atualizados e completos!

---

Pr√©-requisitos
Terraform‚Äã
Antes de come√ßar tenha certeza de que voc√™ tem o Terraform instalado e para isso siga as instru√ß√µes no site da Hashicorp.

---

Como usar o provider
Voc√™ pode visitar a p√°gina oficial do provider MGC no registro online do Terraform e abaixo est√£o os passos iniciais que auxiliam na configura√ß√£o do provider para o seu projeto.

Crie uma pasta para o seu projeto, como por exemplo: ~/terraform-mgc.
Crie um novo arquivo de configura√ß√£o para o projeto, como por exemplo ~/terraform-mgc/main.tf
Adicione o c√≥digo abaixo ao arquivo main.tf rec√©m criado:

O c√≥digo abaixo far√° o download e instala√ß√£o da √∫ltima vers√£o do provider mgc.
terraform {    required_providers {        mgc = {        source = "MagaluCloud/mgc"        }    }}provider "mgc" {    # Configuration options}
Se voc√™ deseja instalar uma vers√£o espec√≠fica do provider, basta adicionar o par√¢metro version, como mostra este outro exemplo:
terraform {    required_providers {        mgc = {        source = "MagaluCloud/mgc"        **version = "0.18.6"**        }    }}provider "mgc" {    # Configuration options}
No c√≥digo acima estamos for√ßando a instala√ß√£o do provider de vers√£o 0.18.6.

---

Configurar regi√£o
Para configurar a regi√£o do provedor, utilize o seguinte c√≥digo:
provider "mgc" {  region="br-se1"}
Par√¢metros‚Äã
region: Define a regi√£o para o provedor MGC. No exemplo acima, br-se1 indica a regi√£o Sudeste.
Exemplo‚Äã
No exemplo abaixo utilizamos 2 regi√µes br-se1 e br-ne1 e criamos um provider para cada, adicionando um alias para facilitar o controle dos recursos de block-storage:
terraform {  required_providers {    mgc = {      source = "magalucloud/mgc"      version = "0.18.10"    }  }}provider "mgc" {  alias = "sudeste"  region = "br-se1"}provider "mgc" {  alias  = "nordeste"  region = "br-ne1"}resource "mgc_block-storage_volumes" "block_storage" {    provider = mgc.nordeste    name = "volume-via-terraform"    size = 30    type = {        name = "cloud_nvme20k"    }}resource "mgc_block-storage_volumes" "block_storage-sudeste" {    provider = mgc.sudeste    name = "volume-via-terraform"    size = 30    type = {        name = "cloud_nvme20k"    }}

---

Autentica√ß√£o
Autentica√ß√£o usando a CLI‚Äã
√â importante que voc√™ tenha feito o procedimento de autentica√ß√£o pelo CLI ao menos uma vez, porque o provider Terraform utilizar√° a mesmo token de sess√£o do usu√°rio armazenados localmente.
O token tem um tempo pr√©-determinado de expira√ß√£o, ent√£o lembre-se de atualizar o token de tempos em tempos. Basta re-executa o procedimento de autentica√ß√£o da CLI.
Saiba mais na documenta√ß√£o da CLI.
Autentica√ß√£o com API Key‚Äã
Para saber mais sobre a autentica√ß√£o utilizando API Key
Autentica√ß√£o com API Key em Object Storage‚Äã
Para utilizar no Object Storage, temos uma diferen√ßa, por utilizarmos o protocolo S3, √© necess√°rio utilizar os pares de chaves (Key Pairs), para gerar os pares de chaves, siga as instru√ß√µes aqui Como gerar Key Pairs
Exemplo de como utilizar Key Pairs e API-Key no Terraform‚Äã
provider "mgc" {  alias = "nordeste"  region = "br-ne1"  api_key = "2wfc0ee3-521f-40a0-af99-fas890809"  object_storage = {    key_pair = {      key_id = "8ce469da-5f44-8fd9-ade7-9381038fasd9"      key_secret = "f88as6ef-8a58-adfa-9698-891029favn"    }  }}
infoLembre que temos um reposit√≥rio com exemplos de uso do terraform caso tenha d√∫vidas.

---

Adicionando seus recursos
Para adicionar recursos suportados da Magalu Cloud no seu projeto terraform, siga as instru√ß√µes contidas na documenta√ß√£o refer√™ncias do provider MGC e tamb√©m na documenta√ß√£o oficial da Magalu Cloud.
infoA regi√£o da Magalu Cloud onde o projeto Terraform ser√° executado √© a mesma que est√° nas configura√ß√µes da CLI. Veja as instru√ß√µes de configura√ß√£o da CLI para mais detalhes.
Exemplo de cria√ß√£o de Virtual Machine‚Äã
Abaixo segue um exemplo de configura√ß√£o para inst√¢ncia de Virtual Machine:
// virtual_machines.tfresource "mgc_virtual-machine_instances" "myvm" {    provider = "mgc"    name = "my-tf-vm"    machine_type = {        name = "cloud-bs1.xsmall"    }    image = {        name = "cloud-ubuntu-22.04 LTS"    }    ssh_key_name = "my_ssh_key"}
Esse exemplo deve ser adicionado a um arquivo com extens√£o .tf , como por exemplo virtual_machines.tf e deve ficar na mesma pasta dos demais arquivos do projeto.

---

Utiliza√ß√£o de Vari√°veis de Ambiente no Terraform
Verifique quais s√£o as vari√°veis de ambiente dispon√≠veis.
Configura√ß√£o no Terraform‚Äã
No Terraform, voc√™ pode acessar essas vari√°veis usando o provedor adequado. Exemplo de configura√ß√£o no arquivo main.tf:
provider "mgc" {  alias = "nordeste"  region = var.mgc_region  api_key = var.mgc_api_key  object_storage = {    key_pair = {      key_id = var.mgc_obj_key_id      key_secret = var.mgc_obj_key_secret    }  }}variable "mgc_api_key" {  description = "API Key para autentica√ß√£o"}variable "mgc_obj_key_id" {  description = "ID da chave do objeto"}variable "mgc_obj_key_secret" {  description = "Segredo da chave do objeto"}variable "mgc_region" {  description = "Regi√£o de opera√ß√£o dos recursos"}variable "mgc_env" {  description = "Ambiente de opera√ß√£o"}

---

Testando seu projeto terraform
Agora vamos executar o seu projeto terraform. Os comandos sugeridos abaixo seguem o fluxo b√°sico de execu√ß√£o e verifica√ß√£o da ferramenta, mas para melhor compreender o seu funcionamento recomendamos visitar a documenta√ß√£o oficial a p√°gina do desenvolvedor: Terraform Documentation.


Inicialmente abra um seu terminal dentro da pasta onde est√° o projeto terraform (os arquivos .tf) e execute o comando init para validar o provider.
terraform init


Agora execute o seguinte comando para revisar as mudan√ßas antes de aplicar:
terraform plan


E quando estiver seguro das altera√ß√µes execute o comando abaixo para aplic√°-las. Responda aos prompts de confirma√ß√£o, caso sejam exibidos no seu terminal.
terraform apply


Por fim, para verificar as altera√ß√µes aplicadas sobre seus recursos na Magalu Cloud, execute o comando abaixo.
terraform show



---

Documenta√ß√µes dos produtos
Acesse a documenta√ß√£o dos produtos da MGC usando Terraform

---

Vari√°veis de ambiente
Esta documenta√ß√£o descreve como configurar e utilizar as seguintes vari√°veis de ambiente para o Terraform e a CLI:

MGC_API_KEY
MGC_OBJ_KEY_ID
MGC_OBJ_KEY_SECRET
MGC_REGION
MGC_ENV

Essas vari√°veis de ambiente s√£o usadas para autentica√ß√£o e configura√ß√£o de ambiente ao interagir com a infraestrutura e servi√ßos fornecidos.
Vari√°veis de Ambiente


MGC_API_KEY -
Chave de API para autentica√ß√£o. Saiba mais.


MGC_OBJ_KEY_ID -
ID da chave para acessar ao produto de Object Storage. Saiba mais.


MGC_OBJ_KEY_SECRET -
Secret da chave para acessar ao produto de Object Storage. Saiba mais.


MGC_REGION -
Especifica a regi√£o onde os recursos ser√£o criados e gerenciados.


MGC_ENV -
Define o ambiente de opera√ß√£o para diferenciar entre diferentes fases de desenvolvimento.


warningAs vari√°veis de ambiente sempre ter√£o prioridade. Ou seja, no caso onde o usu√°rio tenha a CLI e tamb√©m API Key como vari√°veis de ambientes setadas, ser√° utilizado a API Key para autentica√ß√£o.
Exemplo de utiliza√ß√£o‚Äã

LinuxWindowsLinux‚Äãexport MGC_API_KEY="sua_api_key_aqui"export MGC_OBJ_KEY_ID="seu_obj_key_id_aqui"export MGC_OBJ_KEY_SECRET="seu_obj_key_secret_aqui"export MGC_REGION="sua_regiao_aqui"export MGC_ENV="seu_ambiente_aqui"Windows‚Äã$env:MGC_API_KEY="sua_api_key_aqui"$env:MGC_OBJ_KEY_ID="seu_obj_key_id_aqui"$env:MGC_OBJ_KEY_SECRET="seu_obj_key_secret_aqui"$env:MGC_REGION="sua_regiao_aqui"$env:MGC_ENV="seu_ambiente_aqui"

---

Vis√£o Geral
O que √© uma Chave SSH?‚Äã
Uma chave SSH (Secure Shell) √© uma ferramenta criptogr√°fica usada para autentica√ß√£o segura entre um cliente e um servidor. As chaves SSH s√£o amplamente utilizadas para acessar sistemas e servidores de forma segura sem a necessidade de usar senhas.
Componentes de uma Chave SSH‚Äã

Chave P√∫blica: Esta chave pode ser compartilhada com qualquer pessoa ou servidor. Ela √© usada pelo servidor para verificar a autenticidade da chave privada correspondente.
Chave Privada: Esta chave deve ser mantida em segredo. Ela √© usada pelo cliente para se autenticar com o servidor que possui a chave p√∫blica correspondente.

Benef√≠cios das Chaves SSH‚Äã

Seguran√ßa: As chaves SSH oferecem um m√©todo de autentica√ß√£o mais seguro do que senhas, pois s√£o baseadas em criptografia assim√©trica.
Automa√ß√£o: Permitem a automa√ß√£o de processos sem a necessidade de intera√ß√£o manual para fornecer uma senha.
Conveniencia: Facilitam o acesso a sistemas e servidores de forma r√°pida e segura.

A√ß√µes Poss√≠veis com o Comando mgc profile ssh-keys‚Äã
O comando mgc profile ssh-keys √© utilizado para gerenciar chaves SSH associadas a perfis. Aqui est√£o as a√ß√µes que voc√™ pode realizar:
1. Criar Chave SSH (create)‚Äã

Descri√ß√£o: Cria uma nova chave SSH e a associa a um perfil. Este comando √© √∫til para adicionar novas chaves SSH que voc√™ possa precisar para acessar diferentes sistemas ou servidores.

2. Excluir Chave SSH (delete)‚Äã

Descri√ß√£o: Remove uma chave SSH existente do perfil. Este comando √© √∫til quando voc√™ deseja revogar o acesso de uma chave espec√≠fica ou limpar chaves desnecess√°rias.

3. Obter Chave SSH (get)‚Äã

Descri√ß√£o: Recupera informa√ß√µes sobre uma chave SSH existente. Isso √© √∫til para verificar os detalhes ou a configura√ß√£o de uma chave espec√≠fica.

4. Listar Chaves SSH (list)‚Äã

Descri√ß√£o: Exibe uma lista de todas as chaves SSH associadas ao perfil. Esse comando ajuda a visualizar e gerenciar todas as chaves SSH em uso.


---

Criar Chave SSH
Criar uma chave ssh‚Äã
O primeiro passo √© criar uma chave ssh, no exemplo √© apresentado como criar uma chave utilizando o sistema operacional linux:
ssh-keygen -t rsa -b 4096 -f ~/.ssh/sshkey-example
Para visualizar a chave p√∫blica execute o comando:
cat ~/.ssh/sshkey-example.pub
Inserir a chave na sua conta‚Äã
Em seguida, j√° √© poss√≠vel copiar a chave p√∫blica para a Magalu Cloud utilizando o seguinte comando na CLI:
mgc profile ssh-keys create --key="<SUA CHAVE PUBLICA AQUI>" --name="sshkey-cli-example
infoCopie a chave publica e cole dentro do parametro --key
Par√¢metros‚Äã

--name: Nome da nova chave SSH.
--key : Chave p√∫blica


---

Consultar Chaves SSH
Consultar uma chave ssh‚Äã
O subcomando get recupera informa√ß√µes sobre uma chave SSH existente.
Sintaxe‚Äã
mgc profile ssh-keys get <key-id>
Par√¢metros‚Äã

<key-id>: ID da chave SSH que voc√™ deseja obter.

Exemplo de Uso‚Äã
Para obter detalhes sobre uma chave SSH com o ID "123123123123", use:
mgc profile ssh-keys get 123123123123
Listar chaves ssh‚Äã
O subcomando list exibe uma lista de todas as chaves SSH associadas ao perfil.
Sintaxe‚Äã
mgc profile ssh-keys list

---

Vis√£o Geral da Auditoria da Magalu Cloud
Este documento fornece uma vis√£o geral abrangente da Auditoria oferecida pela Magalu Cloud (MGC) e como ela funciona.
Diversos produtos da MGC emitem eventos quando certas a√ß√µes s√£o realizadas, que s√£o ent√£o armazenados para eventual consulta. Com a Auditoria, usu√°rios t√™m transpar√™ncia o suficiente para saber quem fez o qu√™ e quando em seus recursos, ajudando na verifica√ß√£o de uso externo indevido de dados ou resolu√ß√£o de contesta√ß√£o de consumo.
Alguns exemplos de eventos s√£o:

Cria√ß√£o de uma nova inst√¢ncia de Virtual Machine;
Redimensionamento de uma inst√¢ncia de Database;
Qualquer dele√ß√£o de recursos.


---

Listar eventos

>_ CLIPara listar os eventos associados ao seu tenant, use o comando:mgc audit events listA Auditoria oferece diversos filtros para ajudar na listagem, sendo alguns deles:--source-like: filtra baseado no contexto do evento. Por exemplo, caso o usu√°rio queira consultar eventos de iniciar atrelados a uma inst√¢ncia arbitr√°ria de Virtual Machine, poderia ser usado o comando:mgc audit events list --source-like=<ID>/start--type-like: filtra baseado no tipo do evento. Por exemplo, caso o usu√°rio queira consultar todos os eventos emitidos por Block Storage:mgc audit events list --type-like=block-storageOu caso queira consultar todos os eventos de cria√ß√£o de inst√¢ncias:mgc audit events list --type-like=instances.createPara consultar outros par√¢metros de filtragem, anexe --help no comando.

---

Listar tipos de eventos

>_ CLIPara listar os tipos √∫nicos de eventos associados ao seu tenant, use o comando:mgc audit event-types listPara consultar par√¢metros de pagina√ß√£o, anexe --help no comando acima.

---

Dicas de flags no CLI
Pagina√ß√£o‚Äã
O usu√°rio pode navegar pelos eventos com os par√¢metros --control.limit e --control.offset, que respectivamente denotam quantos eventos trazer e a partir de qual evento trazer. Por padr√£o, 50 resultados ser√£o trazidos √† partir do in√≠cio.
mgc audit events list --control.limit=25 --control.offset=10
No exemplo acima, seriam trazidos 25 eventos √† partir do 10¬∫. Em consultas com filtragem, a pagina√ß√£o se aplica apenas aos eventos buscados.

---

Produtos que emitem eventos
No momento, os seguintes produtos da Magalu Cloud emitem eventos para Auditoria:
ProdutoRecursoEventosVirtual MachineBackupCriar, Deletar, Restaurar, Renomear.ImagemCriar, Deletar, Renomear.Inst√¢nciaCriar, Deletar, Alterar tipo, Renomear, Iniciar, Parar, Suspender, Reiniciar.PortaAnexar, Desanexar.SnapshotCriar, Restaurar, Deletar.DatabaseBackupCriar, Deletar, Restaurar.Inst√¢nciaCriar, Deletar, Iniciar, Parar, Redimensionar.R√©plicaCriar, Deletar, Iniciar, Parar, Redimensionar.KubernetesClusterCriar, Deletar.NodepoolCriar, Deletar, Atualizar.Block StorageBackupCriar, Deletar, Restaurar, Renomear.SnapshotCriar, Deletar, Restaurar, Renomear.VolumeCriar, Deletar, Renomear, Anexar, Desanexar, Redimensionar, Alterar tipo.

---

Especifica√ß√£o dos eventos
Os eventos da Auditoria seguem a especifica√ß√£o CloudEvents, que busca descrever um formato comum de dados para interoperabilidade entre servi√ßos, plataformas e sistemas.
Fora os campos padr√µes do CloudEvents, os eventos da Auditoria apresentam as seguintes extens√µes:
product: identifica o nome formal do produto;
region: a regi√£o f√≠sica onde o evento foi emitido;
tenantid: identifica o tenant que acionou o evento.

---

Vis√£o Geral
A Magalu Cloud oferece uma abordagem transparente e flex√≠vel para seus servi√ßos e pol√≠ticas financeiras. Os custos de utiliza√ß√£o s√£o calculados com base no consumo de recursos espec√≠ficos de cada servi√ßo, apresentando uma variedade de estruturas de pre√ßos.
Atualmente, os pagamentos s√£o realizados exclusivamente via cart√£o de cr√©dito, embora op√ß√µes alternativas estejam abertas para discuss√£o, visando atender √†s necessidades individuais dos clientes. Ferramentas de monitoramento e controle de gastos s√£o fornecidas, permitindo aos usu√°rios acompanhar e definir alertas sobre seus consumos. Quanto a descontos e cr√©ditos, estes s√£o gerenciados pela equipe comercial, sendo dispon√≠veis mediante solicita√ß√£o. As faturas, que incluem impostos, s√£o emitidas mensalmente e podem ser acessadas facilmente atrav√©s do Console do Cliente, garantindo transpar√™ncia e conformidade com regulamenta√ß√µes fiscais.

---

C√°lculo dos custos de utiliza√ß√£o dos servi√ßos
Os custos de utiliza√ß√£o dos servi√ßos s√£o calculados com base no consumo de recursos, como capacidade de armazenamento, poder de processamento, largura de banda, entre outros. Cada servi√ßo possui uma estrutura de pre√ßos espec√≠fica, que pode incluir tarifas fixas, tarifas por hora de utiliza√ß√£o, tarifas por uso de dados, entre outras. Voc√™ poder√° visualizar os detalhes da precifica√ß√£o diretamente na p√°gina de cada produto ou servi√ßo.

---

M√©todos de pagamento aceitos
Para todos os nossos clientes, atualmente aceitamos apenas pagamentos via cart√£o de cr√©dito (n√£o √© necess√°rio habilitar a op√ß√£o para utiliza√ß√£o no exterior).
No entanto, para clientes de grande consumo que desejam explorar outras op√ß√µes de pagamento, como o PIX, estamos abertos a discutir possibilidades alternativas. Por favor, entre em contato conosco para abrir uma solicita√ß√£o e avaliaremos a viabilidade de oferecer o PIX como uma op√ß√£o de pagamento para sua conta. Estamos comprometidos em atender √†s necessidades individuais de nossos clientes e encontrar solu√ß√µes adequadas para facilitar a transa√ß√£o financeira.

---

Monitoramento e controle dos gastos
Os clientes t√™m acesso a ferramentas de monitoramento e controle de gastos na Magalu Cloud. Por meio do link Faturamento no Console, √© poss√≠vel acompanhar em tempo real o consumo de recursos e os custos associados a cada servi√ßo utilizado. Em breve ser√° poss√≠velconfigurar alertas para ser notificado quando seus gastos atingirem determinados limites predefinidos.

---

Pol√≠ticas de descontos e cr√©ditos oferecidas
Os descontos e pol√≠ticas promocionais s√£o gerenciados pela nossa equipe comercial. Se voc√™ estiver interessado em explorar poss√≠veis descontos ou cr√©ditos para o seu caso espec√≠fico, recomendamos entrar em contato conosco para abrir uma solicita√ß√£o. Nossa equipe avaliar√° sua solicita√ß√£o e discutir√° as op√ß√µes dispon√≠veis para atender √†s suas necessidades e requisitos comerciais. Estamos comprometidos em oferecer solu√ß√µes personalizadas e flex√≠veis para nossos clientes.

---

Emiss√£o e acesso as faturas
As faturas s√£o fechadas mensalmente no dia 6 do m√™s subsequente ao consumo. Ap√≥s o fechamento, as notas fiscais correspondentes s√£o geradas e estar√£o dispon√≠veis para baixar em poucos dias ap√≥s o fechamento. Voc√™ poder√° acessar suas faturas e notas fiscais atrav√©s do link Faturamento no Console, onde estar√£o dispon√≠veis para visualiza√ß√£o e download em formato digital. Em caso de d√∫vidas ou problemas, nossa equipe de suporte est√° √† disposi√ß√£o para ajud√°-lo.

---

Emiss√£o e acesso as faturas
As faturas s√£o fechadas mensalmente no dia 6 do m√™s subsequente ao consumo. Ap√≥s o fechamento, as notas fiscais correspondentes s√£o geradas e estar√£o dispon√≠veis para baixar em poucos dias ap√≥s o fechamento. Voc√™ poder√° acessar suas faturas e notas fiscais atrav√©s do link Faturamento no Console, onde estar√£o dispon√≠veis para visualiza√ß√£o e download em formato digital. Em caso de d√∫vidas ou problemas, nossa equipe de suporte est√° √† disposi√ß√£o para ajud√°-lo.

---

Tratamento das casas decimais
Em nosso sistema, os pre√ßos dos produtos s√£o definidos em uma granularidade consider√°vel, o que pode resultar em valores com mais de tr√™s casas decimais no c√°lculo do consumo. Para garantir consist√™ncia e transpar√™ncia, adotamos uma regra de arredondamento: quando o valor monet√°rio ultrapassa tr√™s casas decimais e o valor da quarta casa decimal √© igual ou maior que 5, arredondamos o valor para cima.
Isso garante que os valores finais sejam representados de forma precisa e justa para nossos clientes.

---

Parcelamento ou negocia√ß√£o de faturas
Em alguns casos √© poss√≠vel negociar o parcelamento de faturas ou estabelecer acordos de pagamento alternativos em caso de dificuldades financeiras. Recomendamos entrar em contato com o suporte ao cliente para discutir op√ß√µes de pagamento flex√≠veis e encontrar uma solu√ß√£o adequada para a situa√ß√£o espec√≠fica.

---

Upgrade ou downgrade do meu produto ou servi√ßo
N√£o √© cobrada nenhuma taxa adicional para realizar um upgrade ou downgrade do seu produto ou servi√ßo. No entanto, ao efetuar a
mudan√ßa, o novo recurso ser√° cobrado proporcionalmente ao novo pre√ßo at√© o final do m√™s. Isso significa que voc√™ pagar√° apenas pela
diferen√ßa de pre√ßo entre o plano anterior e o novo plano, calculada com base no tempo restante no ciclo de faturamento atual. Essa
abordagem garante que voc√™ pague apenas pelo que est√° utilizando, sem taxas adicionais pela altera√ß√£o do plano.

---

Per√≠odo considerado para o c√°lculo da fatura
O per√≠odo considerado para o c√°lculo da fatura √© sempre o m√™s fechado, abrangendo do primeiro ao √∫ltimo dia do m√™s. Isso significa que
todas as transa√ß√µes e consumo de recursos realizados dentro desse intervalo de tempo ser√£o refletidos na fatura correspondente ao final
do m√™s. Essa pr√°tica garante uma vis√£o clara e abrangente dos custos e uso dos servi√ßos durante o per√≠odo de faturamento.

---

Atualiza√ß√£o do valor mostrado na tela do faturamento
O valor mostrado na tela de faturamento √© atualizado a cada 15 minutos para refletir os dados mais recentes. No entanto, √© importante
observar que, devido ao tempo necess√°rio para processar os c√°lculos, o valor exibido pode n√£o ser exatamente em tempo real. O valor
exato e final s√≥ ser√° exibido ap√≥s o fechamento da fatura correspondente ao per√≠odo de cobran√ßa.

---

Atualiza√ß√£o do valor mostrado na tela do faturamento
O valor mostrado na tela de faturamento √© atualizado a cada 15 minutos para refletir os dados mais recentes. No entanto, √© importante
observar que, devido ao tempo necess√°rio para processar os c√°lculos, o valor exibido pode n√£o ser exatamente em tempo real. O valor
exato e final s√≥ ser√° exibido ap√≥s o fechamento da fatura correspondente ao per√≠odo de cobran√ßa.

---

Atualizar minhas informa√ß√µes de pagamento
Atualmente, n√£o temos uma interface dispon√≠vel para que os usu√°rios alterem seus dados cadastrais diretamente. No entanto, voc√™ pode
abrir uma solicita√ß√£o de atendimento para atualizar suas informa√ß√µes de pagamento. Nossa equipe de suporte estar√° pronta para ajud√°-lo
e garantir que suas informa√ß√µes sejam atualizadas de forma precisa e segura. Pedimos desculpas pelo inconveniente e agradecemos sua
compreens√£o enquanto trabalhamos para melhorar nossos sistemas e oferecer uma experi√™ncia mais conveniente para nossos clientes.

---

Pol√≠tica de reembolso em caso de cancelamento de um servi√ßo
N√£o possu√≠mos pol√≠tica de reembolso em caso de cancelamento. Entretanto, em uma situa√ß√£o de cancelamento, voc√™ ser√° cobrado
apenas pelo consumo at√© a data do cancelamento. Estamos comprometidos em garantir transpar√™ncia e equidade em nossas pr√°ticas de
cobran√ßa.

---

Taxa adicional para pagamentos atrasados
Sim, em caso de pagamentos atrasados, ser√£o aplicados juros e multa. No entanto, estamos aqui para ajud√°-lo a evitar essas penalidades.
Se precisar de assist√™ncia com o pagamento ou tiver dificuldades, n√£o hesite em entrar em contato conosco. Estamos comprometidos em
encontrar solu√ß√µes que sejam justas e acess√≠veis para voc√™.

---

Resumo detalhado do consumo de recursos em minha fatura
Sim, √© poss√≠vel. Por favor, abra uma solicita√ß√£o de atendimento e enviaremos o mais breve poss√≠vel um arquivo detalhado com o consumo
de recursos por categoria. Estamos comprometidos em fornecer todas as informa√ß√µes necess√°rias para garantir a transpar√™ncia e o
entendimento completo das suas cobran√ßas.

---

Cobran√ßa no cart√£o de cr√©dito em rela√ß√£o ao consumo dos servi√ßos
A cobran√ßa no cart√£o de cr√©dito √© realizada no m√™s subsequente ao consumo dos servi√ßos. Normalmente, as cobran√ßas s√£o processadas
no dia 6 do m√™s seguinte ao per√≠odo de uso dos recursos. Isso garante que voc√™ tenha tempo suficiente para revisar suas faturas antes do
pagamento e ajuda a manter um ciclo consistente de cobran√ßa.

---

Varia√ß√£o na cota√ß√£o do d√≥lar afeta nossos pre√ßos
Nossos pre√ßos s√£o calculados em reais, e a varia√ß√£o na cota√ß√£o do d√≥lar n√£o influencia fortemente nossos pre√ßos. Isso significa que,
mesmo que haja flutua√ß√µes na taxa de c√¢mbio, os pre√ßos dos nossos servi√ßos permanecem relativamente est√°veis em rela√ß√£o ao real.
Estamos comprometidos em oferecer transpar√™ncia e estabilidade em nossas pol√≠ticas de pre√ßos para garantir uma experi√™ncia
consistente para nossos clientes.

---

Programa de Preview
O Programa de Preview √© a forma mais f√°cil e r√°pida de come√ßar a utilizar os lan√ßamentos mais recentes da Magalu Cloud. Com um processo totalmente automatizado, voc√™ pode explorar os produtos dispon√≠veis em apenas alguns cliques. Esteja sempre por dentro das inova√ß√µes e contribua com a melhoria cont√≠nua dos produtos.
Importante: Produtos em est√°gio de ‚Äúpreview‚Äù significam que est√£o finalizados em termos de desenvolvimento, por√©m s√£o liberados de forma cadenciada e controlada para o p√∫blico geral.
Por que participar do programa?‚Äã

Facilidade para ativar novos produtos: basta voc√™ aceitar participar do programa atrav√©s do console e come√ßar a usar na mesma hora.
Contribua ativamente para melhoria cont√≠nua do produto: d√™ feedbacks sobre os produtos diretamente pelo portal, contribuindo para a evolu√ß√£o e robustez dos produtos dispon√≠veis.
Otimize suas opera√ß√µes com novas funcionalidades: fique por dentro dos lan√ßamentos mais recentes da Magalu Cloud e esteja √† frente do mercado.

Os produtos dispon√≠veis no programa est√£o em beta?‚Äã
Os produtos dispon√≠veis no programa est√£o no est√°gio de Public Preview, ou seja, qualquer usu√°rio pode utilizar e contribuir com feedbacks para melhoria cont√≠nua. Por isso, produtos neste est√°gio est√£o em evolu√ß√£o e podem possuir algumas limita√ß√µes relacionadas a performance, escala ou suporte.
O Programa de Preview estar√° dispon√≠vel para todos os clientes?‚Äã
Sim, basta voc√™ ter uma conta cadastrada na Magalu Cloud para ter acesso ao programa.
Como participar do Programa de Preview?‚Äã
Como ativar o Programa?‚Äã

Abra o Console e acesse sua conta.
Clique para expandir o menu lateral.
Clique em ‚Äúhabilitar produtos em preview‚Äù.
No modal, clique em ‚Äúquero participar‚Äù.
Volte para a tela inicial e confira os produtos dispon√≠veis.

Pronto, agora todos os produtos dispon√≠veis no programa de preview est√£o habilitados na sua conta. Para come√ßar a usar, basta configurar cada um deles e iniciar sua jornada agora mesmo.
Como eu fa√ßo para n√£o participar mais do Programa?‚Äã
Quando voc√™ aceita participar do programa, os produtos dispon√≠veis passam a aparecer no console, mas n√£o √© obrigat√≥rio o uso, apenas se houver necessidade. N√£o √© poss√≠vel deixar de participar do programa, mas fique tranquilo, pois n√£o haver√° nenhuma cobran√ßa adicional.
Existe alguma cobran√ßa para participar do Programa?‚Äã
N√£o haver√° cobran√ßa para participar do programa, somente se voc√™ come√ßar a usar os produtos dispon√≠veis (a variar de acordo com o produto). O programa apenas permite que voc√™ consiga acessar esses produtos de forma f√°cil e r√°pida, sem precisar de intermedi√°rios.
Como saber quais s√£o os produtos dispon√≠veis no Programa?‚Äã
Ap√≥s voc√™ aceitar participar do programa, os produtos ficam dispon√≠veis no menu lateral com a tag ‚Äúpreview‚Äù. Para ter mais informa√ß√µes sobre cada produto, basta acessar docs.magalu.cloud.
Por que o Programa n√£o aparece para mim?‚Äã
Este programa est√° dispon√≠vel exclusivamente para clientes com m√°quinas ligadas na regi√£o Sudeste (SE1). Se for o caso e mesmo assim o programa n√£o est√° dispon√≠vel para voc√™, procure nosso time de atendimento em help.magalu.cloud.
Feedback‚Äã
Como posso enviar um feedback sobre o produto que estou usando?‚Äã

Abra a p√°gina/se√ß√£o do produto que deseja enviar o feedback.
Procure pela caixa de feedback localizada no canto inferior direito.



Envie seu feedback.

Encontrei um problema, o que devo fazer?‚Äã
Acesse nossa central de ajuda em help.magalu.cloud para encontrar as d√∫vidas mais frequentes. Caso ainda n√£o tenha encontrado a solu√ß√£o, utilize o bot√£o "Enviar um ticket", localizado no final da p√°gina.


---

